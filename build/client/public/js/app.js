!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},n={},o={},a={}.hasOwnProperty,r="components/",s=function(e,t){var n=0;t&&(0===t.indexOf(r)&&(n=r.length),t.indexOf("/",n)>0&&(t=t.substring(n,t.indexOf("/",n))));var a=o[e+"/index.js"]||o[t+"/deps/"+e+"/index.js"];return a?r+a.substring(0,a.length-".js".length):e},i=/^\.\.?(\/|$)/,c=function(e,t){for(var n,o=[],a=(i.test(t)?e+"/"+t:t).split("/"),r=0,s=a.length;s>r;r++)n=a[r],".."===n?o.pop():"."!==n&&""!==n&&o.push(n);return o.join("/")},l=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(n){var o=c(l(t),n);return e.require(o,t)}},p=function(e,t){var o={id:e,exports:{}};return n[e]=o,t(o.exports,u(e),o),o.exports},d=function(e,o){var r=c(e,".");if(null==o&&(o="/"),r=s(e,o),a.call(n,r))return n[r].exports;if(a.call(t,r))return p(r,t[r]);var i=c(r,"./index");if(a.call(n,i))return n[i].exports;if(a.call(t,i))return p(i,t[i]);throw new Error('Cannot find module "'+e+'" from "'+o+'"')};d.alias=function(e,t){o[t]=e},d.register=d.define=function(e,n){if("object"==typeof e)for(var o in e)a.call(e,o)&&(t[o]=e[o]);else t[e]=n},d.list=function(){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e},d.brunch=!0,d._cache=n,e.require=d}}(),require.register("actions/account_action_creator",function(e,n,o){var a,r,s,i,c,l,u,p;u=n("../utils/xhr_utils"),i=n("../app_dispatcher"),s=n("../constants/app_constants").ActionTypes,r=n("../stores/account_store"),c=null,l=n("./message_action_creator"),p=function(){return null==c&&(c=n("../actions/layout_action_creator")),c},o.exports=a={create:function(e,t){return i.handleViewAction({type:s.ADD_ACCOUNT_REQUEST,value:{inputValues:e}}),u.createAccount(e,function(e,t){var n;return null!=e||null==t?i.handleViewAction({type:s.ADD_ACCOUNT_FAILURE,value:{error:e}}):null==t?i.handleViewAction({type:s.ADD_ACCOUNT_FAILURE,value:{error:"no account returned from create"}}):(i.handleViewAction({type:s.ADD_ACCOUNT_SUCCESS,value:{account:t}}),n="account/"+t.id+"/config/mailboxes",window.router.navigate(n,{trigger:!0}))})},edit:function(e,t,n){var o;return o=r.getByID(t).mergeDeep(e),i.handleViewAction({type:s.EDIT_ACCOUNT_REQUEST,value:{inputValues:e,newAccount:o}}),u.editAccount(o,function(e,t){return null!=e?i.handleViewAction({type:s.EDIT_ACCOUNT_FAILURE,value:{error:e}}):(i.handleViewAction({type:s.EDIT_ACCOUNT_SUCCESS,value:{rawAccount:t}}),"function"==typeof n?n():void 0)})},check:function(e,t,n){var o,a;return null!=t?(o=r.getByID(t),a=o.mergeDeep(e).toJS()):a=e,i.handleViewAction({type:s.CHECK_ACCOUNT_REQUEST,value:{inputValues:e,newAccount:a}}),u.checkAccount(a,function(e,t){return null!=e?i.handleViewAction({type:s.CHECK_ACCOUNT_FAILURE,value:{error:e}}):i.handleViewAction({type:s.CHECK_ACCOUNT_SUCCESS,value:{rawAccount:t}}),"function"==typeof n?n(e,t):void 0})},remove:function(e){return i.handleViewAction({type:s.REMOVE_ACCOUNT,value:e}),u.removeAccount(e,function(e){}),p().notify(t("account removed"),{autoclose:!0}),window.router.navigate("",{trigger:!0})},ensureSelected:function(e){return function(e,t){return r.selectedIsDifferentThan(e,t)?a.selectAccount(e,t):void 0}}(this),selectDefaultIfNoneSelected:function(e){return function(){var e,t;return t=r.getSelected(),e=r.getDefault(),null==t&&e?a.selectAccount(e.get("id")):void 0}}(this),selectAccount:function(e,t){var n,o,a;return n=r.selectedIsDifferentThan(e,t),i.handleViewAction({type:s.SELECT_ACCOUNT,value:{accountID:e,mailboxID:t}}),o=r.getSelected(),a=null!=o?o.get("supportRFC4551"):void 0,null!=t&&n&&a?l.refreshMailbox(t):void 0},selectAccountForMessage:function(e){return function(e){var t;return t=r.getSelected(),null==t&&(null!=e?e.accountID:void 0)?a.selectAccount(e.accountID):void 0}}(this),discover:function(e,t){return u.accountDiscover(e,t)},mailboxCreate:function(e,n){return u.mailboxCreate(e,function(e,o){var a;return null==e?(i.handleViewAction({type:s.MAILBOX_CREATE,value:o}),p().alertSuccess(t("mailbox create ok"))):(a=""+t("mailbox create ko")+" "+(e.message||e),p().alertError(a)),"function"==typeof n?n(e):void 0})},mailboxUpdate:function(e,n){return u.mailboxUpdate(e,function(e,o){var a;return null==e?(i.handleViewAction({type:s.MAILBOX_UPDATE,value:o}),p().alertSuccess(t("mailbox update ok"))):(a=""+t("mailbox update ko")+" "+(e.message||e),p().alertError(a({autoclose:!0}))),"function"==typeof n?n(e):void 0})},mailboxDelete:function(e,t){return u.mailboxDelete(e,function(e,n){return null==e&&i.handleViewAction({type:s.MAILBOX_DELETE,value:n}),null!=t?t(e):void 0})},mailboxExpunge:function(e){var n,o;return n=e.accountID,o=e.mailboxID,i.handleViewAction({type:s.MAILBOX_EXPUNGE,value:o}),u.mailboxExpunge(e,function(e,a){var s;return null==e?p().notify(t("mailbox expunge ok"),{autoclose:!0}):(p().alertError(""+t("mailbox expunge ko")+" "+(e.message||e)),r.selectedIsDifferentThan(n,o)?void 0:(s=MessageStore.getQueryParams(),s.accountID=n,s.mailboxID=o,p().showMessageList({parameters:s})))})}}}),require.register("actions/contact_action_creator",function(e,n,o){var a,r,s,i,c;s=n("../app_dispatcher"),a=n("../constants/app_constants").ActionTypes,r=n("../utils/activity_utils"),c=n("../actions/layout_action_creator"),o.exports=i={searchContact:function(e){var t,n;return n={name:"search",data:{type:"contact",query:e}},t=new r(n),t.onsuccess=function(){return s.handleViewAction({type:a.RECEIVE_RAW_CONTACT_RESULTS,value:this.result})},t.onerror=function(){return console.log("KO",this.error,this.name)}},searchContactLocal:function(e){return s.handleViewAction({type:a.CONTACT_LOCAL_SEARCH,value:e})},createContact:function(e,n){var o,i;return i={name:"create",data:{type:"contact",contact:e}},o=new r(i),o.onsuccess=function(o,r){var i;return s.handleViewAction({type:a.RECEIVE_RAW_CONTACT_RESULTS,value:this.result}),i=t("contact create success",{contact:e.name||e.address}),c.notify(i,{autoclose:!0}),"function"==typeof n?n():void 0},o.onerror=function(){var e;return console.log(this.name),e=t("contact create error",{error:this.name}),c.alertError(e,{autoclose:!0}),"function"==typeof n?n():void 0}}}}),require.register("actions/layout_action_creator",function(e,t,n){var o,a,r,s,i,c,l,u,p,d,m,f,h,g;f=t("../utils/xhr_utils"),m=t("../utils/socketio_utils"),l=t("../stores/layout_store"),a=t("../stores/account_store"),d=t("../stores/message_store"),i=t("../app_dispatcher"),g=t("../constants/app_constants"),r=g.ActionTypes,s=g.AlertLevel,p=g.MessageFlags,o=t("./account_action_creator"),u=t("./message_action_creator"),h=0,n.exports=c={setDisposition:function(e){return i.handleViewAction({type:r.SET_DISPOSITION,value:e})},toggleListMode:function(){return i.handleViewAction({type:r.TOGGLE_LIST_MODE})},increasePreviewPanel:function(e){return null==e&&(e=1),i.handleViewAction({type:r.RESIZE_PREVIEW_PANE,value:Math.abs(e)})},decreasePreviewPanel:function(e){return null==e&&(e=1),i.handleViewAction({type:r.RESIZE_PREVIEW_PANE,value:-1*Math.abs(e)})},resetPreviewPanel:function(){return i.handleViewAction({type:r.RESIZE_PREVIEW_PANE,value:null})},toggleFullscreen:function(){var e;return e=l.isPreviewFullscreen()?r.MINIMIZE_PREVIEW_PANE:r.MAXIMIZE_PREVIEW_PANE,i.handleViewAction({type:e})},minimizePreview:function(){return i.handleViewAction({type:r.MINIMIZE_PREVIEW_PANE})},refresh:function(){return i.handleViewAction({type:r.REFRESH,value:null})},alert:function(e){return c.notify(e,{level:s.INFO,autoclose:!0})},alertSuccess:function(e){return c.notify(e,{level:s.SUCCESS,autoclose:!0})},alertWarning:function(e){return c.notify(e,{level:s.WARNING,autoclose:!0})},alertError:function(e){return c.notify(e,{level:s.ERROR,autoclose:!0})},notify:function(e,t){var n;if(null==e||""===e.toString().trim())throw new Error("Empty notification");return n={id:"taskid-"+h++,finished:!0,message:e.toString()},null!=t&&(n.autoclose=t.autoclose,n.errors=t.errors,n.finished=t.finished,n.actions=t.actions,n.level=t.level),i.handleViewAction({type:r.RECEIVE_TASK_UPDATE,value:n})},clearToasts:function(){return i.handleViewAction({type:r.CLEAR_TOASTS,value:null})},getDefaultRoute:function(){return 0===a.getAll().length?"account.new":"account.mailbox.messages"},showMessageList:function(e){var t,n,a,s,c,l,p;return l=e.parameters,t=l.accountID,c=l.mailboxID,s=l.filter,p=l.sort,a=l.before,n=l.after,o.ensureSelected(t,c),i.handleViewAction({type:r.QUERY_PARAMETER_CHANGED,value:l}),u.fetchMoreOfCurrentQuery()},showSearchResult:function(e){var t,n,a;return a=e.parameters,t=a.accountID,n=a.search,"all"!==t?o.ensureSelected(t):o.selectAccount(null),i.handleViewAction({type:r.SEARCH_PARAMETER_CHANGED,value:{accountID:t,search:n}}),"-"!==n?u.fetchSearchResults(t,n):void 0},showMessage:function(e,t){var n;return n=d.getByID(e.parameters.messageID),null!=n?o.selectAccountForMessage(n):f.fetchMessage(messageID,function(e,t){return null!=e?c.alertError(e):(u.receiveRawMessage(t),o.selectAccountForMessage(t))})},showConversation:function(e,t){var n,a,r,s;return s=e.parameters.messageID,n=e.parameters.conversationID,r=d.getByID(s),null!=r&&o.selectAccountForMessage(r),a=d.getConversationsLength().get(n),null==a||a>1?u.fetchConversation(n):void 0},showComposeNewMessage:function(e,t){return o.selectDefaultIfNoneSelected()},showComposeMessage:function(e,t){var n,a;return o.selectDefaultIfNoneSelected(),a=e.parameters.messageID,n=d.getByID(a),null==n?f.fetchMessage(a,function(e,t){return null!=e?c.alertError(e):(u.receiveRawMessage(t),o.selectAccountForMessage(t))}):void 0},showCreateAccount:function(e,t){return o.selectAccount(null)},showConfigAccount:function(e,t){return o.selectAccount(e.parameters.accountID)},showSettings:function(e,t){},toastsShow:function(){return i.handleViewAction({type:r.TOASTS_SHOW})},toastsHide:function(){return i.handleViewAction({type:r.TOASTS_HIDE})},intentAvailability:function(e){return i.handleViewAction({type:r.INTENT_AVAILABLE,value:e})},drawerShow:function(){return i.handleViewAction({type:r.DRAWER_SHOW})},drawerHide:function(){return i.handleViewAction({type:r.DRAWER_HIDE})},drawerToggle:function(){return i.handleViewAction({type:r.DRAWER_TOGGLE})},displayModal:function(e){return null==e.closeModal&&(e.closeModal=function(){return c.hideModal()}),i.handleViewAction({type:r.DISPLAY_MODAL,value:e})},hideModal:function(){return i.handleViewAction({type:r.HIDE_MODAL})}}}),require.register("actions/message_action_creator",function(e,t,n){var o,a,r,s,i,c,l,u,p,d,m,f;r=t("../app_dispatcher"),s=t("../constants/app_constants"),a=s.ActionTypes,l=s.MessageFlags,i=s.FlagsConstants,d=t("../utils/xhr_utils"),o=t("../stores/account_store"),u=t("../stores/message_store"),p=t("../stores/search_store"),m=1,n.exports=c={receiveRawMessages:function(e){return r.handleViewAction({type:a.RECEIVE_RAW_MESSAGES,value:e})},receiveRawMessage:function(e){return r.handleViewAction({type:a.RECEIVE_RAW_MESSAGE,value:e})},send:function(e,t){return d.messageSend(e,function(e,n){return null==e&&null!=n&&r.handleViewAction({type:a.MESSAGE_SEND,value:n}),"function"==typeof t?t(e,n):void 0})},setCurrent:function(e,t){return null!=e&&"string"!=typeof e&&(e=e.get("id")),r.handleViewAction({type:a.MESSAGE_CURRENT,value:{messageID:e,conv:t}})},fetchMoreOfCurrentQuery:function(){var e,t,n;return(n=u.getNextUrl())?(e=o.getSelectedMailbox().get("id"),r.handleViewAction({type:a.MESSAGE_FETCH_REQUEST,value:{mailboxID:e}}),t=Date.now(),d.fetchMessagesByFolder(n,function(n,o){return null!=n?r.handleViewAction({type:a.MESSAGE_FETCH_FAILURE,value:{mailboxID:e}}):(o.messages.forEach(function(e){return e.updated=t}),r.handleViewAction({type:a.MESSAGE_FETCH_SUCCESS,value:{mailboxID:e,fetchResult:o}}))})):void 0},fetchSearchResults:function(e,t){var n;return"-"===t?null:(n=p.getNextSearchUrl())?(r.handleViewAction({type:a.SEARCH_REQUEST,value:{search:t}}),d.search(n,function(e,t){return null!=e?r.handleViewAction({type:a.SEARCH_FAILURE,value:{error:e}}):r.handleViewAction({type:a.SEARCH_SUCCESS,value:{searchResults:t}})})):void 0},fetchConversation:function(e){return r.handleViewAction({type:a.CONVERSATION_FETCH_REQUEST,value:{conversationID:e}}),d.fetchConversation(e,function(e,t){return e?r.handleViewAction({type:a.CONVERSATION_FETCH_FAILURE,value:{error:e}}):r.handleViewAction({type:a.CONVERSATION_FETCH_SUCCESS,value:{updated:t}})})},recover:function(e,t){return r.handleViewAction({type:a.MESSAGE_RECOVER_REQUEST,value:{ref:t}}),d.batchFetch(e,function(e,n){return e?r.handleViewAction({type:a.MESSAGE_RECOVER_FAILURE,value:{ref:t}}):r.handleViewAction({type:a.MESSAGE_RECOVER_SUCCESS,value:{ref:t}})})},refreshMailbox:function(e){return o.isMailboxRefreshing(e)?void 0:(r.handleViewAction({type:a.REFRESH_REQUEST,value:{mailboxID:e}}),d.refreshMailbox(e,function(t,n){return null!=t?r.handleViewAction({type:a.REFRESH_FAILURE,value:{mailboxID:e,error:t}}):r.handleViewAction({type:a.REFRESH_SUCCESS,value:{mailboxID:e,updated:n}})}))},"delete":function(e,t){var n,o;return n=m++,r.handleViewAction({type:a.MESSAGE_TRASH_REQUEST,value:{target:e,ref:n}}),o=Date.now(),d.batchDelete(e,function(t){return function(s,i){var c,l,u;if(s)return r.handleViewAction({type:a.MESSAGE_TRASH_FAILURE,value:{target:e,ref:n,error:s}}),t.recover(e,n);for(l=0,u=i.length;u>l;l++)c=i[l],c.updated=o;return r.handleViewAction({type:a.MESSAGE_TRASH_SUCCESS,value:{target:e,ref:n,updated:i}})}}(this))},move:function(e,t,n,o){var s,i;return s=m++,r.handleViewAction({type:a.MESSAGE_MOVE_REQUEST,value:{target:e,ref:s,from:t,to:n}}),i=Date.now(),d.batchMove(e,t,n,function(t){return function(n,c){var l,u,p;if(n)r.handleViewAction({type:a.MESSAGE_MOVE_FAILURE,value:{target:e,ref:s,error:n}}),t.recover(e,s);else{for(u=0,p=c.length;p>u;u++)l=c[u],l.updated=i;r.handleViewAction({type:a.MESSAGE_MOVE_SUCCESS,value:{target:e,ref:s,updated:c}})}return"function"==typeof o?o(n,c):void 0}}(this))},mark:function(e,t,n){var o,s,c,l;switch(c=m++,t){case i.SEEN:s="batchAddFlag",o=i.SEEN;break;case i.FLAGGED:s="batchAddFlag",o=i.FLAGGED;break;case i.UNSEEN:s="batchRemoveFlag",o=i.SEEN;break;case i.NOFLAG:s="batchRemoveFlag",o=i.FLAGGED;break;default:throw new Error("Wrong usage : unrecognized FlagsConstants")}return r.handleViewAction({type:a.MESSAGE_FLAGS_REQUEST,value:{target:e,ref:c,op:s,flag:o,flagAction:t}}),l=Date.now(),d[s](e,o,function(i){return function(u,p){var d,m,f;if(u)r.handleViewAction({type:a.MESSAGE_FLAGS_FAILURE,value:{target:e,ref:c,error:u,op:s,flag:o,flagAction:t}}),i.recover(e,c);else{for(m=0,f=p.length;f>m;m++)d=p[m],d.updated=l;r.handleViewAction({type:a.MESSAGE_FLAGS_SUCCESS,value:{target:e,ref:c,updated:p,op:s,flag:o,flagAction:t}})}return"function"==typeof n?n(u,p):void 0}}(this))},undo:function(e){var t,n,o,s,i,l,p,d,m,h;return i=u.getUndoableRequest(e),o=i.messages,h=i.type,n=i.from,d=i.to,p=i.target,m=i.trashBoxID,l=[],s="move"===h?d:m,t={},o.forEach(function(e){var n,o,a,r;return o=function(){var t,o;t=e.get("mailboxIDs"),o=[];for(n in t)r=t[n],o.push(n);return o}(),a=o.sort().join(","),null==t[a]&&(t[a]={to:o,from:s,messageIDs:[]}),t[a].messageIDs.push(e.get("id"))}),r.handleViewAction({type:a.MESSAGE_UNDO_START,value:{ref:e}}),f(t,function(e,t,o){var a;return d=e.to,n=e.from,a=e.messageIDs,p={messageIDs:a,silent:!0},c.move(p,n,d,o)},function(t){return t?(r.handleViewAction({type:a.MESSAGE_UNDO_FAILURE,value:{ref:e}}),this.recover(p,e)):r.handleViewAction({type:a.MESSAGE_UNDO_SUCCESS,value:{ref:e}})})}},f=function(e,t,n){var o,a,r;return a=Object.keys(e),o=0,(r=function(){var s;return s=a[o],t(e[s],s,function(e){return e?n(e):++o===a.length?n(null):r()})})()}}),require.register("actions/settings_action_creator",function(e,n,o){var a,r,s,i,c,l;l=n("../utils/xhr_utils"),r=n("../app_dispatcher"),a=n("../constants/app_constants").ActionTypes,c=n("../stores/settings_store"),s=n("./layout_action_creator"),o.exports=i={edit:function(e){return l.changeSettings(e,function(e,n){return e?s.alertError(t("settings save error")+e):r.handleViewAction({type:a.SETTINGS_UPDATED,value:n})})}}}),require.register("app_dispatcher",function(e,t,n){var o,a,r,s={}.hasOwnProperty,i=function(e,t){function n(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};a=t("./libs/flux/dispatcher/dispatcher"),r=t("./constants/app_constants").PayloadSources,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.handleViewAction=function(e){var t;return window.cozyMails.logAction(e),t={source:r.VIEW_ACTION,action:e},this.dispatch(t),window.cozyMails.customEvent(r.VIEW_ACTION,e)},t.prototype.handleServerAction=function(e){var t;return window.cozyMails.logAction(e),t={source:r.SERVER_ACTION,action:e},this.dispatch(t),window.cozyMails.customEvent(r.SERVER_ACTION,e)},t}(a),n.exports=new o}),require.register("components/account_config",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S;l=n("../stores/account_store"),a=n("../actions/account_action_creator"),p=n("../actions/layout_action_creator"),f=n("../mixins/router_mixin"),g=n("../mixins/store_watch_mixin"),h=n("../mixins/should_update_mixin"),S=n("./basic_components"),u=S.Container,b=S.Title,y=S.Tabs,c=n("./account_config_delete"),s=n("./account_config_main"),r=n("./account_config_mailboxes"),i=n("./account_config_signature"),k=React.DOM.div,m=["label","name","login","password","imapServer","imapPort","smtpServer","smtpPort","smtpMethod"],d=m,v=["account","mailboxes","signature"],o.exports=React.createClass({displayName:"AccountConfig",_lastDiscovered:"",mixins:[f,h.UnderscoreEqualitySlow,g([l])],getStateFromStores:function(){var e,t,n;return n={},n.serverErrors=l.getErrors(),n.selectedAccount=l.getSelected(),n.isWaiting=l.isWaiting(),n.isChecking=l.isChecking(),n.mailboxes=l.getSelectedMailboxes(!0),n.favoriteMailboxes=l.getSelectedFavorites(),n.submitted=null!=l.getSelected(),this.state?(this.state.selectedAccount!==n.selectedAccount&&(t=this.state.editedAccount.merge(n.selectedAccount),n.editedAccount=t),this.state.serverErrors!==n.serverErrors&&(n.errors=n.serverErrors)):(e=l.getSelected(),null==e&&(e=l.makeEmptyAccount()),n.isWaiting=!1,n.errors=Immutable.Map(),n.editedAccount=e),n},isOauth:function(){var e;return null!=(null!=(e=this.state.selectedAccount)?e.get("oauthProvider"):void 0)},isNew:function(){return null==this.state.selectedAccount},getCurrentTab:function(){var e,t;return t=this.state.editedAccount.get("mailboxes"),e=0===(null!=t?t.length:void 0)?"mailboxes":"account",this.props.tab||e},onTabChangesDoSubmit:function(e){return this.onTabChanges(e,function(e){return function(){return e.onSubmit()}}(this))},onTabChanges:function(e,t){var n,o;return null==t&&(t=function(){}),n={editedAccount:this.state.editedAccount.merge(e),errors:Immutable.Map()},this.state.submitted&&(o=this.getLocalValidationErrors(n.editedAccount),n.errors=Immutable.Map(o)),this.setState(n,t)},render:function(){var e,n;return e=this.getCurrentTab(),u({id:"mailbox-config"},b({text:t(this.isNew()?"account new":"account edit")}),this.state.editedAccount.get("id")?y({tabs:v.map(function(n){return function(o){return{"class":e===o?"active":"",text:t("account tab "+o),url:n.buildUrl({direction:"first",action:"account.config",parameters:[n.state.editedAccount.get("id"),o]})}}}(this))}):void 0,function(){switch(e){case"signature":return i({account:this.state.editedAccount,editedAccount:this.state.editedAccount,requestChange:this.onTabChanges,onSubmit:this.onSubmit,errors:this.state.errors});case"mailboxes":return r({editedAccount:this.state.editedAccount,requestChange:this.onTabChangesDoSubmit,nomailboxesError:this.state.errors,onSubmit:this.onSubmit,errors:this.state.errors});default:return s({editedAccount:this.state.editedAccount,requestChange:this.onTabChanges,isWaiting:this.state.isWaiting,checking:this.state.isChecking,onSubmit:this.onSubmit,errors:this.state.errors})}}.call(this),(null!=(n=this.state.editedAccount)?n.get("id"):void 0)?c({editedAccount:this.state.editedAccount}):void 0)},getLocalValidationErrors:function(e){var n,o,a,r,s;for(o={},a=this.isNew()?m:d,r=0,s=a.length;s>r;r++)n=a[r],e.get(n)||(o[n]=t("validate must not be empty"));return o},onSubmit:function(e,n){var o,r,s,i;return null!=e&&e.preventDefault(),r=this.getLocalValidationErrors(this.state.editedAccount),s=null!=(i=this.state.editedAccount)?i.get("id"):void 0,o=this.state.editedAccount.toJS(),r.length>0?(p.alertError(t("account errors")),this.setState({submitted:!0,errors:r})):n===!0?a.check(o,s):s?a.edit(o,s):a.create(o)}})}),require.register("components/account_config_delete",function(e,n,o){var a,r,s,i,c,l,u,p;u=React.DOM.div,a=n("../actions/account_action_creator"),l=n("../actions/layout_action_creator"),p=n("./basic_components"),s=p.FieldSet,c=p.FormButtons,i=p.FormButton,o.exports=r=React.createClass({displayName:"AccountConfigDelete",getInitialState:function(){var e;return e={},e.deleting=!1,e},render:function(){return s({text:t("account danger zone")},c(null,i({className:"btn-remove","default":!0,danger:!0,onClick:this.onRemove,spinner:this.state.deleting,icon:"trash",text:t("account remove")})))},onRemove:function(e){var n;return null!=e&&e.preventDefault(),n=this.props.editedAccount.get("label"),l.displayModal({title:t("app confirm delete"),subtitle:t("account remove confirm",{label:n}),closeLabel:t("app cancel"),actionLabel:t("app confirm"),action:function(e){return function(){return l.hideModal(),e.setState({deleting:!0}),a.remove(e.props.editedAccount.get("id"))}}(this)})}})}),require.register("components/account_config_input",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f;m=React.DOM,l=m.div,p=m.label,u=m.input,d=m.textarea,f=n("./basic_components"),s=f.ErrorLine,r=f.Dropdown,c=React.addons.classSet,i=n("../mixins/router_mixin"),o.exports=a=React.createClass({displayName:"AccountInput",mixins:[i,React.addons.LinkedStateMixin],propTypes:{name:React.PropTypes.string.isRequired,error:React.PropTypes.string,className:React.PropTypes.string,onClick:React.PropTypes.func,onInput:React.PropTypes.func,onBlur:React.PropTypes.func,type:React.PropTypes.oneOf(["checkbox","textarea","email","text","password"]),valueLink:React.PropTypes.shape({value:React.PropTypes.any,requestChange:React.PropTypes.func.isRequired}),options:function(e){return"dropdown"===e.type?React.PropTypes.object.isRequired.apply(this,arguments):void 0}},getDefaultProps:function(){return{type:"text"}},render:function(){var e,n,o;return e=this.props.name,o=this.props.type||"text",n=this.buildPlaceHolder(o,e),l({key:"account-input-"+e,className:this.buildMainClasses(e)},p({htmlFor:"mailbox-"+e,className:"col-sm-2 col-sm-offset-2 control-label"},t("account "+e)),l({className:"col-sm-3"},"checkbox"===o?u({id:"mailbox-"+e,name:"mailbox-"+e,checkedLink:this.props.valueLink,type:o,onClick:this.props.onClick}):"textarea"===o?d({id:"mailbox-"+e,name:"mailbox-"+e,valueLink:this.props.valueLink,className:"form-control",placeholder:n,onBlur:this.props.onBlur,onInput:this.props.onInput}):"dropdown"===o?r({id:"mailbox-"+e,name:"mailbox-"+e,valueLink:this.props.valueLink,options:this.props.options,allowUndefined:this.props.allowUndefined}):u({id:"mailbox-"+e,name:"mailbox-"+e,valueLink:this.props.valueLink,type:o,className:"form-control",placeholder:n,onBlur:this.props.onBlur,onInput:this.props.onInput})),this.props.error?s({text:this.props.error}):void 0)},buildMainClasses:function(e){var t;return t="form-group account-item-"+e+" ",this.props.error&&(t=""+t+" has-error "),this.props.className&&(t=""+t+" "+this.props.className+" "),t},buildPlaceHolder:function(e,n){var o;return o=null,("text"===e||"email"===e||"signature"===n)&&(o=t("account "+n+" short")),o}})}),require.register("components/account_config_item",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f;f=React.DOM,d=f.li,m=f.span,u=f.i,p=f.input,l=React.addons.classSet,c=n("./basic_components").Spinner,a=n("../actions/account_action_creator"),r=n("../actions/layout_action_creator"),i=n("../mixins/router_mixin"),o.exports=s=React.createClass({displayName:"MailboxItem",mixins:[i,React.addons.LinkedStateMixin],propTypes:{mailbox:React.PropTypes.object},getInitialState:function(){return{edited:!1,favorite:this.props.favorite,deleting:!1}},render:function(){var e,n,o,a,r,s,i,f,h;return f=this.buildIndentation(),h=this.buildFavoriteValues(),n=h.favoriteClass,o=h.favoriteTitle,s=this.props.mailbox.get("nbTotal")||0,i=this.props.mailbox.get("nbUnread")||0,r=this.props.mailbox.get("nbRecent")||0,a=this.props.mailbox.get("id"),e=l({row:!0,box:!0,"box-item":!0,edited:this.state.edited}),this.state.edited?d({className:e,key:a},m({className:"col-xs-1 box-action save",onClick:this.updateMailbox,title:t("mailbox title edit save")},u({className:"fa fa-check"})),m({className:"col-xs-1 box-action cancel",onClick:this.undoMailbox,title:t("mailbox title edit cancel")},u({className:"fa fa-undo"})),p({className:"col-xs-6 box-label",ref:"label",defaultValue:this.props.mailbox.get("label"),type:"text",onKeyDown:this.onKeyDown})):d({className:e,key:a},m({className:"col-xs-1 box-action edit",onClick:this.editMailbox,title:t("mailbox title edit")},u({className:"fa fa-pencil"})),this.state.deleting?m({className:"col-xs-1 box-action delete"},c()):m({className:"col-xs-1 box-action delete",onClick:this.deleteMailbox,title:t("mailbox title delete")},u({className:"fa fa-trash-o"})),m({className:"col-xs-6 box-label",onClick:this.editMailbox},""+f+this.props.mailbox.get("label")),m({className:"col-xs-1 box-action favorite",title:o,onClick:this.toggleFavorite},u({className:n})),m({className:"col-xs-1 text-center box-count box-total"},s),m({className:"col-xs-1 text-center box-count box-unread"},i),m({className:"col-xs-1 text-center box-count box-new"},r))},buildIndentation:function(){return new Array(this.props.mailbox.get("depth")+1).join("    ")},buildFavoriteValues:function(){var e,n;return this.state.favorite?(e="fa fa-eye mailbox-visi-yes",n=t("mailbox title favorite")):(e="fa fa-eye-slash mailbox-visi-no",n=t("mailbox title not favorite")),{favoriteClass:e,favoriteTitle:n}},onKeyDown:function(e){switch(e.key){case"Enter":return this.updateMailbox()}},editMailbox:function(e){return e.preventDefault(),this.setState({edited:!0})},undoMailbox:function(e){return e.preventDefault(),this.setState({edited:!1})},updateMailbox:function(e){var t;return null!=e&&e.preventDefault(),t={label:this.refs.label.getDOMNode().value.trim(),mailboxID:this.props.mailbox.get("id"),accountID:this.props.accountID},a.mailboxUpdate(t,function(e){return function(t){return t?void 0:e.setState({edited:!1})}}(this))},toggleFavorite:function(e){var t,n;return t={favorite:!this.state.favorite,mailboxID:this.props.mailbox.get("id"),accountID:this.props.accountID},n=this.state.favorite,this.setState({favorite:!this.state.favorite}),a.mailboxUpdate(t,function(e){return e?this.setState({favorite:n}):void 0})},deleteMailbox:function(e){var n;return null!=e&&e.preventDefault(),n={title:t("app confirm delete"),subtitle:t("account confirm delbox"),closeLabel:t("app cancel"),actionLabel:t("app confirm"),action:function(e){return function(){var n;return r.hideModal(),e.setState({deleting:!0}),n={mailboxID:e.props.mailbox.get("id"),accountID:e.props.accountID},a.mailboxDelete(n,function(n){var o;return null!=n?(o=""+t("mailbox delete ko")+" "+n,r.alertError(o)):r.notify(t("mailbox delete ok"),{autoclose:!0}),e.isMounted()?e.setState({deleting:!1}):void 0})}}(this)},r.displayModal(n)}})}),require.register("components/account_config_mailboxes",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,_,M,C=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};_=React.DOM,g=_.div,y=_.h4,E=_.ul,w=_.li,x=_.span,v=_.form,b=_.i,k=_.input,S=_.label,h=React.addons.classSet,a=n("../actions/account_action_creator"),c=n("../actions/layout_action_creator"),p=n("../mixins/router_mixin"),d=n("../mixins/should_update_mixin"),l=n("./account_config_item"),u=n("./mailbox_picker"),M=n("./basic_components"),m=M.SubTitle,i=M.Form,s=n("./account_config_delete"),f=n("../libs/cached_transform"),o.exports=r=React.createClass({displayName:"AccountConfigMailboxes",mixins:[p,React.addons.LinkedStateMixin,d.UnderscoreEqualitySlow],propTypes:{editedAccount:React.PropTypes.instanceOf(Immutable.Map).isRequired,requestChange:React.PropTypes.func.isRequired,errors:React.PropTypes.instanceOf(Immutable.Map).isRequired,onSubmit:React.PropTypes.func.isRequired},getInitialState:function(){return{newMailboxName:"",newMailboxParent:null}},makeLinkState:function(e){var t;return t=this.props.editedAccount.get(e),f(this,"__cacheLS",t,function(n){return function(){return{value:t,requestChange:function(t){var o;return o={},o[e]=t,n.props.requestChange(o)}}}}(this))},render:function(){return i({className:"form-horizontal"},m({className:"config-title"},t("account special mailboxes")),this.renderMailboxChoice("draft"),this.renderMailboxChoice("sent"),this.renderMailboxChoice("trash"),m({className:"config-title"},t("account mailboxes")),E({className:"folder-list list-unstyled boxes container"},this.props.editedAccount.get("mailboxes").length?this.renderTableHeader():void 0,this.props.editedAccount.get("mailboxes").map(function(e){return function(t,n){return l({key:n,accountID:e.props.editedAccount.get("id"),favorite:C.call(e.props.editedAccount.get("favorites"),n)>=0,mailbox:t})}}(this)).toJS(),this.renderTableFooter()))},renderError:function(){var e;return this.props.error&&"AccountConfigError"===this.props.error.name?(e=t("config error "+this.props.error.field),g({className:"alert alert-warning"},e)):this.props.error?g({className:"alert alert-warning"},this.props.error.message):0!==Object.keys(this.props.errors).length?g({className:"alert alert-warning"},t("account errors")):void 0},renderTableHeader:function(){return w({className:"row box title",key:"title"},x({className:"col-xs-1"},""),x({className:"col-xs-1"},""),x({className:"col-xs-6"},""),x({className:"col-xs-1"},""),x({className:"col-xs-1 text-center"},t("mailbox title total")),x({className:"col-xs-1 text-center"},t("mailbox title unread")),x({className:"col-xs-1 text-center"},t("mailbox title new")))},renderTableFooter:function(){return w({className:"row box new",key:"new"},x({className:"col-xs-1 box-action add",onClick:this.addMailboxClicked,title:t("mailbox title add")},b({className:"fa fa-plus"})),x({className:"col-xs-1 box-action cancel",onClick:this.resetMailboxClicked,title:t("mailbox title add cancel")},b({className:"fa fa-undo"})),g({className:"col-xs-6"},k({id:"newmailbox",type:"text",className:"form-control",placeholder:t("account newmailbox placeholder"),valueLink:this.linkState("newMailboxName"),onKeyDown:this.onNewMailboxKeyDown})),S({className:"col-xs-2 text-center control-label"},t("account newmailbox parent")),g({className:"col-xs-2 text-center"},u({allowUndefined:!0,valueLink:this.linkState("newMailboxParent"),mailboxes:this.props.editedAccount.get("mailboxes")})))},renderMailboxChoice:function(e){var n,o,a;return a=""+e+"Mailbox",o=t("account "+e+" mailbox"),n="form-group "+e+" ",this.props.editedAccount.get(a)||(n+="has-error"),g({className:n},S({className:"col-sm-2 col-sm-offset-2 control-label"},o),g({className:"col-sm-3"},u({allowUndefined:!1,valueLink:this.makeLinkState(a),mailboxes:this.props.editedAccount.get("mailboxes")})))},onNewMailboxKeyDown:function(e){return"Enter"===e.key?(e.preventDefault(),this.setState({newMailboxName:e.target.value},function(e){return function(){return e.addMailboxClicked()}}(this))):void 0},addMailboxClicked:function(e){var t;return null!=e&&e.preventDefault(),t={label:this.state.newMailboxName,accountID:this.props.editedAccount.get("id"),parentID:this.state.newMailboxParent},a.mailboxCreate(t,function(e){return function(t){return t?void 0:e.setState({newMailboxName:""})}}(this))},resetMailboxClicked:function(e){return e.preventDefault(),this.refs.newmailbox.getDOMNode().value="",this.setState({newMailboxParent:null})}});
}),require.register("components/account_config_main",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,M,C,T,A,D,P;P=React.DOM,b=P.div,T=P.p,S=P.form,E=P.label,x=P.input,g=P.button,D=P.ul,C=P.li,f=P.a,A=P.span,w=P.i,k=P.fieldset,M=P.legend,v=React.addons.classSet,i=n("./account_config_input"),s=n("./account_config_delete"),a=n("../actions/account_action_creator"),d=n("../mixins/router_mixin"),h=n("./basic_components"),y=n("../utils/discovery_to_fields"),l=h.Form,c=h.FieldSet,p=h.FormButtons,u=h.FormButton,m={NONE:t("account smtpMethod NONE"),"CRAM-MD5":t("account smtpMethod CRAM-MD5"),LOGIN:t("account smtpMethod LOGIN"),PLAIN:t("account smtpMethod PLAIN")},o.exports=r=React.createClass({displayName:"AccountConfigMain",mixins:[d],propTypes:{editedAccount:React.PropTypes.instanceOf(Immutable.Map).isRequired,requestChange:React.PropTypes.func.isRequired,isWaiting:React.PropTypes.bool.isRequired},shouldComponentUpdate:function(e,t){var n,o;return o=_.isEqual(t,this.state),n=_.isEqual(e,this.props),!(o&&n)},getInitialState:function(){var e,t,n;return e=null!=(n=this.props.editedAccount.get("login"))?n.split("@")[1]:void 0,this.props.editedAccount.get("id")&&e&&(this._lastDiscovered=e),t={imapAdvanced:!1,smtpAdvanced:!1,displayGMAILSecurity:!1}},makeLinkState:function(e){var t,n;return t=(null!=this.__cacheLS?this.__cacheLS:this.__cacheLS={})[e],n=this.props.editedAccount.get(e)||"",(null!=t?t.value:void 0)===n?t:this.__cacheLS[e]={value:n,requestChange:function(t){return function(n){return t.props.requestChange(t.makeChanges(e,n))}}(this)}},makeChanges:function(e,t){var n;switch(n={},n[e]=t,e){case"imapPort":n.imapSSL="993"===t,n.imapTLS=!1;break;case"smtpPort":n.smtpSSL="465"===t,n.smtpTLS="587"===t;break;case"imapSSL":this.state.imapManualPort||(n.imapPort=t?"993":"143");break;case"smtpSSL":this.state.smtpManualPort||(n.smtpPort=t?"465":"25");break;case"smtpTLS":this.state.smtpManualPort||(n.smtpPort=t?"587":"25");break;case"login":this.doDiscovery(null!=t?t.split("@")[1]:void 0)}return n},componentWillReceiveProps:function(e){var t,n;return n=function(t,n){return null==n&&(n=""),e.errors.get(t)&&e.editedAccount.get(t)!==n},t={},n("imapLogin")&&(t.imapAdvanced=!0),n("smtpLogin")&&(t.smtpAdvanced=!0),n("smtpPassword")&&(t.smtpAdvanced=!0),n("smtpMethod","PLAIN")&&(t.smtpAdvanced=!0),t.smtpAdvanced||t.imapAdvanced?this.setState(t):void 0},buildButtonLabel:function(){var e;return e=this.props.isWaiting?"saving":this.props.editedAccount.get("id")?"save":"add",t("account "+e)},buildInput:function(e,t){var n;return null==t&&(t={}),null==t.name&&(t.name=e),t.key="account-config-field-"+e,null==t.valueLink&&(t.valueLink=this.makeLinkState(e)),null==t.error&&(t.error=null!=(n=this.props.errors)?n.get(e):void 0),i(t)},render:function(){var e,n,o;return e=v({"form-horizontal":!0,"form-account":!0,waiting:this.props.isWaiting}),n=null!=(null!=(o=this.props.editedAccount)?o.get("oauthProvider"):void 0),l({className:e},n?T(null,t("account oauth")):void 0,c({text:t("account identifiers")},this.buildInput("label"),this.buildInput("name"),this.buildInput("login"),n?void 0:this.buildInput("password",{type:"password"})),this.buildInput("accountType",{className:"hidden"}),this.state.displayGMAILSecurity?this._renderGMAILSecurity():void 0,n?void 0:this._renderReceivingServer(),n?void 0:this._renderSendingServer(),this._renderButtons())},_renderReceivingServer:function(){var e;return e=this.state.imapAdvanced?"hide":"show",c({text:t("account receiving server")},this.buildInput("imapServer"),this.buildInput("imapPort"),this.buildInput("imapSSL",{type:"checkbox"}),this.buildInput("imapTLS",{type:"checkbox"}),b({className:"form-group advanced-imap-toggle"},f({className:"col-sm-3 col-sm-offset-2 control-label clickable",onClick:this.toggleIMAPAdvanced},t("account imap "+e+" advanced"))),this.state.imapAdvanced?this.buildInput("imapLogin"):void 0)},_renderSendingServer:function(){var e;return e=this.state.smtpAdvanced?"hide":"show",c({text:t("account sending server")},this.buildInput("smtpServer"),this.buildInput("smtpPort"),this.buildInput("smtpSSL",{type:"checkbox"}),this.buildInput("smtpTLS",{type:"checkbox"}),b({className:"form-group advanced-smtp-toggle"},f({className:"col-sm-3 col-sm-offset-2 control-label clickable",onClick:this.toggleSMTPAdvanced},t("account smtp "+e+" advanced"))),this.state.smtpAdvanced?this.buildInput("smtpMethod",{type:"dropdown",options:m,allowUndefined:!0}):void 0,this.state.smtpAdvanced?this.buildInput("smtpLogin"):void 0,this.state.smtpAdvanced?this.buildInput("smtpPassword",{type:"password"}):void 0)},_renderGMAILSecurity:function(){var e;return e="https://www.google.com/settings/security/lesssecureapps",c({text:t("gmail security tile")},T(null,t("gmail security body",{login:this.state.login.value})),T(null,f({target:"_blank",href:e},t("gmail security link"))))},_renderButtons:function(){return 0===this.props.errors.length?c({text:t("account actions")},p(null,u({"class":"action-save",contrast:!0,icon:"save",spinner:this.props.isWaiting,onClick:this.onSubmit,text:this.buildButtonLabel()}),u({"class":"action-check",spinner:this.props.checking,onClick:this.onCheck,icon:"ellipsis-h",text:t("account check")}))):void 0},onSubmit:function(e){return this.props.onSubmit(e,!1)},onCheck:function(e){return this.props.onSubmit(e,!0)},toggleSMTPAdvanced:function(){return this.setState({smtpAdvanced:!this.state.smtpAdvanced})},toggleIMAPAdvanced:function(){return this.setState({imapAdvanced:!this.state.imapAdvanced})},doDiscovery:function(e){return null!=e&&e.length>3&&e!==this._lastDiscovered?this.discoverTimeout?this.nextDiscover=e:this.discoverTimeout=setTimeout(function(t){return function(){return t.doDiscoveryNow(e)}}(this),2e3):void 0},doDiscoveryNow:function(e){return a.discover(e,function(e){return function(t,n){var o,a;return t||(o=y(n),a="imap.googlemail.com"===o.imapServer,e.setState({displayGMAILSecurity:a}),e.props.requestChange(o)),e.nextDiscover?(e.doDiscoveryNow(e.nextDiscover),e.nextDiscover=null):e.discoverTimeout=null}}(this))}})}),require.register("components/account_config_signature",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,_;E=React.DOM,h=E.div,v=E.h4,x=E.ul,S=E.li,w=E.span,g=E.form,y=E.i,b=E.input,k=E.label,f=React.addons.classSet,a=n("../actions/account_action_creator"),u=n("../actions/layout_action_creator"),p=n("../mixins/router_mixin"),r=n("./account_config_input"),d=n("../mixins/should_update_mixin"),m=n("../libs/cached_transform"),_=n("./basic_components"),i=_.Form,s=_.FieldSet,l=_.FormButtons,c=_.FormButton,o.exports=React.createClass({displayName:"AccountConfigSignature",mixins:[React.addons.LinkedStateMixin,d.UnderscoreEqualitySlow],propTypes:{editedAccount:React.PropTypes.instanceOf(Immutable.Map).isRequired,requestChange:React.PropTypes.func.isRequired,errors:React.PropTypes.instanceOf(Immutable.Map).isRequired,onSubmit:React.PropTypes.func.isRequired,saving:React.PropTypes.bool.isRequired},makeLinkState:function(e){var t;return t=this.props.editedAccount.get(e),m(this,"__cacheLS",t,function(n){return function(){return{value:t,requestChange:function(t){var o;return o={},o[e]=t,n.props.requestChange(o)}}}}(this))},render:function(){return i({className:"form-horizontal form-account account-signature-form"},s({text:t("account signature")},r({type:"textarea",name:"signature",valueLink:this.makeLinkState("signature"),errors:this.props.errors})),s({text:t("account actions")},l(null,c({className:"signature-save",spinner:this.props.saving,icon:"save",onClick:this.props.onSubmit,text:t("account signature save")}))))}})}),require.register("components/account_picker",function(e,t,n){var o,a,r,s,i,c,l,u,p,d;d=React.DOM,s=d.div,p=d.ul,c=d.li,l=d.p,u=d.span,a=d.a,r=d.button,i=d.input,o=t("../mixins/router_mixin"),n.exports=React.createClass({displayName:"AccountPicker",shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},render:function(){var e;return e=this.props.accounts,1===Object.keys(e).length?this.renderNoChoice():this.renderPicker()},onChange:function(e){var t;return t=e.target.dataset.value,this.props.valueLink.requestChange(t)},renderLabel:function(e){var t;return"string"==typeof e?e:(t=e.get("name")||e.get("label"),""+t+" <"+e.get("login")+">")},renderNoChoice:function(){var e;return e=this.props.accounts.get(this.props.valueLink.value),l({className:"form-control-static align-item"},this.renderLabel(e))},renderPicker:function(){var e;return e=this.props.accounts.get(this.props.valueLink.value),s({className:"account-picker align-item"},u({className:"compose-from dropdown-toggle","data-toggle":"dropdown"},u({ref:"account","data-value":this.props.valueLink.value},this.renderLabel(e)),u({className:"caret"})),p({className:"dropdown-menu",role:"menu"},this.props.accounts.filter(function(e){return function(t,n){return n!==e.props.valueLink.value}}(this)).map(function(e){return function(t,n){return e.renderAccount(n,t)}}(this)).toJS()))},renderAccount:function(e,t){return c({role:"presentation",key:e},a({role:"menuitem",onClick:this.onChange,"data-value":e},this.renderLabel(t)))}})}),require.register("components/alert",function(e,n,o){var a,r,s,i,c,l,u;u=React.DOM,i=u.div,s=u.button,c=u.span,l=u.strong,a=n("../constants/app_constants").AlertLevel,r=n("../actions/layout_action_creator"),o.exports=React.createClass({displayName:"Alert",render:function(){var e,n;return e=this.props.alert,null!=e.level&&(n={},n[a.SUCCESS]="alert-success",n[a.INFO]="alert-info",n[a.WARNING]="alert-warning",n[a.ERROR]="alert-danger"),i({className:"row row-alert"},null!=e.level?i({ref:"alert",className:"alert "+n[e.level]+" alert-dismissible",role:"alert"},s({type:"button",className:"close",onClick:this.hide},c({"aria-hidden":"true"},"×"),c({className:"sr-only"},t("app alert close"))),l(null,e.message)):void 0)},hide:function(){return r.alertHide()},autohide:function(){},componentDidMount:function(){return this.autohide()},componentDidUpdate:function(){return this.autohide()}})}),require.register("components/application",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,_,M,C,T,A,D,P,N,R;R=React.DOM,E=R.div,D=R.section,T=R.main,A=R.p,P=R.span,w=R.a,M=R.i,N=R.strong,_=R.form,C=R.input,x=R.button,r=n("./alert"),l=n("./menu"),m=n("./modal"),f=n("./panel"),b=n("./toast_container"),S=n("./tooltips-manager"),h=n("../mixins/router_mixin"),v=n("../mixins/store_watch_mixin"),k=n("../mixins/tooltip_refresher_mixin"),a=n("../stores/account_store"),d=n("../stores/message_store"),c=n("../stores/layout_store"),g=n("../stores/search_store"),y=[a,d,c,g],i=n("../actions/layout_action_creator"),u=n("../actions/message_action_creator"),p=n("../constants/app_constants").MessageFilter,o.exports=s=React.createClass({displayName:"Application",mixins:[v(y),h,k],render:function(){var e,n,o,a,r,s,i;return a=this.props.router.current,null==a?E(null,t("app loading")):(e=c.getDisposition(),o=c.getListModeCompact(),n=c.isPreviewFullscreen(),i=c.getPreviewSize(),s=this.state.modal,r=["layout","layout-"+e,o?"layout-compact":void 0,n?"layout-preview-fullscreen":void 0,"layout-preview-"+i].join(" "),E({className:r},E({className:"app"},l({ref:"menu",layout:this.props.router.current}),T({className:null!=a.secondPanel?null:"full"},E({className:"panels"},this.getPanel(a.firstPanel,"firstPanel"),null!=a.secondPanel?this.getPanel(a.secondPanel,"secondPanel"):D({key:"placeholder","aria-expanded":!1})))),null!=s?m(s):void 0,b(),S({key:"tooltips"})))},getPanel:function(e,t){return f({ref:t,action:e.action,accountID:e.parameters.accountID,mailboxID:e.parameters.mailboxID,messageID:e.parameters.messageID,tab:e.parameters.tab,useIntents:this.state.useIntents,selectedMailboxID:this.state.selectedMailboxID})},getStateFromStores:function(){var e,t,n,o;return t=a.getSelectedOrDefault(),e=null!=(o=this.props.router.current)?o.firstPanel:void 0,n="account.mailbox.messages"===(null!=e?e.action:void 0)?e.parameters.mailboxID:null,{selectedAccount:t,currentSearch:g.getCurrentSearch(),modal:c.getModal(),useIntents:c.intentAvailable(),selectedMailboxID:n}},componentWillMount:function(){return this.onRoute=function(e){return function(t){var n,o,a,r;return n=t.firstPanel,r=t.secondPanel,null!=n&&e.checkAccount(n.action),null!=r&&e.checkAccount(r.action),null!=r&&null!=r.parameters.messageID?(o=null!=r.parameters.conversationID,a=r.parameters.messageID,u.setCurrent(a,o)):"compose"!==n&&u.setCurrent(null),e.forceUpdate()}}(this),this.props.router.on("fluxRoute",this.onRoute)},checkAccount:function(e){var n,o,a;return n=this.state.selectedAccount,a=null==(null!=n?n.get("draftMailbox"):void 0)||null==(null!=n?n.get("sentMailbox"):void 0)||null==(null!=n?n.get("trashMailbox"):void 0),o="account.mailbox.messages"===e||"message"===e||"conversation"===e||"compose"===e||"edit"===e,null!=n&&a&&o?(this.redirect({direction:"first",action:"account.config",parameters:[n.get("id"),"mailboxes"],fullWidth:!0}),i.alertError(t("account no special mailboxes"))):void 0},componentWillUnmount:function(){return this.props.router.off("fluxRoute",this.onRoute)}})}),require.register("components/attachement_preview",function(e,n,o){var a,r,s,i,c,l,u;u=React.DOM,l=u.li,c=u.img,s=u.a,i=u.i,a=n("../utils/message_utils"),r=n("../constants/app_constants").Tooltips,o.exports=React.createClass({displayName:"AttachmentPreview",icons:{archive:"fa-file-archive-o",audio:"fa-file-audio-o",code:"fa-file-code-o",image:"fa-file-image-o",pdf:"fa-file-pdf-o",word:"fa-file-word-o",presentation:"fa-file-powerpoint-o",spreadsheet:"fa-file-excel-o",text:"fa-file-text-o",video:"fa-file-video-o",word:"fa-file-word-o"},render:function(){return this.props.previewLink?l({key:this.props.key},s({className:"file-details",target:"_blank",href:this.props.file.url,"aria-describedby":r.OPEN_ATTACHMENT,"data-tooltip-direction":"top"},this.props.preview?c({height:48,src:this.props.file.url}):void 0,this.renderIcon(),this.props.file.generatedFileName,this.displayFilesize(this.props.file.length)),s({className:"file-actions",href:""+this.props.file.url+"?download=1","aria-describedby":r.DOWNLOAD_ATTACHMENT,"data-tooltip-direction":"top"},i({className:"fa fa-download"}))):l({key:this.props.key},this.renderIcon(),s({href:""+this.props.file.url+"?download=1","aria-describedby":r.DOWNLOAD_ATTACHMENT,"data-tooltip-direction":"left"},""+this.props.file.generatedFileName+"\n("+this.displayFilesize(this.props.file.length)+")"))},renderIcon:function(){var e;return e=a.getAttachmentType(this.props.file.contentType),i({className:"mime "+e+" fa "+(this.icons[e]||"fa-file-o")})},displayFilesize:function(e){return 1024>e?""+e+" "+t("length bytes"):1048576>e?""+(0|e/1024)+" "+t("length kbytes"):""+(0|e/1048576)+" "+t("length mbytes")}})}),require.register("components/basic_components",function(e,t,n){var o,a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,_,M,C,T,A,D,P,N,R,I,O,L,j,F;F=React.DOM,_=F.div,O=F.section,T=F.h3,A=F.h4,j=F.ul,I=F.li,w=F.a,D=F.i,x=F.button,L=F.span,M=F.fieldset,R=F.legend,N=F.label,P=F.img,C=F.form,E=React.addons.classSet,v=t("../libs/prop_types"),a=React.createClass({render:function(){return O({id:this.props.id,key:this.props.key,className:"panel"},this.props.children)}}),S=React.createClass({render:function(){return T({refs:this.props.ref,className:"title"},this.props.text)}}),b=React.createClass({render:function(){return A({className:"subtitle "+this.props.className},this.props.children)}}),k=React.createClass({render:function(){var e,t,n;return j({className:"nav nav-tabs",role:"tablist"},function(){var o,a,r;o=this.props.tabs,r=[];for(e in o)t=o[e],n=(null!=(a=t["class"])?a.indexOf("active"):void 0)>=0?null:t.url,r.push(I({key:"tab-li-"+e,className:t["class"]},w({href:n,key:"tab-"+e},t.text)));return r}.call(this))}}),i=React.createClass({render:function(){return _({className:"col-sm-5 col-sm-offset-2 control-label"},this.props.text)}}),l=React.createClass({render:function(){return C({id:this.props.id,className:this.props.className,method:"POST"},this.props.children)}}),c=React.createClass({render:function(){return M(null,R(null,this.props.text),this.props.children)}}),u=React.createClass({render:function(){var e;return e="btn ",e+=this.props.contrast?"btn-cozy-contrast ":this.props["default"]?"btn-cozy-default ":"btn-cozy ",this.props.danger&&(e+="btn-danger "),null!=this.props.className&&(e+=this.props.className),x({className:e,onClick:this.props.onClick},this.props.spinner?L(null,y({white:!0})):L({className:"fa fa-"+this.props.icon}),L(null,this.props.text))}}),p=React.createClass({render:function(){return _({className:"col-sm-offset-4"},this.props.children)}}),h=React.createClass({onClick:function(){return this.props.onClick(this.props.onClickValue)},render:function(){var e,t;return t={role:"presentation"},this.props.key&&(t.key=this.props.key),this.props.liClassName&&(t.className=this.props.liClassName),e={role:"menuitemu",onClick:this.onClick},this.props.className&&(e.className=this.props.className),this.props.href&&(e.href=this.props.href),this.props.target&&(e.target=this.props.href),I(t,w(e,this.props.children))}}),f=React.createClass({render:function(){var e;return e={role:"presentation",className:"dropdown-header"},this.props.key&&(e.key=this.props.key),I(e,this.props.children)}}),m=React.createClass({render:function(){var e;return e={role:"presentation",className:"divider"},this.props.key&&(e.key=this.props.key),I(e)}}),r=React.createClass({getDefaultProps:function(){return{className:"",btnClassName:"",allowUndefined:!1}},propTypes:{valueLink:v.valueLink(v.string).isRequired,allowUndefined:React.PropTypes.bool.isRequired,options:React.PropTypes.object.isRequired,className:React.PropTypes.string,id:React.PropTypes.string,btnClassName:React.PropTypes.string,defaultLabel:React.PropTypes.string,undefinedValue:React.PropTypes.string},render:function(){var e,t,n,o,a,r;return r=this.props.valueLink||{value:this.props.value,requestChange:this.props.onChange},t="dropdown "+this.props.className,e="dropdown-toggle "+this.props.btnClassName,o=this.props.options[r.value],_({className:t,id:this.props.id},x({className:e,"data-toggle":"dropdown"},o||this.props.defaultLabel,L({className:"caret"},"")),j({className:"dropdown-menu",role:"menu"},this.props.allowUndefined&&null!=o?s({key:null,value:this.props.undefinedValue,requestChange:r.requestChange}):void 0,function(){var e,t;e=this.props.options,t=[];for(n in e)a=e[n],n!==r.value?t.push(s({key:n,value:a,requestChange:r.requestChange})):t.push(void 0);return t}.call(this)))}}),s=React.createClass({onClick:function(){return this.props.requestChange(this.props.key)},render:function(){return I({role:"presentation",key:this.props.key,onClick:this.onClick},w({role:"menuitem"},this.props.value))}}),o=React.createClass({render:function(){var e,t,n,o,a;return t=0,(null!=(o=this.props.contact.name)?o.length:void 0)>0&&this.props.contact.address?(e=this.props.contact.address.replace(/\W/g,""),n=L(null,L({className:"highlight"},this.props.contact.name),L({className:"contact-address",key:e},D({className:"fa fa-angle-left"}),this.props.contact.address,D({className:"fa fa-angle-right"})))):n=(null!=(a=this.props.contact.name)?a.length:void 0)>0?L({key:"label-"+t++},this.props.contact.name):L(null,this.props.contact.address),n}}),y=React.createClass({displayName:"Spinner",protoTypes:{white:React.PropTypes.bool},render:function(){var e;return e=this.props.white?"-white":"",P({src:"images/spinner"+e+".svg",alt:"spinner",className:"button-spinner"})}}),g=React.createClass({displayName:"Progress",propTypes:{value:React.PropTypes.number.isRequired,max:React.PropTypes.number.isRequired},render:function(){return _({className:"progress"},_({className:E({"progress-bar":!0,actived:this.props.value>0}),style:{width:0},role:"progressbar","aria-valuenow":this.props.value,"aria-valuemin":"0","aria-valuemax":this.props.max}))}}),d=React.createClass({displayName:"Icon",propTypes:{type:React.PropTypes.string.isRequired},render:function(){var e;return e=""+(this.props.className||"")+" fa fa-"+this.props.type,D({className:e,onClick:this.props.onClick})}}),n.exports={AddressLabel:o,Container:a,Dropdown:r,ErrorLine:i,Form:l,FieldSet:c,FormButton:u,FormButtons:p,Icon:d,MenuItem:h,MenuHeader:f,MenuDivider:m,Progress:g,Spinner:y,SubTitle:b,Title:S,Tabs:k}}),require.register("components/compose",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,M,C,T,A,D,P,N,R,I;N=React.DOM,k=N.div,T=N.section,w=N.h3,y=N.a,x=N.i,D=N.textarea,S=N.form,M=N.label,R=React.DOM,A=R.span,P=R.ul,C=R.li,E=R.input,b=React.addons.classSet,c=n("./compose_editor"),l=n("./compose_toolbox"),u=n("./file_picker"),d=n("./mails_input"),a=n("./account_picker"),r=n("../stores/account_store"),f=n("../stores/message_store"),I=n("../constants/app_constants"),i=I.ComposeActions,v=I.Tooltips,h=n("../utils/message_utils"),p=n("../actions/layout_action_creator"),m=n("../actions/message_action_creator"),g=n("../mixins/router_mixin"),o.exports=s=React.createClass({displayName:"Compose",mixins:[g,React.addons.LinkedStateMixin],propTypes:{selectedAccountID:React.PropTypes.string.isRequired,selectedAccountLogin:React.PropTypes.string.isRequired,layout:React.PropTypes.string,accounts:React.PropTypes.object.isRequired,message:React.PropTypes.object,action:React.PropTypes.string,callback:React.PropTypes.func,onCancel:React.PropTypes.func,settings:React.PropTypes.object.isRequired,useIntents:React.PropTypes.bool.isRequired},getDefaultProps:function(){return{layout:"full"}},shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},render:function(){var e,n,o,r,s,i,p;if(this.props.accounts)return s=this.buildClosePanelUrl(this.props.layout),r="compose-label",o="compose-input",n=this.state.ccShown?" shown ":"",e=this.state.bccShown?" shown ":"",i=Array.isArray(this.state.to)&&this.state.to.length>0&&""!==this.state.subject,T({className:b({compose:!0,panel:"full"===this.props.layout}),"aria-expanded":!0},S({className:"form-compose",method:"POST"},k({className:"form-group account"},M({htmlFor:"compose-from",className:r},t("compose from")),a({accounts:this.props.accounts,valueLink:this.linkState("accountID")})),k({className:"clearfix"},null),k({className:o},k({className:"btn-toolbar compose-toggle",role:"toolbar"},k(null),y({className:"compose-toggle-cc",onClick:this.onToggleCc},t("compose toggle cc")),y({className:"compose-toggle-bcc",onClick:this.onToggleBcc},t("compose toggle bcc")))),d({id:"compose-to",valueLink:this.linkState("to"),label:t("compose to"),ref:"to"}),d({id:"compose-cc",className:"compose-cc"+n,valueLink:this.linkState("cc"),label:t("compose cc"),placeholder:t("compose cc help"),ref:"cc"}),d({id:"compose-bcc",className:"compose-bcc"+e,valueLink:this.linkState("bcc"),label:t("compose bcc"),placeholder:t("compose bcc help"),ref:"bcc"}),k({className:"form-group"},k({className:o},E({id:"compose-subject",name:"compose-subject",ref:"subject",valueLink:this.linkState("subject"),type:"text",className:"form-control compose-subject",placeholder:t("compose subject help")}))),k({className:"compose-content"},c({id:"compose-editor",messageID:null!=(p=this.props.message)?p.get("id"):void 0,html:this.linkState("html"),text:this.linkState("text"),accounts:this.props.accounts,accountID:this.state.accountID,settings:this.props.settings,onSend:this.onSend,composeInHTML:this.state.composeInHTML,focus:i,ref:"editor",getPicker:this.getPicker,useIntents:this.props.useIntents})),k({className:"attachements"},u({className:"",editable:!0,valueLink:this.linkState("attachments"),ref:"attachments"})),l({saving:this.state.saving,sending:this.state.sending,onSend:this.onSend,onDelete:this.onDelete,onDraft:this.onDraft,onCancel:this.onCancel,canDelete:null!=this.props.message}),k({className:"clearfix"},null)))},finalRedirect:function(){return null!=this.props.inReplyTo?this.redirect(f.getMessageHash(this.props.inReplyTo)):this.redirect(this.buildUrl({direction:"first",action:"default",fullWidth:!0}))},onCancel:function(e){return e.preventDefault(),null!=this.props.onCancel?this.props.onCancel():this.finalRedirect()},_initCompose:function(){var e;return this._saveInterval&&window.clearInterval(this._saveInterval),this._saveInterval=window.setInterval(this._autosave,3e4),this._autosave(),this.getDOMNode().scrollIntoView(),Array.isArray(this.state.to)&&0!==this.state.to.length?null!=this.props.inReplyTo&&null!=(e=document.getElementById("compose-editor"))?e.focus():void 0:setTimeout(function(){var e;return null!=(e=document.getElementById("compose-to"))?e.focus():void 0},10)},componentDidMount:function(){return this._initCompose()},componentDidUpdate:function(){switch(this.state.focus){case"cc":return setTimeout(function(){return document.getElementById("compose-cc").focus()},0),this.setState({focus:""});case"bcc":return setTimeout(function(){return document.getElementById("compose-bcc").focus()},0),this.setState({focus:""})}},componentWillUnmount:function(){var e,n,o,a,r,s;return this._saveInterval&&window.clearInterval(this._saveInterval),e=function(e){return function(){return window.setTimeout(function(){var t;return p.hideModal(),t=e.state.id,m["delete"]({messageID:t,silent:r,isDraft:!0,inReplyTo:e.props.inReplyTo})},5)}}(this),n=function(e){return function(){var n;return null!=e.state.originalConversationID?(n={id:e.state.id,accountID:e.state.accountID,mailboxIDs:e.state.mailboxIDs,from:e.state.from,to:e.state.to,cc:e.state.cc,bcc:e.state.bcc,subject:e.state.subject,isDraft:!0,attachments:e.state.attachments,inReplyTo:e.state.inReplyTo,references:e.state.references,text:e.state.text,html:e.state.html,conversationID:e.state.originalConversationID},m.send(n,function(e,n){var o,a;return null!=e||null==n?(a=""+t("message action draft ko")+" "+e,p.alertError(a)):(a=""+t("message action draft ok"),p.notify(a,{autoclose:!0}),null!=n.conversationID?(o=n.conversationID,m.fetchConversation(o)):void 0)})):void 0}}(this),!this.state.isDeleted&&this.state.isDraft&&null!=this.state.id?(this.state.composeInHTML?(o=h.cleanReplyText(this.state.html).replace(/\s/gim,""),a=h.cleanReplyText(this.state.initHtml).replace(/\s/gim,""),s=o!==a):s=this.state.text!==this.state.initText,r=this.state.isNew&&!s,r?e():setTimeout(function(){var o;return o={title:t("app confirm delete"),subtitle:t("compose confirm keep draft"),closeModal:function(){return n(),p.hideModal()},closeLabel:t("compose confirm draft keep"),actionLabel:t("compose confirm draft delete"),action:e},p.displayModal(o)},0)):void 0},getInitialState:function(){var e,t,n,o,a,r;if(n=this.props.message){o={composeInHTML:this.props.settings.get("composeInHTML"),isNew:!1},null==n.get("html")&&n.get("text")&&(o.conposeInHTML=!1),r=n.toJS();for(t in r)a=r[t],o[t]=a;o.attachments=n.get("attachments")}else e=this.props.accounts.get(this.props.selectedAccountID),o=h.makeReplyMessage(e.get("login"),this.props.inReplyTo,this.props.action,this.props.settings.get("composeInHTML"),e.get("signature")),o.isNew=!0,null==o.accountID&&(o.accountID=this.props.selectedAccountID),o.originalConversationID=o.conversationID;return o.isDraft=!0,o.sending=!1,o.saving=!1,o.ccShown=Array.isArray(o.cc)&&o.cc.length>0,o.bccShown=Array.isArray(o.bcc)&&o.bcc.length>0,o.initHtml=o.html,o.initText=o.text,o},componentWillReceiveProps:function(e){return e.message!==this.props.message?(this.props.message=e.message,this.setState(this.getInitialState())):void 0},onDraft:function(e){return e.preventDefault(),this._doSend(!0)},onSend:function(e){return null!=e&&e.preventDefault(),this._doSend(!1)},_doSend:function(e){var n,o,a,r;return n=this.props.accounts.get(this.state.accountID),o={name:n.get("name")||void 0,address:n.get("login")},a={id:this.state.id,accountID:this.state.accountID,mailboxIDs:this.state.mailboxIDs,from:[o],to:this.state.to,cc:this.state.cc,bcc:this.state.bcc,subject:this.state.subject,isDraft:e,attachments:this.state.attachments,inReplyTo:this.state.inReplyTo,references:this.state.references},e||(a.conversationID=this.state.originalConversationID),r=!0,e||(0===this.state.to.length&&0===this.state.cc.length&&0===this.state.bcc.length?(r=!1,p.alertError(t("compose error no dest")),setTimeout(function(){return document.getElementById("compose-to").focus()},0)):""===this.state.subject&&(r=!1,p.alertError(t("compose error no subject")),setTimeout(function(e){return function(){return e.refs.subject.getDOMNode().focus()}}(this),0))),r?(this.state.composeInHTML?(a.html=this._cleanHTML(this.state.html),a.text=h.cleanReplyText(a.html),a.html=h.wrapReplyHtml(a.html)):a.text=this.state.text.trim(),!e&&this._saveInterval&&window.clearInterval(this._saveInterval),e?this.setState({saving:!0}):this.setState({sending:!0,isDraft:!1}),m.send(a,function(n){return function(o,a){var r,s,i,c,l,u,d,f,h;null==o&&null==n.state.id&&null!=a&&m.setCurrent(a.id),l=_.clone(n.state),e?l.saving=!1:(l.isDraft=!1,l.sending=!1);for(s in a)u=a[s],"attachments"!==s&&"html"!==s&&"text"!==s&&(l[s]=u);for(h=Object.keys(n.state),d=0,f=h.length;f>d;d++)s=h[d],"saving"!==s&&(l[s]=n.state[s]);return n.isMounted()&&n.setState(l),e?i=t("message action draft ko"):(i=t("message action sent ko"),c=t("message action sent ok")),null!=o||null==a?p.alertError(""+i+" "+o):(e||p.notify(c,{autoclose:!0}),null==n.state.id&&m.setCurrent(a.id),e?void 0:(null!=a.conversationID&&(r=a.conversationID,m.fetchConversation(r)),n.finalRedirect()))}}(this))):void 0},_autosave:function(){return this.props.settings.get("autosaveDraft")?this._doSend(!0):void 0},_cleanHTML:function(e){var t,n,o,a,r,s,i;if(r=new DOMParser,t=r.parseFromString(e,"text/html"),t||(t=document.implementation.createHTMLDocument(""),t.documentElement.innerHTML=e),t){for(o=function(e){return e.setAttribute("src","cid:"+e.dataset.src)},a=t.querySelectorAll("IMG[data-src]"),s=0,i=a.length;i>s;s++)n=a[s],o(n);return t.documentElement.innerHTML}return console.error("Unable to parse HTML content of message"),e},onDelete:function(e){var n,o,a,r,s;return e.preventDefault(),s=this.props.message.get("subject"),null!=s&&""!==s?(r={subject:this.props.message.get("subject")},n=t("mail confirm delete",r)):n=t("mail confirm delete nosubject"),o=function(e){return function(){var t;return p.hideModal(),t=e.props.message.get("id"),e.setState({isDeleted:!0},function(){return m["delete"]({messageID:t},function(t){var n;return null==t?e.props.callback?e.props.callback():(n=[e.props.selectedAccountID,e.props.selectedMailboxID],e.redirect({direction:"first",action:"account.mailbox.messages",parameters:n,fullWidth:!0})):void 0})})}}(this),a={title:t("mail confirm delete title"),subtitle:n,closeLabel:t("mail confirm delete cancel"),actionLabel:t("mail confirm delete delete"),action:o},p.displayModal(a)},onToggleCc:function(e){var t,n,o,a,r;for(n=function(e){return e.classList.toggle("shown")},r=this.getDOMNode().querySelectorAll(".compose-cc"),o=0,a=r.length;a>o;o++)e=r[o],n(e);return t=this.state.ccShown?"":"cc",this.setState({ccShown:!this.state.ccShown,focus:t})},onToggleBcc:function(e){var t,n,o,a,r;for(n=function(e){return e.classList.toggle("shown")},r=this.getDOMNode().querySelectorAll(".compose-bcc"),o=0,a=r.length;a>o;o++)e=r[o],n(e);return t=this.state.bccShown?"":"bcc",this.setState({bccShown:!this.state.bccShown,focus:t})},getPicker:function(){return this.refs.attachments}})}),require.register("components/compose_editor",function(e,t,n){var o,a,r,s,i,c;c=React.DOM,s=c.div,r=c.button,i=c.textarea,a=t("../utils/file_utils"),n.exports=o=React.createClass({displayName:"ComposeEditor",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){return{html:this.props.html,text:this.props.text,target:!1}},componentWillReceiveProps:function(e){return e.messageID!==this.props.messageID?this.setState({html:e.html,text:e.text}):void 0},shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},onHTMLChange:function(e){return this.props.html.requestChange(this.refs.html.getDOMNode().innerHTML)},onTextChange:function(e){
return this.props.text.requestChange(this.refs.content.getDOMNode().value)},render:function(){var e,t;return e=this.props.settings.get("composeOnTop")?"folded":"",t=this.state.target?"target":"",s(null,this.props.useIntents?s({className:"btn-group editor-actions"},r({className:"btn btn-default",onClick:this.choosePhoto},span({className:"fa fa-image","aria-describedby":Tooltips.COMPOSE_IMAGE,"data-tooltip-direction":"top"}))):void 0,this.props.composeInHTML?s({className:"form-control rt-editor "+e+" "+t,ref:"html",contentEditable:!0,onKeyDown:this.onKeyDown,onInput:this.onHTMLChange,onDragOver:this.allowDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.handleFiles,onBlur:this.onHTMLChange,dangerouslySetInnerHTML:{__html:this.state.html.value}}):i({className:"editor "+t,ref:"content",onKeyDown:this.onKeyDown,onChange:this.onTextChange,onBlur:this.onTextChange,defaultValue:this.state.text.value,onDragOver:this.allowDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.handleFiles}))},_initCompose:function(){var e,t,n,o,a,r;if(this.props.composeInHTML){if(this.setCursorPosition(),t=document.queryCommandEnabled("insertBrOnReturn"),jQuery(".rt-editor").on("keypress",function(e){var n;if(13===e.keyCode)return n=function(){var e,n,o,a,r,s,i,c,l;for(a=function(e){var t;if(t=document.documentElement.matches||document.documentElement.matchesSelector||document.documentElement.webkitMatchesSelector||document.documentElement.mozMatchesSelector||document.documentElement.oMatchesSelector||document.documentElement.msMatchesSelector,null!=t)return t.call(e,".rt-editor blockquote, .rt-editor blockquote *");for(;null!=e&&"BLOCKQUOTE"!==e.tagName;)e=e.parentNode;return"BLOCKQUOTE"===e.tagName},c=document.getSelection().anchorNode,null!=c.lastChild&&(c=c.lastChild,null!=c.previousElementSibling&&(c=c.previousElementSibling)),l=c;l&&!(l instanceof Element);)l=l.parentNode;if(null!=c&&a(l)){for(e=t?"\r\n<br>\r\n<br class='cozyInsertedBr'>\r\n":"\r\n<div></div><div><br class='cozyInsertedBr'></div>\r\n",document.execCommand("insertHTML",!1,e),r=document.querySelector(".cozyInsertedBr"),t&&(r=r.previousElementSibling),o=function(e){var t;for(t=e.tagName;null!=e.parentNode&&"true"!==e.contentEditable;)e=e.parentNode,t=""+e.tagName+" > "+t;return t},i=window.getSelection(),s=document.createRange(),s.selectNode(r),i.removeAllRanges(),i.addRange(s),n=o(r).split(">").length;n>0;)document.execCommand("outdent",!1,null),n--;r=document.querySelector(".cozyInsertedBr"),null!=r&&r.parentNode.removeChild(r),document.execCommand("removeFormat",!1,null)}},setTimeout(n,50)}),!document.querySelector(".rt-editor blockquote")||document.querySelector(".rt-editor .originalToggle"))return jQuery(".rt-editor .originalToggle").on("click",function(){return jQuery(".rt-editor").toggleClass("folded")});try{return n=jQuery(".rt-editor blockquote").eq(0).prev(),n.text(n.text().replace("…","")),n.append('<span class="originalToggle">…</>'),n.on("click",function(){return jQuery(".rt-editor").toggleClass("folded")})}catch(s){return e=s,console.error(e)}}else if(this.props.focus)return o=this.refs.content.getDOMNode(),this.props.settings.get("composeOnTop")||(r=o.getBoundingClientRect(),o.scrollTop=o.scrollHeight-r.height,"number"==typeof o.selectionStart?(o.selectionStart=o.value.length,o.selectionEnd=o.value.length):"undefined"!=typeof o.createTextRange&&(setTimeout(function(){return o.focus()},0),a=o.createTextRange(),a.collapse(!1),a.select())),setTimeout(function(){return o.focus()},0)},setCursorPosition:function(){var e,t,n,o,a,r;return this.props.focus&&(t=null!=(r=this.refs.html)?r.getDOMNode():void 0,null!=t&&(document.querySelector(".rt-editor").focus(),!this.props.settings.get("composeOnTop")&&(e=this.props.accounts[this.props.accountID],a=document.getElementById("signature"),null!=e.signature&&e.signature.length>0&&null!=a?(t=a,t.innerHTML="<p><br /></p>\n"+t.innerHTML,t=t.firstChild):(t.innerHTML+="<p><br /></p><p><br /></p>",t=t.lastChild),null!=t)))?(t.scrollIntoView(!1),t.innerHTML="<br >",o=window.getSelection(),n=document.createRange(),n.selectNodeContents(t),o.removeAllRanges(),o.addRange(n),document.execCommand("delete",!1,null),t.focus()):void 0},componentDidMount:function(){return this._initCompose()},componentDidUpdate:function(e,t){return e.messageID!==this.props.messageID&&this._initCompose(),e.accountID!==this.props.accountID?this._updateSignature():void 0},_updateSignature:function(){var e,t,n,o,a;return n=this.props.accounts[this.props.accountID].signature,null!=this.refs.html?(a=document.getElementById("signature"),null!=n&&n.length>0?(o=n.replace(/\n/g,"<br>"),null!=a?a.innerHTML="-- \n<br>"+o+"</p>":this.refs.html.getDOMNode().innerHTML+='<p><br></p><p id="signature">-- \n<br>'+o+"</p>"):null!=a&&a.parentNode.removeChild(a),this.onHTMLChange()):null!=this.refs.content?(e=this.refs.content.getDOMNode(),t=this.props.accounts[oldProps.accountID].signature,null!=n&&n.length>0?t&&t.length>0?e.textContent=e.textContent.replace(t,n):e.textContent+="\n\n-- \n"+n:t&&t.length>0&&(t="-- \n"+n,e.textContent=e.textContent.replace(t,"")),this.onTextChange()):void 0},onKeyDown:function(e){return e.ctrlKey&&"Enter"===e.key?this.props.onSend():void 0},allowDrop:function(e){return e.preventDefault()},onDragEnter:function(e){return this.state.target?void 0:this.setState({target:!0})},onDragLeave:function(e){return this.state.target?this.setState({target:!1}):void 0},handleFiles:function(e){var t,n,o,r,s,i,c;if(e.preventDefault(),n=e.target.files||e.dataTransfer.files,this.props.getPicker().addFiles(n),this.props.composeInHTML)for(i=0,c=n.length;c>i;i++)t=n[i],"image"===t.type.split("/")[0]&&(o="editor-img-"+new Date,r="<img data-src='"+t.name+"' id='"+o+"'>",document.activeElement.classList.contains("rt-editor")?document.execCommand("insertHTML",!1,r):(s=document.getElementById("signature"),null!=s?s.previousElementSibling.innerHTML+=r:document.querySelector(".rt-editor").innerHTML+=r),a.fileToDataURI(t,function(e){return function(t){return r=document.getElementById(o),r?(r.removeAttribute("id"),r.src=t,e.onHTMLChange()):void 0}}(this)));return this.setState({target:!1})},choosePhoto:function(e){var t,n;return e.preventDefault(),t={type:"pickObject",params:{objectType:"singlePhoto",isCropped:!1}},n=3e4,window.intentManager.send("nameSpace",t,n).then(this.choosePhoto_answer,function(e){return console.error("response in error : ",e)})},choosePhoto_answer:function(e){var t,n,o,r,s,i,c;return t=e.data,t.newPhotoChosen&&(o=a.dataURItoBlob(t.dataUrl),n=new Blob([o.blob,{type:o.mime}]),n.name=t.name,i=this.props.getPicker(),i.addFiles([n]),this.props.composeInHTML)?(document.activeElement.classList.contains("rt-editor")?document.execCommand("insertHTML",!1,'<img src="'+t.dataUrl+'" data-src="'+t.name+'">'):(s=document.createElement("img"),s.src=t.dataUrl,s.dataset.src=t.name,c=document.getElementById("signature"),null!=c?c.parentNode.insertBefore(s,c):(r=document.querySelector(".rt-editor"),null!=r&&r.appendChild(s))),this.onHTMLChange()):void 0}})}),require.register("components/compose_toolbox",function(e,n,o){var a,r,s,i,c,l;l=React.DOM,i=l.div,s=l.button,c=l.span,r=n("./basic_components").Spinner,o.exports=a=React.createClass({displayName:"ComposeToolbox",render:function(){var e;return e=this.props.sending?t("compose action sending"):t("compose action send"),i({className:"composeToolbox"},i({className:"btn-toolbar",role:"toolbar"},i({className:""},s({className:"btn btn-cozy btn-send",type:"button",disable:this.props.sending?!0:null,onClick:this.props.onSend},this.props.sending?c(null,r({white:!0})):c({className:"fa fa-send"}),c(null,e)),s({className:"btn btn-cozy btn-save",disable:this.props.saving?!0:null,type:"button",onClick:this.props.onDraft},this.props.saving?c(null,r({white:!0})):c({className:"fa fa-save"}),c(null,t("compose action draft"))),this.props.canDelete?s({className:"btn btn-cozy-non-default btn-delete",type:"button",onClick:this.props.onDelete},c({className:"fa fa-trash-o"}),c(null,t("compose action delete"))):void 0,s({onClick:this.props.onCancel,className:"btn btn-cozy-non-default btn-cancel"},t("app cancel")))))}})}),require.register("components/contact_label",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S;S=React.DOM,y=S.section,f=S.header,k=S.ul,g=S.li,b=S.span,h=S.i,v=S.p,m=S.h3,p=S.a,d=S.button,u=n("../constants/app_constants").Tooltips,l=n("../utils/message_utils"),i=n("../stores/contact_store"),r=n("../actions/contact_action_creator"),c=n("../actions/layout_action_creator"),a=n("./basic_components").AddressLabel,o.exports=s=React.createClass({shouldComponentUpdate:function(e,t){var n;return n=!_.isEqual(e,this.props)},render:function(){var e,t;return null!=this.props.contact?(t=i.getByAddress(this.props.contact.address),null!=t?(e=t.get("id"),b({ref:"contact",onClick:function(e){return e.stopPropagation()}},a({contact:this.props.contact}),p({className:"show-contact",target:"_blank",href:"/#apps/contacts/contact/"+e},d({className:"fa fa-user","aria-describedby":u.SHOW_CONTACT,"data-tooltip-direction":"top"})))):b({ref:"contact",className:"participant"},a({contact:this.props.contact}),b({className:"add-contact",onClick:function(e){return function(t){return t.stopPropagation(),e.addContact()}}(this)},d({className:"fa fa-user-plus","aria-describedby":u.ADD_CONTACT,"data-tooltip-direction":"top"})))):b()},componentDidMount:function(){},componentDidUpdate:function(){},addContact:function(){var e,n;return n={contact:l.displayAddress(this.props.contact)},e={title:t("message contact creation title"),subtitle:t("message contact creation",n),closeLabel:t("app cancel"),actionLabel:t("app confirm"),action:function(e){return function(){return r.createContact(e.props.contact,function(){return e.forceUpdate()}),c.hideModal()}}(this)},c.displayModal(e)}})}),require.register("components/conversation",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,M,C,T,A=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};T=React.DOM,x=T.section,b=T.header,M=T.ul,S=T.li,E=T.span,k=T.i,w=T.p,y=T.h3,h=T.a,g=T.button,i=n("./message"),f=n("./toolbar_conversation"),v=React.addons.classSet,c=n("../constants/app_constants").MessageFlags,u=n("../mixins/router_mixin"),m=n("../mixins/store_watch_mixin"),d=n("../mixins/should_update_mixin"),r=n("../actions/layout_action_creator"),p=n("../stores/settings_store"),a=n("../stores/account_store"),l=n("../stores/message_store"),s=n("../stores/layout_store"),C=1,o.exports=React.createClass({displayName:"Conversation",mixins:[u,m([p,a,l,s]),d.UnderscoreEqualitySlow],propTypes:{messageID:React.PropTypes.string},getStateFromStores:function(){var e,t,n,o,r,i,u,d,m,f,h,g,v,y,b,k;return r=l.getByID(this.props.messageID),f=null!=(g=a.getSelectedMailbox())?g.get("id"):void 0,m=a.getSelectedOrDefault(),null!=r&&(t=null!=r?r.get("conversationID"):void 0,h=null!=m?m.get("trashMailbox"):void 0,e=l.getConversation(t,h),d=l.getPreviousMessage(),i=l.getNextMessage(),o=l.getConversationsLength().get(t),null==f&&(f=Object.keys(r.get("mailboxIDs"))[0])),n=a.hasConversationEnabled(f),n&&(n=p.get("displayConversation")),u={accounts:a.getAll(),mailboxes:a.getAllMailboxes(),selectedAccount:a.getSelectedOrDefault(),selectedMailboxID:f,settings:p.get(),useIntents:s.intentAvailable(),conversationID:t,conversation:e,conversationLength:o,prevMessage:d,nextMessage:i,displayConversations:n},(null!=(v=this.state)?v.compact:void 0)!==!1&&(u.compact=!0),(null!=(y=u.conversation)?y.length:void 0)!==(null!=(b=this.state)&&null!=(k=b.conversation)?k.length:void 0)&&(u.expanded=[],null!=e&&e.forEach(function(t,n){var o,a,r;return r=c.SEEN,a=A.call(t.get("flags"),r)<0,o=n===e.length-1,0===u.expanded.length&&(a||o)?u.expanded.push(n):void 0}),u.compact=!0),u},renderToolbar:function(){var e,t,n,o;return f({nextMessageID:null!=(e=this.state.nextMessage)?e.get("id"):void 0,nextConversationID:null!=(t=this.state.nextMessage)?t.get("conversationID"):void 0,prevMessageID:null!=(n=this.state.prevMessage)?n.get("id"):void 0,prevConversationID:null!=(o=this.state.prevMessage)?o.get("conversationID"):void 0,settings:this.state.settings})},renderMessage:function(e,t){var n;return n=function(t){return function(){var n;return n=t.state.expanded.slice(0),A.call(n,e)>=0?n=n.filter(function(t){return e!==t}):n.push(e),t.setState({expanded:n})}}(this),i({ref:"message",accounts:this.state.accounts,active:t,inConversation:this.state.conversation.length>1,key:e.toString(),mailboxes:this.state.mailboxes,message:this.state.conversation.get(e),selectedAccountID:this.state.selectedAccount.get("id"),selectedAccountLogin:this.state.selectedAccount.get("login"),selectedMailboxID:this.state.selectedMailboxID,settings:this.state.settings,displayConversations:this.state.displayConversation,useIntents:this.state.useIntents,toggleActive:n})},renderGroup:function(e,n){var o,a,r;return e.length>3&&this.state.compact?(a=[],o=e[0],r=e[e.length-1],a.push(this.renderMessage(o,!1)),a.push(g({className:"more",onClick:function(e){return function(){return e.setState({compact:!1})}}(this)},k({className:"fa fa-refresh"}),t("load more messages",e.length-2))),a.push(this.renderMessage(r,!1))):a=function(){var t,o,a;for(a=[],t=0,o=e.length;o>t;t++)n=e[t],a.push(this.renderMessage(n,!1));return a}.call(this),a},render:function(){var e,n,o,a,s;return this.state.conversation?(a=this.state.conversation.get(0),s=[],o=this.state.conversation.length-1,this.state.conversation.forEach(function(e){return function(t,n){var o;return A.call(e.state.expanded,n)>=0?s.push(n):(o=s[s.length-1],_.isArray(o)||s.push(o=[]),o.push(n))}}(this)),x({ref:"conversation",className:"conversation panel","aria-expanded":!0},b(null,y({className:"conversation-title","data-message-id":a.get("id"),"data-conversation-id":a.get("conversationID")},a.get("subject")),this.renderToolbar(),h({className:"clickable btn btn-default fa fa-close",href:this.buildClosePanelUrl("second"),onClick:r.minimizePreview})),function(){var t,o,a;for(a=[],n=t=0,o=s.length;o>t;n=++t)e=s[n],_.isArray(e)?a.push(this.renderGroup(e,n)):a.push(this.renderMessage(e,!0));return a}.call(this))):x({key:"conversation",className:"conversation panel","aria-expanded":!0},w(null,t("app loading")))}})}),require.register("components/date_range_picker",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h;h=React.DOM,c=h.div,f=h.ul,p=h.li,m=h.span,l=h.i,s=h.button,u=h.input,r=n("../constants/app_constants").Tooltips,d="DD/MM/YYYY",i="%d/%m/%Y",o.exports=a=React.createClass({displayName:"DateRangePicker",propTypes:{active:React.PropTypes.bool,onDateFilter:React.PropTypes.func.isRequired},getInitialState:function(){return{isActive:this.props.active,label:t("daterangepicker placeholder"),startDate:"",endDate:""}},shouldComponentUpdate:function(e,t){var n;return n=!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},componentWillReceiveProps:function(e){return this.state.isActive&&!e.active?this.setState({isActive:!1,startDate:"",endDate:""}):e.active&&!this.props.active?this.setState({isActive:!0}):void 0},onStartChange:function(e){var t,n;return n=null!=e.target?e.target.value:""+e.dd+"/"+e.mm+"/"+e.yyyy,t=!!n&&!!this.state.endDate,this.setState({isActive:t,startDate:n},this.filterize)},onEndChange:function(e){var t,n;return n=e.target?e.target.value:""+e.dd+"/"+e.mm+"/"+e.yyyy,t=!!this.state.startDate&&!!n,this.setState({isActive:t,endDate:n},this.filterize)},filterize:function(){var e,t,n,o,a,r,s;if(!(!this.state.startDate^!this.state.endDate))return o=this.state.startDate?(r=this.state.startDate.split("/"),e=r[0],n=r[1],a=r[2],r,""+a+"-"+n+"-"+e+"T00:00:00.000Z"):void 0,t=this.state.endDate?(s=this.state.endDate.split("/"),e=s[0],n=s[1],a=s[2],s,""+a+"-"+n+"-"+e+"T23:59:59.999Z"):void 0,this.props.onDateFilter(o,t)},reset:function(){return this.setState({isActive:!1,startDate:"",endDate:""},this.filterize)},presetYesterday:function(){return this.setState({isActive:!0,startDate:moment().subtract(1,"day").format(d),endDate:moment().subtract(1,"day").format(d)},this.filterize)},presetLastWeek:function(){return this.setState({isActive:!0,startDate:moment().subtract(1,"week").format(d),endDate:moment().format(d)},this.filterize)},presetLastMonth:function(){return this.setState({isActive:!0,startDate:moment().subtract(1,"month").format(d),endDate:moment().format(d)},this.filterize)},render:function(){return c({className:"dropdown date-range-picker","aria-describedby":r.FILTER_DATE_RANGE,"data-tooltip-direction":"bottom"},s({className:"dropdown-toggle",role:"menuitem","data-toggle":"dropdown","aria-selected":this.state.isActive},l({className:"fa fa-calendar"}),m({className:"btn-label"},""+this.state.label),m({className:"caret"})),c({className:"dropdown-menu"},f({className:"presets list-unstyled"},p({role:"presentation"},s({role:"menuitem",onClick:this.presetYesterday},t("daterangepicker presets yesterday"))),p({role:"presentation"},s({role:"menuitem",onClick:this.presetLastWeek},t("daterangepicker presets last week"))),p({role:"presentation"},s({role:"menuitem",onClick:this.presetLastMonth},t("daterangepicker presets last month"))),p({role:"presentation"},s({role:"menuitem",onClick:this.reset},t("daterangepicker clear")))),c({className:"date-pickers"},u({ref:"date-range-picker-start",id:"date-range-picker-start",type:"text",name:"date-range-picker-start",value:this.state.startDate,onChange:this.onStartChange}),u({ref:"date-range-picker-end",id:"date-range-picker-end",type:"text",name:"date-range-picker-end",value:this.state.endDate,onChange:this.onEndChange}))))},initDatepicker:function(){var e;return e={staticPos:!0,fillGrid:!0,hideInput:!0},datePickerController.createDatePicker(_.extend({},e,{formElements:{"date-range-picker-start":i},callbackFunctions:{datereturned:[this.onStartChange]}})),datePickerController.createDatePicker(_.extend({},e,{formElements:{"date-range-picker-end":i},callbackFunctions:{datereturned:[this.onEndChange]}}))},componentDidMount:function(){return this.initDatepicker()},componentDidUpdate:function(){return datePickerController.setDateFromInput("date-range-picker-start"),datePickerController.setDateFromInput("date-range-picker-end")}})}),require.register("components/file_picker",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g;g=React.DOM,l=g.div,u=g.form,d=g.input,h=g.ul,m=g.li,f=g.span,p=g.i,c=g.a,i=n("../utils/message_utils"),s=React.PropTypes.shape({fileName:React.PropTypes.string,length:React.PropTypes.number,contentType:React.PropTypes.string,generatedFileName:React.PropTypes.string,contentDisposition:React.PropTypes.string,contentId:React.PropTypes.string,transferEncoding:React.PropTypes.string,rawFileObject:React.PropTypes.object,url:React.PropTypes.string}),r=React.createClass({displayName:"FilePicker",propTypes:{editable:React.PropTypes.bool,display:React.PropTypes.func,value:React.PropTypes.instanceOf(Immutable.Vector),valueLink:React.PropTypes.shape({value:React.PropTypes.instanceOf(Immutable.Vector),requestChange:React.PropTypes.func}),messageID:React.PropTypes.string},getDefaultProps:function(){return{editable:!1,valueLink:{value:Immutable.Vector.empty(),requestChange:function(){}}}},getInitialState:function(){return{files:this.props.value||this.props.valueLink.value,target:!1}},componentWillReceiveProps:function(e){return this.setState({files:e.value||e.valueLink.value})},addFiles:function(e){var t;return e=function(){var n,o,a;for(a=[],n=0,o=e.length;o>n;n++)t=e[n],a.push(this._fromDOM(t));return a}.call(this),e=this.state.files.concat(e).toVector(),this.props.valueLink.requestChange(e)},deleteFile:function(e){var t;return t=this.state.files.filter(function(t){return t.get("generatedFileName")!==e.generatedFileName}).toVector(),this.props.valueLink.requestChange(t)},displayFile:function(e){return e.url?window.open(e.url):e.rawFileObject?window.open(URL.createObjectURL(e.rawFileObject)):console.log("broken file : ",e)},render:function(){var e,n;return e="file-picker",this.props.className&&(e+=" "+this.props.className),n="dropzone",this.state.target&&(n+=" target"),l({className:e},h({className:"files list-unstyled"},this.state.files.toJS().map(function(e){return function(t){return a({key:t.generatedFileName,file:t,editable:e.props.editable,"delete":function(){return e.deleteFile(t)},display:function(){return e.displayFile(t)},messageID:e.props.messageID})}}(this))),this.props.editable?l({className:"dropzone-wrapper"},f({className:"file-wrapper"},d({type:"file",multiple:"multiple",ref:"file",onChange:this.handleFiles})),l({className:n},p({className:"fa fa-paperclip"}),f(null,t("picker drop here"))),l({className:"dropzone dropzone-mask",onDragOver:this.allowDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.handleFiles,onClick:this.onOpenFile})):void 0)},onOpenFile:function(e){return e.preventDefault(),jQuery(this.refs.file.getDOMNode()).trigger("click")},allowDrop:function(e){return e.preventDefault()},onDragEnter:function(e){return this.state.target?void 0:this.setState({target:!0})},onDragLeave:function(e){return this.state.target?this.setState({target:!1}):void 0},handleFiles:function(e){var t;return e.preventDefault(),t=e.target.files||e.dataTransfer.files,this.addFiles(t),this.setState({target:!1})},_fromDOM:function(e){var t,n,o;return n=this.state.files.filter(function(t){return t.get("fileName")===e.name}).count(),o=e.name,n>0&&(t=e.name.indexOf("."),o=o.substring(0,t)+"-"+(n+1)+o.substring(t)),Immutable.Map({fileName:e.name,length:e.size,contentType:e.type,rawFileObject:e,generatedFileName:o,contentDisposition:null,contentId:e.name,transferEncoding:null,content:null,url:null})}}),o.exports=r,a=React.createClass({displayName:"FileItem",propTypes:{file:React.PropTypes.shape({fileName:React.PropTypes.string,contentType:React.PropTypes.string,length:React.PropTypes.number}).isRequired,editable:React.PropTypes.bool,display:React.PropTypes.func,"delete":React.PropTypes.func,messageID:React.PropTypes.string},getDefaultProps:function(){return{editable:!1}},getInitialState:function(){return{}},render:function(){var e,t,n,o;return e=this.props.file,null!=e.url||e.rawFileObject||(window.cozyMails.log(new Error("Wrong file "+JSON.stringify(e))),e.url="message/"+this.props.messageID+"/attachments/"+e.generatedFileName),o=i.getAttachmentType(e.contentType),n={archive:"fa-file-archive-o",audio:"fa-file-audio-o",code:"fa-file-code-o",image:"fa-file-image-o",pdf:"fa-file-pdf-o",word:"fa-file-word-o",presentation:"fa-file-powerpoint-o",spreadsheet:"fa-file-excel-o",text:"fa-file-text-o",video:"fa-file-video-o",word:"fa-file-word-o"},t=n[o]||"fa-file-o",m({className:"file-item",key:this.props.key},p({className:"mime "+o+" fa "+t}),c({className:"file-name",target:"_blank",onClick:this.doDisplay,href:e.url,"data-file-url":e.url,"data-file-name":e.generatedFileName,"data-file-type":e.contentType},e.generatedFileName),f({className:"file-size"},"("+(e.length/1e3).toFixed(1)+"Ko)"),f({className:"file-actions"},c({className:"fa fa-download",href:""+e.url+"?download=1"}),this.props.editable?p({className:"fa fa-times delete",onClick:this.doDelete}):void 0))},doDisplay:function(e){return e.preventDefault(),e.stopPropagation(),this.props.display()},doDelete:function(e){return e.preventDefault(),e.stopPropagation(),this.props["delete"]()}})}),require.register("components/mailbox_picker",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h;h=React.DOM,p=h.div,f=h.ul,d=h.li,m=h.span,c=h.a,l=h.button,a=n("./basic_components").Dropdown,r=n("../libs/prop_types"),s=n("../mixins/router_mixin"),u=n("../libs/cached_transform"),i=n("../mixins/should_update_mixin"),o.exports=React.createClass({displayName:"MailboxPicker",mixins:[s,i.UnderscoreEqualitySlow],propTypes:{allowUndefined:React.PropTypes.bool,mailboxes:r.immutableMapStringTo(r.Mailbox),valueLink:r.valueLink(r.string).isRequired},getDefaultOptions:function(){return{allowUndefined:!0}},makeOptions:function(){return u(this,"mailboxesOptions",this.props.mailboxes,function(e){return function(){return e.props.mailboxes.map(function(e){var t;return t=new Array(e.get("depth")+1).join("--"),""+t+e.get("label")}).toJS()}}(this))},render:function(){var e;return(null!=(e=this.props.mailboxes)?e.length:void 0)?a({valueLink:this.props.valueLink,className:"btn-group btn-group-sm pull-left",btnClassName:"btn",options:this.makeOptions(),defaultLabel:t("mailbox pick one"),undefinedLabel:t("mailbox pick null"),allowUndefined:this.props.allowUndefined,undefinedValue:null}):p(null)}})}),require.register("components/mails_input",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b;b=React.DOM,p=b.div,f=b.label,v=b.textarea,g=b.span,y=b.ul,h=b.li,l=b.a,m=b.img,d=b.i,c=n("../utils/message_utils"),r=n("../stores/contact_store"),a=n("../actions/contact_action_creator"),s=n("../actions/layout_action_creator"),u=React.addons.classSet,o.exports=i=React.createClass({displayName:"MailsInput",getStateFromStores:function(){return{contacts:r.getResults()}},componentWillMount:function(){return this.setState({contacts:null,open:!1})},getInitialState:function(){var e;return e=this.getStateFromStores(),e.known=this.props.valueLink.value,e.unknown="",e.selected=0,e.open=!1,e},componentWillReceiveProps:function(e){return this.setState({known:e.valueLink.value})},componentDidMount:function(){return r.on("change",this._setStateFromStores)},componentWillUnmount:function(){return r.removeListener("change",this._setStateFromStores)},_setStateFromStores:function(){return this.setState(this.getStateFromStores())},shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},render:function(){var e,t,n,o,a,r,s,i,m,h,b,k;return b=function(e){return function(t,n){var o,a,r,s;return s=function(){var n;return n=e.state.known.filter(function(e){return e.address!==t.address}),e.props.valueLink.requestChange(n)},r=function(n){var o;return n.stopPropagation(),null!=t?(o={name:t.name,address:t.address},n.dataTransfer.setData("address",JSON.stringify(o)),n.dataTransfer.effectAllowed="all",n.dataTransfer.setData(e.props.id,!0)):void 0},a=function(e){return"move"===e.dataTransfer.dropEffect?s():void 0},o=null!=t.name&&""!==t.name.trim()?t.name:t.address,g({className:"address-tag",draggable:!0,onDragStart:r,onDragEnd:a,key:""+e.props.id+"-"+t.address+"-"+n,title:t.address},o,l({className:"clickable",onClick:s},d({className:"fa fa-times"})))}}(this),a=this.state.known.map(b),i=function(e){return function(){return e.refs.contactInput.getDOMNode().focus()}}(this),s=function(e){return function(t){var n,o;return o=t.target.value.split(","),2===o.length?(n=_.clone(e.state.known),n.push(c.parseAddress(o[0])),e.props.valueLink.requestChange(n),e.setState({unknown:o[1].trim()})):e.setState({unknown:t.target.value})}}(this),m=function(e){return function(t){var n;return n=e.refs.contactInput.getDOMNode(),n.cols=n.value.length+2,n.style.height=n.scrollHeight+"px"}}(this),n=""+(this.props.className||"")+" form-group mail-input "+this.props.id,t="compose-label control-label",r=u({"contact-form":!0,open:this.state.open&&(null!=(k=this.state.contacts)?k.length:void 0)>0}),o=0,e=function(e){return function(t){var n;return t.preventDefault(),n=Array.prototype.slice.call(t.dataTransfer.types),-1===n.indexOf(e.props.id)?t.dataTransfer.dropEffect="move":t.dataTransfer.dropEffect="none"}}(this),h=a.length>0?"":this.props.placeholder,p({className:n,onClick:i,onDrop:this.onDrop,onDragEnter:e,onDragLeave:e,onDragOver:e},f({htmlFor:this.props.id,className:t},this.props.label),a,p({className:"contact-group dropdown "+r},v({id:this.props.id,name:this.props.id,className:"form-control compose-input",onKeyDown:this.onKeyDown,onBlur:this.onBlur,onDrop:this.onDrop,onDragEnter:e,onDragLeave:e,onDragOver:e,ref:"contactInput",rows:1,value:this.state.unknown,onChange:s,onInput:m,placeholder:h,autoComplete:"off",spellCheck:"off"}),null!=this.state.contacts?y({className:"dropdown-menu contact-list"},this.state.contacts.map(function(e){return function(t,n){var a;return a=o===e.state.selected,o++,e.renderContact(t,a)}}(this)).toJS()):void 0))},renderContact:function(e,t){var n,o,a;return a=function(t){return function(){return t.onContact(e)}}(this),n=e.get("avatar"),o=u({selected:t}),h({className:o,onClick:a},l(null,null!=n?m({className:"avatar",src:n}):d({className:"avatar fa fa-user"}),""+e.get("fn")+" <"+e.get("address")+">"))},onQuery:function(e){var t,n;return n=this.refs.contactInput.getDOMNode().value.split(",").pop().replace(/^\s*/,""),null!=e&&"string"==typeof e?(n+=e,t=!1):null!=e&&"object"==typeof e&&(t=!0),n.length>2||t&&!this.state.open?(a.searchContactLocal(n),this.setState({open:!0}),!0):(this.state.open&&this.setState({contacts:null,open:!1}),!1)},onKeyDown:function(e){var t,n,o,a,r,s;switch(n=null!=(r=this.state.contacts)?r.count():void 0,a=this.state.selected,e.key){case"Enter":return(13===e.keyCode||13===e.which)&&this.addContactFromInput(),(null!=(s=this.state.contacts)?s.count():void 0)>0?(t=this.state.contacts.slice(a).first(),this.onContact(t)):this.onQuery(),e.preventDefault(),!1;case"ArrowUp":return this.setState({selected:0===a?n-1:a-1});case"ArrowDown":return this.setState({selected:a===n-1?0:a+1});case"Backspace":if(o=this.refs.contactInput.getDOMNode(),o.value=o.value.trim(),o.value.length<2)return this.setState({open:!1});break;case"Escape":return this.setState({contacts:null,open:!1});default:if(null!=e.key||1===e.key.toString().length)return this.onQuery(String.fromCharCode(e.which)),!0}},onBlur:function(){return setTimeout(function(e){return function(){return e.addContactFromInput(!0)}}(this),100)},addContactFromInput:function(e){var n,o,a,r,i,l;if(null==e&&(e=!1),this.state.selected=0,this.isMounted()){if(r={},r.open=!1,i=this.refs.contactInput.getDOMNode().value,""===i.trim())return this.setState(r);if(n=c.parseAddress(i),n.isValid)return this.state.known.push(n),r.known=this.state.known,r.unknown="",this.props.valueLink.requestChange(r.known),this.setState(r);if(o=0===(null!=(l=this.state.contacts)?l.length:void 0),!e&&o)return a=t("compose wrong email format",{address:n.address}),s.alertError(a)}},onContact:function(e){var t,n;return t={name:e.get("fn"),address:e.get("address")},n=_.clone(this.state.known),n.push(t),this.props.valueLink.requestChange(n),this.setState({unknown:"",contacts:null,open:!1}),setTimeout(function(e){return function(){var t;return t=e.refs.contactInput.getDOMNode().focus()}}(this),200)},onDrop:function(e){var t,n,o,a,r;return e.preventDefault(),e.stopPropagation(),r=JSON.parse(e.dataTransfer.getData("address")),a=r.name,t=r.address,n=this.state.known.some(function(e){return e.name===a&&e.address===t}),null==t||n?e.dataTransfer.dropEffect="none":(t={name:a,address:t},o=_.clone(this.state.known),o.push(t),this.props.valueLink.requestChange(o),this.setState({unknown:"",contacts:null,open:!1}),e.dataTransfer.dropEffect="move")}})}),require.register("components/menu",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,M,C,T,A,D,P,N,R=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};P=React.DOM,x=P.div,b=P.aside,C=P.nav,D=P.ul,M=P.li,T=P.span,y=P.a,E=P.i,k=P.button,S=React.addons.classSet,m=n("../mixins/router_mixin"),g=n("../mixins/store_watch_mixin"),a=n("../actions/account_action_creator"),s=n("../actions/layout_action_creator"),u=n("../actions/message_action_creator"),r=n("../stores/account_store"),i=n("../stores/layout_store"),d=n("../stores/refreshes_store"),f=n("../stores/search_store"),p=n("../utils/message_utils"),w=n("../utils/colorhash"),l=n("./menu_mailbox_item"),N=n("../constants/app_constants"),h=N.SpecialBoxIcons,v=N.Tooltips,A=["inboxMailbox","draftMailbox","sentMailbox","trashMailbox","junkMailbox","allMailbox"],o.exports=c=React.createClass({displayName:"Menu",mixins:[m,g([r,i,d,f])],shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},getStateFromStores:function(){return{onlyFavorites:!this.state||this.state.onlyFavorites===!0,
isDrawerExpanded:i.isDrawerExpanded(),refreshes:d.getRefreshing(),accounts:r.getAll(),selectedAccount:r.getSelectedOrDefault(),mailboxes:r.getSelectedMailboxes(!0),favorites:r.getSelectedFavorites(!0),search:f.getCurrentSearch()}},selectedFirstSort:function(e,t){var n,o;return(null!=(n=this.state.selectedAccount)?n.get("id"):void 0)===e.get("id")?-1:(null!=(o=this.state.selectedAccount)?o.get("id"):void 0)===t.get("id")?1:0},_toggleFavorites:function(){return this.setState({onlyFavorites:!this.state.onlyFavorites})},displayErrors:function(e){var n,o;return n=e.get("errors"),o={title:t("modal please contribute"),subtitle:t("modal please report"),allowCopy:!0,closeLabel:t("app alert close"),content:React.DOM.pre({style:{"max-height":"300px","word-wrap":"normal"}},n.join("\n\n"))},s.displayModal(o)},render:function(){return b({role:"menubar","aria-expanded":this.state.isDrawerExpanded},this.state.accounts.length?this.renderComposeButton():void 0,C({className:"mainmenu"},this.state.search&&!this.state.selectedAccount?x({className:"active"},x({className:"account-title"},y({role:"menuitem",className:"account active"},E({className:"fa fa-search"}),x({className:"account-details"},T({},this.state.search))))):void 0,this.state.accounts.length?this.state.accounts.sort(this.selectedFirstSort).map(this.getAccountRender).toJS():void 0),C({className:"submenu"},this.renderNewMailboxButton(),k({role:"menuitem",className:"btn fa fa-question-circle help","aria-describedby":v.HELP_SHORTCUTS,"data-tooltip-direction":"top",onClick:function(){return Mousetrap.trigger("?")}}),k({role:"menuitem",className:S({btn:!0,fa:!0,"drawer-toggle":!0,"fa-caret-right":!this.state.isDrawerExpanded,"fa-caret-left":this.state.isDrawerExpanded}),onClick:s.drawerToggle})))},renderComposeButton:function(){var e;return e=this.buildUrl({direction:"first",action:"compose",parameters:null,fullWidth:!0}),y({href:e,className:"compose-action btn btn-cozy"},E({className:"fa fa-pencil"}),T({className:"item-label"}," "+t("menu compose")))},renderNewMailboxButton:function(){var e,n,o,a;return o=this.state.accounts.length?this.buildUrl({direction:"first",action:"account.mailbox.messages",parameters:[null!=(a=this.state.selectedAccount)?a.get("id"):void 0],fullWidth:!0}):this.buildUrl({direction:"first",action:"account.new",fullWidth:!0}),"account.new"===this.props.layout.firstPanel.action?(e="active",n=o):(e="",n=this.buildUrl({direction:"first",action:"account.new",fullWidth:!0})),y({href:n,role:"menuitem",className:"btn new-account-action "+e},E({className:"fa fa-plus"}),T({className:"item-label"},t("menu account new")))},getAccountRender:function(e,n){var o,a,s,i,c,u,p,d,m,f,h,g,b,k,_;return d=e===this.state.selectedAccount,s=e.get("id"),f=e.get("totalUnread"),u=r.getDefaultMailbox(s),g=this.state.refreshes,_=null!=u?this.buildUrl({direction:"first",action:"account.mailbox.messages",parameters:[s,null!=u?u.get("id"):void 0],fullWidth:!0}):this.buildUrl({direction:"first",action:"account.config",parameters:[s,"account"],fullWidth:!0}),o=S({active:d}),this.state.onlyFavorites?(m=this.state.favorites,p="fa-ellipsis-h",k=t("menu favorites off")):(m=this.state.mailboxes,p="fa-ellipsis-h",k=t("menu favorites on")),i=this.state.mailboxes.length===this.state.favorites.length,c=this.buildUrl({direction:"first",action:"account.config",parameters:[s,"account"],fullWidth:!0}),b=A.map(function(t){return e.get(t)}),a=w(e.get("label")),x({className:o,key:n},x({className:"account-title"},y({href:_,role:"menuitem",className:"account "+o,"data-toggle":"tooltip","data-delay":"10000","data-placement":"right"},E({className:"avatar",style:{"background-color":a}},e.get("label")[0]),x({className:"account-details"},T({"data-account-id":n,className:"item-label display-label"},e.get("label")),T({"data-account-id":n,className:"item-label display-login"},e.get("login"))),(h=g.get(s))&&h.get("errors").length?T({className:"refresh-error"},E({className:"fa warning",onClick:this.displayErrors},h)):void 0),d?y({href:c,className:"mailbox-config"},E({className:"fa fa-cog","aria-describedby":v.ACCOUNT_PARAMETERS,"data-tooltip-direction":"right"})):void 0,f>0&&!h?T({className:"badge"},f):void 0),d?D({role:"group",className:"list-unstyled mailbox-list"},null!=m?m.filter(function(e){var t;return t=e.get("id"),R.call(b,t)>=0}).map(function(t){return function(n,o){return l({account:e,mailbox:n,key:o,selectedMailboxID:t.state.selectedMailboxID,refreshes:g,displayErrors:t.displayErrors})}}(this)).toJS():void 0,null!=m?m.filter(function(e){var t;return t=e.get("id"),R.call(b,t)<0}).map(function(t){return function(n,o){return l({account:e,mailbox:n,key:o,selectedMailboxID:t.state.selectedMailboxID,refreshes:g,displayErrors:t.displayErrors})}}(this)).toJS():void 0,i?void 0:M({className:"toggle-favorites"},y({role:"menuitem",tabIndex:0,onClick:this._toggleFavorites,key:"toggle"},E({className:"fa "+p}),T({className:"item-label"},k)))):void 0)}})}),require.register("components/menu_mailbox_item",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S;k=React.DOM,f=k.div,p=k.aside,v=k.nav,b=k.ul,g=k.li,y=k.span,u=k.a,h=k.i,d=k.button,m=React.addons.classSet,i=n("../mixins/router_mixin"),s=n("../actions/message_action_creator"),a=n("../actions/layout_action_creator"),S=n("../constants/app_constants"),c=S.SpecialBoxIcons,l=S.Tooltips,o.exports=r=React.createClass({displayName:"MenuMailboxItem",mixins:[i],shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},getInitialState:function(){return{target:!1}},onClickMailbox:function(){return this.props.mailbox.get("id")===this.props.selectedMailboxID&&this.props.account.get("supportRFC4551")?s.refreshMailbox(this.props.selectedMailboxID):void 0},render:function(){var e,n,o,a,r,s,i,p,f,v,b,k,S,w;s=this.props.mailbox.get("id"),p=this.buildUrl({direction:"first",action:"account.mailbox.messages",parameters:[this.props.account.get("id"),s]}),v=this.props.mailbox.get("nbTotal")||0,b=this.props.mailbox.get("nbUnread")||0,f=this.props.mailbox.get("nbRecent")||0,w=t("menu mailbox total",v),b>0&&(w+=" "+t("menu mailbox unread",b)),f>0&&(w+=" "+t("menu mailbox new",f)),i="fa-folder-o",S=!1;for(e in c)r=c[e],this.props.account.get(e)===s&&(i=r,S=e);return o=m({active:s===this.props.selectedMailboxID,target:this.state.target}),n=m({target:this.state.target,special:S,news:f>0}),S&&(n+=" "+S),k=this.props.refreshes.get(s),a=this.props.displayErrors.bind(null,k),g({className:o},u({href:p,onClick:this.onClickMailbox,className:""+n+" lv-"+this.props.mailbox.get("depth"),role:"menuitem","data-mailbox-id":s,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:function(e){return function(t){return e.onDrop(t,s)}}(this),title:w,"data-toggle":"tooltip","data-placement":"right",key:this.props.key},h({className:"fa "+i}),y({className:"item-label"},""+this.props.mailbox.get("label")),(null!=k?k.get("errors").length:void 0)?y({className:"refresh-error",onClick:a},h({className:"fa fa-warning"},null)):void 0),this.props.account.get("trashMailbox")===s?d({"aria-describedby":l.EXPUNGE_MAILBOX,"data-tooltip-direction":"right",onClick:this.expungeMailbox},y({className:"fa fa-recycle"})):void 0,!k&&b&&b>0?y({className:"badge"},b):void 0)},onDragEnter:function(e){return this.state.target?void 0:this.setState({target:!0})},onDragLeave:function(e){return this.state.target?this.setState({target:!1}):void 0},onDragOver:function(e){return e.preventDefault()},onDrop:function(e,t){var n,o,a,r,i;return o=e.dataTransfer.getData("text"),i=JSON.parse(o),r=i.messageID,a=i.mailboxID,n=i.conversationID,this.setState({target:!1}),s.move({messageID:r,conversationID:n},a,t)},expungeMailbox:function(e){return e.preventDefault(),a.displayModal({title:t("app confirm delete"),subtitle:t("account confirm delbox"),closeLabel:t("app cancel"),actionLabel:t("app confirm"),action:function(e){return function(){return a.hideModal(),AccountActionCreator.mailboxExpunge({accountID:e.props.account.get("id"),mailboxID:e.props.mailbox.get("id")})}}(this)})}})}),require.register("components/message-content",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y;y=React.DOM,c=y.div,s=y.article,u=y.header,l=y.footer,v=y.ul,m=y.li,g=y.span,p=y.i,f=y.p,r=y.a,i=y.button,h=y.pre,d=y.iframe,o.exports=a=React.createClass({displayName:"MessageContent",shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},render:function(){return this.props.messageDisplayHTML&&this.props.html?c(null,this.props.imagesWarning?c({className:"imagesWarning alert alert-warning content-action",ref:"imagesWarning"},p({className:"fa fa-shield"}),t("message images warning"),i({className:"btn btn-xs btn-warning",type:"button",ref:"imagesDisplay",onClick:this.props.displayImages},t("message images display"))):void 0,d({"data-message-id":this.props.messageID,name:"frame-"+this.props.messageID,className:"content",ref:"content",allowTransparency:!0,frameBorder:0})):c({className:"row"},c({className:"preview",ref:"content"},f({dangerouslySetInnerHTML:{__html:this.props.rich}})))},_initFrame:function(e){var t,n,o,a,r,s,i;return r=document.querySelector("#panels > .panel:nth-of-type(2)"),null==r||this.props.composing||(r.scrollTop=0),this.props.messageDisplayHTML&&this.refs.content?(o=this.refs.content.getDOMNode(),n=o.contentDocument||(null!=(i=o.contentWindow)?i.document:void 0),t=!1,s=0,a=function(e){return function(r){var i,c,l;return s=0,n=o.contentDocument||(null!=(c=o.contentWindow)?c.document:void 0),null==n?e.props.displayHTML(!1):(n.documentElement.innerHTML=e.props.html,window.cozyMails.customEvent("MESSAGE_LOADED",e.props.messageID),i=function(e){var r,i;return r=n.documentElement.scrollHeight,60>r?o.style.height="60px":o.style.height=""+(r+60)+"px",s++,t&&s>10?(n.body.removeEventListener("load",a),null!=(i=o.contentWindow)?i.removeEventListener("resize"):void 0):void 0},i(),setTimeout(i,1e3),n.body.onload=i,t?(o.contentWindow.onresize=i,window.onresize=i,null!=(l=o.contentWindow)?l.addEventListener("resize",i,!0):void 0):void 0)}}(this),"mount"===e&&"complete"!==n.readyState?o.addEventListener("load",a):a()):window.cozyMails.customEvent("MESSAGE_LOADED",this.props.messageID)},componentDidMount:function(){return this._initFrame("mount")},componentDidUpdate:function(){return this._initFrame("update")}})}),require.register("components/message-list-body",function(e,t,n){var o,a,r,s;s=React.DOM.ul,a=t("./message-list-item"),o=t("../utils/dom_utils"),n.exports=r=React.createClass({displayName:"MessageListBody",getInitialState:function(){var e;return e={messageID:null}},shouldComponentUpdate:function(e,t){var n,o;return o=Object.keys(e).filter(function(t){return function(n){return"function"!=typeof e[n]&&!_.isEqual(e[n],t.props[n])}}(this)),n=!_.isEqual(t,this.state)||o.length>0},_isActive:function(e,t){return this.props.messageID===e||this.props.displayConversations&&null!=t&&this.props.conversationID===t},render:function(){return s({className:"list-unstyled",ref:"messageList"},this.props.messages.map(function(e){return function(t,n){var o,r,s;return r=t.get("id"),o=t.get("conversationID"),a({message:t,accountID:e.props.accountID,mailboxID:e.props.mailboxID,accounts:e.props.accounts,mailboxes:e.props.mailboxes,conversationLengths:null!=(s=e.props.conversationLengths)?s.get(o):void 0,key:n,isActive:e._isActive(r,o),edited:e.props.edited,settings:e.props.settings,selected:null!=e.props.selected[r],login:e.props.login,displayConversations:e.props.displayConversations,isTrash:e.props.isTrash,ref:"messageItem",onSelect:function(t){return e.props.onSelect(r,t)}})}}(this)).toJS())},componentDidMount:function(){return this._onMount()},componentDidUpdate:function(){return this._onMount()},_onMount:function(){var e,t,n,a,r,s,i;return this.state.messageID!==this.props.messageID?(n=null!=(a=this.refs.messageList)&&null!=(r=a.getDOMNode())?r.parentNode:void 0,e=document.querySelector("[data-message-id='"+this.props.messageID+"']"),null==e||o.isVisible(e)||(t=null!=n?n.scrollTop:void 0,e.scrollIntoView(!1),t!==(null!=(s=this.refs.scrollable)&&null!=(i=s.getDOMNode())?i.scrollTop:void 0)&&null!=n&&(n.scrollTop+=e.getBoundingClientRect().height/2)),this.setState({messageID:this.props.messageID})):void 0}})}),require.register("components/message-list-item",function(e,t,n){var o,a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,M,C=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},T=[].slice;E=React.DOM,h=E.div,S=E.section,k=E.p,x=E.ul,b=E.li,p=E.a,w=E.span,g=E.i,d=E.button,y=E.input,v=E.img,M=t("../constants/app_constants"),s=M.MessageFlags,a=M.MailboxFlags,o=t("./basic_components").Icon,u=t("../mixins/router_mixin"),m=React.addons.classSet,c=t("../utils/message_utils"),f=t("../utils/colorhash"),l=t("./participant"),r=t("../actions/message_action_creator"),n.exports=i=React.createClass({displayName:"MessagesItem",mixins:[u],shouldComponentUpdate:function(e,t){var n,o;return o=Object.keys(e).filter(function(t){return function(n){return"function"!=typeof e[n]&&!_.isEqual(e[n],t.props[n])}}(this)),n=!_.isEqual(t,this.state)||o.length>0},render:function(){var e,t,n,a,r,i,l,u,d,y,k,S;return u=this.props.message,i=u.get("flags"),n=m({message:!0,unseen:(y=s.SEEN,C.call(i,y)<0),active:this.props.isActive,edited:this.props.edited}),a="compact"===this.props.settings.get("listStyle"),r=c.formatDate(u.get("createdAt"),a),e=c.getAvatar(u),d=this.props.edited?w:p,b({className:n,key:this.props.key,"data-message-id":u.get("id"),"data-conversation-id":u.get("conversationID"),draggable:!this.props.edited,onClick:this.onMessageClick,onDragStart:this.onDragStart},d({href:this.getUrl(),className:"wrapper","data-message-id":u.get("id"),onClick:this.onMessageClick,onDoubleClick:this.onMessageDblClick,ref:"target"},h({className:"markers-wrapper"},o({className:"select",onClick:this.onSelect,type:this.props.selected?"check-square-o":"square-o"}),(k=s.SEEN,C.call(i,k)<0?o({type:"circle"}):void 0),(S=s.FLAGGED,C.call(i,S)>=0?o({type:"star"}):void 0)),h({className:"avatar-wrapper select-target"},null!=e?v({className:"avatar",src:e}):(l=u.get("from")[0],t=""+(null!=l?l.name:void 0)+" <"+(null!=l?l.address:void 0)+">",g({className:"avatar placeholder",style:{"background-color":f(t)}},(null!=l?l.name:void 0)?null!=l?l.name[0]:void 0:null!=l?l.address[0]:void 0))),h({className:"metas-wrapper"},h({className:"metas"},h({className:"participants ellipsable"},this.getParticipants(u)),h({className:"subject ellipsable"},this.highlightSearch(u.get("subject"))),h.apply(null,[{className:"mailboxes"}].concat(T.call(this.getMailboxTags(u)))),h({className:"date"},r),h({className:"extras"},u.get("hasAttachments")?g({className:"attachments fa fa-paperclip"}):void 0,this.props.displayConversations&&this.props.conversationLengths>1?w({className:"conversation-length"},""+this.props.conversationLengths):void 0),h({className:"preview ellipsable"},this.highlightSearch(c.getPreview(u)))))))},highlightSearch:function(e,t){return null==t&&(t=null),k.apply(null,[t].concat(T.call(c.highlightSearch(e))))},getMailboxTags:function(){var e,t;return e=this.props.message.get("accountID"),t=this.props.accounts.get(e).get("label"),Object.keys(this.props.message.get("mailboxIDs")).filter(function(e){return function(t){var n,o;return n=e.props.mailboxes.get(t),n?e.props.mailboxID&&(o=a.ALL,C.call(n.get("attribs"),o)>=0)?!1:e.props.mailboxID===t?!1:!0:!1}}(this)).map(function(e){return function(n){var o,a;return o=e.props.mailboxes.get(n),a=o.get("label"),e.props.accountID||(a=""+t+":"+a),w({className:"mailbox-tag"},a)}}(this))},onSelect:function(e){return this.props.onSelect(!this.props.selected),e.preventDefault(),e.stopPropagation()},getUrl:function(){var e,t,n,o;return n={messageID:this.props.message.get("id")},o=s.DRAFT,C.call(this.props.message.get("flags"),o)>=0&&!this.props.isTrash?e="edit":(t=this.props.message.get("conversationID"),null!=t&&this.props.displayConversations?(e="conversation",n.conversationID=t):e="message"),this.buildUrl({direction:"second",action:e,parameters:n})},onMessageClick:function(e){var t,n;return n=this.refs.target.getDOMNode(),this.props.edited&&e.target.classList.contains("select-target")?(this.props.onSelect(!this.props.selected),e.preventDefault(),e.stopPropagation()):e.target.classList.contains("wrapper")?(e.preventDefault(),e.stopPropagation()):"checkbox"!==e.target.getAttribute("type")&&(e.preventDefault(),e.stopPropagation(),r.setCurrent(n.dataset.messageId,!0),this.props.settings.get("displayPreview"))?(t="#"+n.getAttribute("href").split("#")[1],this.redirect(t)):void 0},onMessageDblClick:function(e){var t;return this.props.edited?void 0:(t=e.currentTarget.href.split("#")[1],window.router.navigate(t,{trigger:!0}))},onDragStart:function(e){var t;return e.stopPropagation(),t={mailboxID:this.props.mailboxID},this.props.displayConversations?t.conversationID=e.currentTarget.dataset.conversationId:t.messageID=e.currentTarget.dataset.messageId,e.dataTransfer.setData("text",JSON.stringify(t)),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"},getParticipants:function(e){var t,n,o;return t=e.get("from"),o=e.get("to").concat(e.get("cc")).filter(function(e){return function(n){var o;return n.address!==e.props.login&&n.address!==(null!=(o=t[0])?o.address:void 0)}}(this)),n=o.length>0?", ":" ",k(null,l({participants:t,onAdd:this.addAddress,ref:"from",tooltip:!1}),w(null,n),l({participants:o,onAdd:this.addAddress,ref:"to",tooltip:!1}))},addAddress:function(e){return ContactActionCreator.createContact(e)}})}),require.register("components/message-list",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,M,C,T,A,D,P,N,R,I,O,L,j,F;L=React.DOM,C=L.div,R=L.section,N=L.p,O=L.ul,P=L.li,w=L.a,I=L.span,T=L.i,x=L.button,D=L.input,A=L.img,j=n("../constants/app_constants"),l=j.MessageFlags,S=j.Tooltips,h=n("../mixins/router_mixin"),k=n("../mixins/tooltip_refresher_mixin"),y=n("../mixins/store_watch_mixin"),i=n("../stores/layout_store"),E=React.addons.classSet,r=n("../utils/dom_utils"),d=n("../utils/message_utils"),g=n("../utils/socketio_utils"),M=n("../utils/colorhash"),a=n("../actions/contact_action_creator"),s=n("../actions/layout_action_creator"),c=n("../actions/message_action_creator"),m=n("./participant"),F=n("./basic_components"),v=F.Spinner,f=F.Progress,b=n("./toolbar_messageslist"),p=n("./message-list-body"),o.exports=u=React.createClass({displayName:"MessageList",mixins:[h,k,y([i])],shouldComponentUpdate:function(e,t){var n;return n=!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},getInitialState:function(){return{edited:!1,selected:{},allSelected:!1}},getStateFromStores:function(){return{fullscreen:i.isPreviewFullscreen()}},componentWillReceiveProps:function(e){var t,n,o;o=_.clone(this.state.selected);for(t in o)n=o[t],e.messages.get(t)||delete o[t];return this.setState({selected:o}),0===Object.keys(o).length?this.setState({allSelected:!1,edited:!1}):void 0},render:function(){return R({key:"messages-list-"+this.props.mailboxID,ref:"list","data-mailbox-id":this.props.mailboxID,className:"messages-list panel","aria-expanded":!this.state.fullscreen},b({settings:this.props.settings,accountID:this.props.accountID,mailboxID:this.props.mailboxID,mailboxes:this.props.mailboxes,messages:this.props.messages,edited:this.state.edited,selected:this.state.selected,allSelected:this.state.allSelected,displayConversations:this.props.displayConversations,toggleEdited:this.toggleEdited,toggleAll:this.toggleAll,afterAction:this.afterMessageAction,queryParams:this.props.queryParams,noFilters:this.props.noFilters}),f({value:this.props.refresh,max:1}),0===this.props.messages.count()?this.props.fetching?N({className:"listFetching list-loading"},t("list fetching")):N({className:"listEmpty",ref:"listEmpty"},this.props.emptyListMessage):C({className:"main-content",ref:"scrollable"},p({messages:this.props.messages,settings:this.props.settings,accountID:this.props.accountID,mailboxID:this.props.mailboxID,messageID:this.props.messageID,conversationID:this.props.conversationID,conversationLengths:this.props.conversationLengths,accounts:this.props.accounts,mailboxes:this.props.mailboxes,login:this.props.login,edited:this.state.edited,selected:this.state.selected,allSelected:this.state.allSelected,displayConversations:this.props.displayConversations,isTrash:this.props.isTrash,ref:"listBody",onSelect:this.onMessageSelectionChange}),this.renderFooter()))},renderFooter:function(){return this.props.canLoadMore?N({className:"text-center list-footer"},this.props.fetching?v():w({className:"more-messages",onClick:this.props.loadMoreMessage,ref:"nextPage"},t("list next page"))):N({ref:"listEnd"},t("list end"))},toggleEdited:function(){return this.state.edited?this.setState({allSelected:!1,edited:!1,selected:{}}):this.setState({edited:!0})},toggleAll:function(){var e;return Object.keys(this.state.selected).length>0?this.setState({allSelected:!1,edited:!1,selected:{}}):(e={},this.props.messages.map(function(t,n){return e[n]=!0}).toJS(),this.setState({allSelected:!0,edited:!0,selected:e}))},onMessageSelectionChange:function(e,t){var n,o;return o=_.clone(this.state.selected),t?o[e]=t:delete o[e],n=Object.keys(o).length>0?{edited:!0,selected:o}:{allSelected:!1,edited:!1,selected:{}},this.setState(n)},afterMessageAction:function(){return setTimeout(function(e){return function(){var t;return t=e.refs.nextPage||e.refs.listEnd||e.refs.listEmpty,null!=t&&r.isVisible(t.getDOMNode())?e.props.loadMoreMessage():void 0}}(this),100)},_loadNext:function(){var e,t;return e=null!=(t=this.refs.listBody)?t.getDOMNode().lastElementChild:void 0,null!=this.refs.nextPage&&null!=e&&r.isVisible(e)?this.props.loadMoreMessage():void 0},_handleRealtimeGrowth:function(){var e;return"-"===this.props.pageAfter||null==this.refs.listEnd||r.isVisible(this.refs.listEnd.getDOMNode())?void 0:(e=this.props.messages.last().get("date"),g.changeRealtimeScope(this.props.mailboxID,e))},_initScroll:function(){var e;if(null!=this.refs.nextPage)return null!=this.refs.scrollable?(e=this.refs.scrollable.getDOMNode(),setTimeout(function(t){return function(){return e.removeEventListener("scroll",t._loadNext),e.addEventListener("scroll",t._loadNext),t._loadNext(),null==t._checkNextInterval?t._checkNextInterval=window.setInterval(t._loadNext,1e4):void 0}}(this),0)):void 0},componentDidMount:function(){return this._initScroll()},componentDidUpdate:function(){return this._initScroll(),this._handleRealtimeGrowth()},componentWillUnmount:function(){var e;return null!=this.refs.scrollable&&(e=this.refs.scrollable.getDOMNode(),e.removeEventListener("scroll",this._loadNext),null!=this._checkNextInterval)?window.clearInterval(this._checkNextInterval):void 0}})}),require.register("components/message",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E,_,M,C,T,A,D;D=React.DOM,k=D.div,v=D.article,w=D.header,S=D.footer,A=D.ul,_=D.li,T=D.span,x=D.i,M=D.p,g=D.a,y=D.button,C=D.pre,E=D.iframe,u=n("./message_header"),l=n("./message_footer"),f=n("./toolbar_message"),i=n("./message-content"),c=n("../constants/app_constants").MessageFlags,r=n("../actions/layout_action_creator"),s=n("../actions/message_action_creator"),a=n("../actions/contact_action_creator"),d=n("../mixins/router_mixin"),m=n("../mixins/should_update_mixin"),h=n("../mixins/tooltip_refresher_mixin"),b=React.addons.classSet,p=/:\/\//,o.exports=React.createClass({displayName:"Message",mixins:[d,h,m.UnderscoreEqualitySlow],propTypes:{accounts:React.PropTypes.object.isRequired,active:React.PropTypes.bool,inConversation:React.PropTypes.bool,displayConversations:React.PropTypes.bool,key:React.PropTypes.string.isRequired,mailboxes:React.PropTypes.object.isRequired,message:React.PropTypes.object.isRequired,selectedAccountID:React.PropTypes.string.isRequired,selectedAccountLogin:React.PropTypes.string.isRequired,selectedMailboxID:React.PropTypes.string.isRequired,settings:React.PropTypes.object.isRequired,useIntents:React.PropTypes.bool.isRequired,toggleActive:React.PropTypes.func.isRequired},getInitialState:function(){return{composeAction:"",headers:!1,messageDisplayHTML:this.props.settings.get("messageDisplayHTML"),messageDisplayImages:this.props.settings.get("messageDisplayImages"),currentMessageID:null,prepared:{}}},_prepareMessage:function(e){var n,o,a,r,s,i,l,u,p,d,m,f,h,g;r=[],h=e.get("headers");for(i in h)f=h[i],Array.isArray(f)?r.push(""+i+": "+f.join("\n    ")):r.push(""+i+": "+f);if(p=e.get("text"),s=e.get("html"),n=e.get("alternatives"),m=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/gim,null==p&&null==s&&(p=(null!=n?n.length:void 0)>0?t("calendar unknown format"):""),null!=p&&null==s&&this.state.messageDisplayHTML)try{s=markdown.toHTML(p.replace(/(^>.*$)([^>]+)/gm,"$1\n$2")),s="<div class='textOnly'>"+s+"</div>"}catch(v){o=v,s="<div class='textOnly'>"+p+"</div>"}return null==s||null!=p||this.state.messageDisplayHTML||(p=toMarkdown(s)),l=e.get("mailboxIDs"),d=null!=(g=this.props.accounts[this.props.selectedAccountID])?g.trashMailbox:void 0,null!=p&&(u=p.replace(m,'<a href="$1" target="_blank">$1</a>'),u=u.replace(/^>>>>>[^>]?.*$/gim,'<span class="quote5">$&</span>'),u=u.replace(/^>>>>[^>]?.*$/gim,'<span class="quote4">$&</span>'),u=u.replace(/^>>>[^>]?.*$/gim,'<span class="quote3">$&</span>'),u=u.replace(/^>>[^>]?.*$/gim,'<span class="quote2">$&</span>'),u=u.replace(/^>[^>]?.*$/gim,'<span class="quote1">$&</span>')),a=this.props.message.get("flags").slice(),{attachments:e.get("attachments"),fullHeaders:r,text:p,rich:u,html:s,isDraft:a.indexOf(c.DRAFT)>-1,isDeleted:null!=l[d]}},componentWillMount:function(){return this._markRead(this.props.message,this.props.active)},componentWillReceiveProps:function(e){var t;return t={},e.message.get("id")!==this.props.message.get("id")&&(this._markRead(e.message,e.active),t.messageDisplayHTML=e.settings.get("messageDisplayHTML"),t.messageDisplayImages=e.settings.get("messageDisplayImages")),this.setState(t)},_markRead:function(e,t){var n,o,a;return o=e.get("id"),this.state.currentMessageID!==o&&(a={currentMessageID:o,prepared:this._prepareMessage(e)},this.setState(a),n=e.get("flags").slice(),t&&-1===n.indexOf(c.SEEN))?setTimeout(function(){return s.mark({messageID:o},c.SEEN)},1):void 0},prepareHTML:function(e){var t,n,o,a,r,s,i,c,l,u,d,m;if(s=!0,i=new DOMParser,e='<html><head>\n    <link rel="stylesheet" href="./fonts/fonts.css" />\n    <link rel="stylesheet" href="./mail_stylesheet.css" />\n    <style>body { visibility: hidden; }</style>\n</head><body>'+e+"</body></html>",t=i.parseFromString(e,"text/html"),a=[],t||(t=document.implementation.createHTMLDocument(""),t.documentElement.innerHTML=e),t||(console.error("Unable to parse HTML content of message"),s=!1),t&&!this.state.messageDisplayImages)for(a=t.querySelectorAll("IMG[src]"),a=Array.prototype.filter.call(a,function(e){return p.test(e.getAttribute("src"))}),c=0,u=a.length;u>c;c++)o=a[c],o.dataset.src=o.getAttribute("src"),o.removeAttribute("src");for(m=t.querySelectorAll("a[href]"),l=0,d=m.length;d>l;l++)r=m[l],r.target="_blank",n=r.getAttribute("href"),""===n||p.test(n)||r.setAttribute("href","http://"+n);return null!=t?this._htmlContent=t.documentElement.innerHTML:this._htmlContent=e,{messageDisplayHTML:s,images:a}},isUnread:function(){return-1===this.props.message.get("flags").indexOf(c.SEEN)},onHeaderClicked:function(){var e;return e=this.props.message.get("id"),this.isUnread()&&!this.props.active&&s.mark({messageID:e},c.SEEN),this.props.toggleActive(e)},render:function(){var e,t,n,o,a,r,s,c;return o=this.props.message,r=this.state.prepared,this.state.messageDisplayHTML&&null!=r.html?(s=this.prepareHTML(r.html),a=s.messageDisplayHTML,t=s.images,n=t.length>0&&!this.state.messageDisplayImages):(a=!1,n=!1),e=b({message:!0,active:this.props.active,isDraft:r.isDraft,isDeleted:r.isDeleted,isUnread:this.isUnread()}),v({className:e,key:this.props.key,"data-id":this.props.message.get("id")},w({onClick:this.onHeaderClicked},u({message:this.props.message,isDraft:this.state.prepared.isDraft,isDeleted:this.state.prepared.isDeleted,active:this.props.active,ref:"header"}),this.props.active?this.renderToolbox():void 0),this.props.active?k({className:"full-headers"},C(null,null!=r&&null!=(c=r.fullHeaders)?c.join("\n"):void 0)):void 0,this.props.active?i({ref:"messageContent",messageID:o.get("id"),messageDisplayHTML:a,html:this._htmlContent,text:r.text,rich:r.rich,imagesWarning:n,displayImages:this.displayImages,displayHTML:this.displayHTML}):void 0,this.props.active?S(null,l({message:this.props.message,ref:"footer"}),this.renderToolbox(!1)):void 0)},renderToolbox:function(e){return null==e&&(e=!0),f({full:e,message:this.props.message,mailboxes:this.props.mailboxes,selectedMailboxID:this.props.selectedMailboxID,inConversation:this.props.inConversation,onDelete:this.onDelete,onHeaders:this.onHeaders,onMove:this.onMove,onMark:this.onMark,onConversationDelete:this.onConversationDelete,onConversationMark:this.onConversationMark,onConversationMove:this.onConversationMove,ref:"toolbarMessage"})},onDelete:function(e){var n,o,a;return e.preventDefault(),e.stopPropagation(),a=this.props.settings.get("messageConfirmDelete"),o=this.props.message.get("id"),n=t("mail confirm delete",{subject:this.props.message.get("subject")}),a?r.displayModal({title:t("app confirm delete"),subtitle:n,closeLabel:t("app cancel"),actionLabel:t("app confirm"),action:function(){return s["delete"]({messageID:o}),r.hideModal()}}):s["delete"]({messageID:o})},onConversationDelete:function(){var e;return e=this.props.message.get("conversationID"),s["delete"]({conversationID:e})},onMark:function(e){var t;return t=this.props.message.get("id"),s.mark({messageID:t},e)},onConversationMark:function(e){var t;return t=this.props.message.get("conversationID"),s.mark({conversationID:t},e)},onMove:function(e){var t,n,o;return n=this.props.message.get("id"),t=this.props.selectedMailboxID,o=this.props.message.get("subject"),s.move({messageID:n},t,e)},onConversationMove:function(e){var t,n,o;return t=this.props.message.get("conversationID"),n=this.props.selectedMailboxID,o=this.props.message.get("subject"),s.move({conversationID:t},n,e)},onCopy:function(e){return r.alertWarning(t("app unimplemented"))},onHeaders:function(e){var t;return e.preventDefault(),t=this.props.message.get("id"),document.querySelector(".conversation [data-id='"+t+"']").classList.toggle("with-headers")},addAddress:function(e){return a.createContact(e)},displayImages:function(e){return e.preventDefault(),this.setState({messageDisplayImages:!0})},displayHTML:function(e){return null==e&&(e=!0),this.setState({messageDisplayHTML:e})}})}),require.register("components/message_footer",function(e,t,n){var o,a,r,s,i,c,l,u,p;p=React.DOM,s=p.div,l=p.span,u=p.ul,c=p.li,r=p.a,i=p.i,a=t("../utils/message_utils"),o=t("./attachement_preview"),n.exports=React.createClass({displayName:"MessageFooter",propTypes:{message:React.PropTypes.object.isRequired},render:function(){return s({className:"attachments"},this.renderAttachments())},renderAttachments:function(){var e,t,n,r;return e=(null!=(r=this.props.message.get("attachments"))?r.toJS():void 0)||[],e.length?(n=_.groupBy(e,function(e){return"image"===a.getAttachmentType(e.contentType)?"preview":"binary"}),u({className:null},function(){var e,a,r,s;if(n.preview){for(r=n.preview,s=[],e=0,a=r.length;a>e;e++)t=r[e],s.push(o({ref:"attachmentPreview",file:t,key:t.checksum,preview:!0,previewLink:!0}));return s}}(),function(){var e,a,r,s;if(n.binary){for(r=n.binary,s=[],e=0,a=r.length;a>e;e++)t=r[e],s.push(o({ref:"attachmentPreview",file:t,key:t.checksum,preview:!1,previewLink:!0}));return s}}())):void 0}})}),require.register("components/message_header",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},g=[].slice;f=React.DOM,
l=f.div,m=f.span,u=f.i,p=f.img,c=f.a,a=n("../constants/app_constants").MessageFlags,i=n("./popup_message_details"),s=n("./popup_message_attachments"),r=n("../mixins/participant_mixin"),d=n("../utils/message_utils"),o.exports=React.createClass({displayName:"MessageHeader",propTypes:{message:React.PropTypes.object.isRequired,isDraft:React.PropTypes.bool,isDeleted:React.PropTypes.bool},mixins:[r],shouldComponentUpdate:function(e,t){var n;return n=!_.isEqual(e,this.props)},render:function(){var e,n;return e=d.getAvatar(this.props.message),l({key:"message-header-"+this.props.message.get("id")},e?l({className:"sender-avatar"},p({className:"media-object",src:e})):void 0,l({className:"infos"},this.renderAddress("from"),this.props.active?this.renderAddress("to"):void 0,this.props.active?this.renderAddress("cc"):void 0,l({className:"metas indicators"},this.props.message.get("attachments").length?s({message:this.props.message}):void 0,this.props.active?(n=a.FLAGGED,h.call(this.props.message.get("flags"),n)>=0?u({className:"fa fa-star"}):void 0,this.props.isDraft?c({href:"#edit/"+this.props.message.get("id")},u({className:"fa fa-edit"}),m(null,t("edit draft"))):void 0,this.props.isDeleted?u({className:"fa fa-trash"}):void 0):void 0),l({className:"metas date"},d.formatDate(this.props.message.get("createdAt"))),i({message:this.props.message})))},renderAddress:function(e){var n;return n=this.props.message.get(e),n.length?l({className:"addresses "+e,key:"address-"+e},l.apply(null,[{className:"addresses-wrapper"},"from"!==e?m(null,t("mail "+e)):void 0].concat(g.call(this.formatUsers(n))))):void 0}})}),require.register("components/modal",function(e,n,o){var a;o.exports=a=React.createClass({displayName:"Modal",render:function(){var e;return e="",this.props.content||(e="no-content"),React.DOM.div({className:"modal fade in",role:"dialog",style:{display:"block"}},React.DOM.div({className:"modal-dialog"},React.DOM.div({className:"modal-content"},null!=this.props.title?React.DOM.div({className:"modal-header"},null!=this.props.closeLabel?React.DOM.button({type:"button",className:"close",onClick:this.props.closeModal},React.DOM.i({className:"fa fa-times"})):void 0,React.DOM.h4({className:"modal-title"},this.props.title)):void 0,React.DOM.div({className:"modal-body "+e},null!=this.props.subtitle?React.DOM.span(null,this.props.subtitle):void 0,null!=this.props.content?React.DOM.div({ref:"content"},this.props.content):void 0),React.DOM.div({className:"modal-footer"},this.props.allowCopy?React.DOM.button({type:"button",className:"btn btn-cozy modal-copy",onClick:this.copyContent},t("modal copy content")):void 0,null!=this.props.actionLabel&&this.props.action?React.DOM.button({type:"button",className:"btn btn-cozy modal-action",onClick:this.props.action},this.props.actionLabel):void 0,null!=this.props.closeLabel?React.DOM.button({type:"button",className:"btn btn-cozy-non-default modal-close",onClick:this.props.closeModal},this.props.closeLabel):void 0))))},copyContent:function(){var e,t,n;return t=window.getSelection(),t.rangeCount>0&&t.removeAllRanges(),e=document.createRange(),e.selectNode(null!=(n=this.refs.content)?n.getDOMNode():void 0),t.addRange(e),document.execCommand("copy")}})}),require.register("components/panel",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};a=n("./account_config"),s=n("./compose"),c=n("./conversation"),p=n("./message-list"),v=n("./settings"),h=n("./search_result"),b=n("./basic_components").Spinner,f=n("../mixins/router_mixin"),k=n("../mixins/store_watch_mixin"),S=n("../mixins/tooltip_refresher_mixin"),r=n("../stores/account_store"),d=n("../stores/message_store"),g=n("../stores/search_store"),y=n("../stores/settings_store"),l=n("../actions/message_action_creator"),w=n("../constants/app_constants"),i=w.ComposeActions,u=w.MessageFilter,o.exports=m=React.createClass({displayName:"Panel",mixins:[k([r,d,y,g]),S,f],shouldComponentUpdate:function(e,t){var n;return n=!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},render:function(){var e,t;return"account.mailbox.messages"===this.props.action?this.renderList():"search"===this.props.action?(t=encodeURIComponent(g.getCurrentSearch()),h({key:"search-"+t})):"account.config"===this.props.action||"account.new"===this.props.action?(e=this.props.accountID||"new",a({key:"account-config-"+e,tab:this.props.tab})):"message"===this.props.action||"conversation"===this.props.action?c({messageID:this.props.messageID,key:"conversation-"+this.props.messageID,ref:"conversation"}):"compose"===this.props.action||"edit"===this.props.action||"compose.reply"===this.props.action||"compose.reply-all"===this.props.action||"compose.forward"===this.props.action?this.renderCompose():"settings"===this.props.action?v({key:"settings",ref:"settings",settings:this.state.settings}):(console.error("Unknown action "+this.props.action),window.cozyMails.logInfo("Unknown action "+this.props.action),React.DOM.div(null,"Unknown component "+this.props.action))},renderList:function(){var e,n,o,a,s,i,c,m,f,h,g,v,y,b,k;return n=this.props.accountID,h=this.props.mailboxID,e=r.getByID(n),null==e?(setTimeout(function(e){return function(){return e.redirect({direction:"first",action:"default"})}}(this),1),React.DOM.div(null,"redirecting")):(f=e.get("mailboxes").get(h),g=d.getMessagesToDisplay(h,this.state.settings.get("displayConversation")),v=(null!=f?f.get("nbTotal"):void 0)||0,c=function(){switch(this.state.queryParams.filter){case u.FLAGGED:return t("no flagged message");case u.UNSEEN:return t("no unseen message");case u.ALL:return t("list empty");default:return t("no filter message")}}.call(this),this.state.settings.get("displayConversation")&&(a=this.state.currentConversationID,null==a&&g.length>0&&(a=g.first().get("conversationID")),s=d.getConversationsLength()),o=[null!=(y=this.state.selectedAccount)?y.get("trashMailbox"):void 0,null!=(b=this.state.selectedAccount)?b.get("draftMailbox"):void 0,null!=(k=this.state.selectedAccount)?k.get("junkMailbox"):void 0],i=x.call(o,h)>=0?!1:this.state.settings.get("displayConversation"),m=o[0]===h,p({key:"messageList-"+h,messages:g,accountID:n,mailboxID:h,messageID:this.state.currentMessageID,conversationID:a,login:null!=e?e.get("login"):void 0,accounts:this.state.accounts,mailboxes:this.state.mailboxes,settings:this.state.settings,fetching:this.state.fetching,refresh:this.state.refresh,isTrash:m,conversationLengths:s,emptyListMessage:c,ref:"messageList",displayConversations:i,queryParams:this.state.queryParams,canLoadMore:this.state.queryParams.hasNextPage,loadMoreMessage:function(){return l.fetchMoreOfCurrentQuery()}}))},renderCompose:function(){var e,t,n;if(n={layout:"full",action:null,inReplyTo:null,settings:this.state.settings,accounts:this.state.accounts,selectedAccountID:this.state.selectedAccount.get("id"),selectedAccountLogin:this.state.selectedAccount.get("login"),selectedMailboxID:this.props.selectedMailboxID,useIntents:this.props.useIntents,ref:"compose"},e=null,"compose"===this.props.action)t=null,e=s(n);else if("edit"===this.props.action)n.message=d.getByID(this.props.messageID),e=s(n);else if("compose.reply"===this.props.action)n.action=i.REPLY,e=this.getReplyComponent(n);else if("compose.reply-all"===this.props.action)n.action=i.REPLY_ALL,e=this.getReplyComponent(n);else{if("compose.forward"!==this.props.action)throw new Error("unknown compose type : "+this.prop.action);n.action=i.FORWARD,e=this.getReplyComponent(n)}return e},getReplyComponent:function(e){var t,n;return n=d.getByID(this.props.messageID),this.state.isLoadingReply&&null==n?t=b():(n=d.getByID(this.props.messageID),n.set("id",this.props.messageID),e.inReplyTo=n,t=s(e)),t},getStateFromStores:function(){return{accounts:r.getAll(),mailboxes:r.getAllMailboxes(),selectedAccount:r.getSelectedOrDefault(),favoriteMailboxes:r.getSelectedFavorites(),selectedMailboxes:r.getSelectedMailboxes(!0),allMailboxes:r.getAllMailboxes(),accountWaiting:r.isWaiting(),fetching:d.isFetching(),queryParams:d.getQueryParams(),currentMessageID:d.getCurrentID(),conversation:d.getCurrentConversation(),currentConversationID:d.getCurrentConversationID(),settings:y.get(),isLoadingReply:null==d.getByID(this.props.messageID),refresh:r.getMailboxRefresh(this.props.mailboxID)}}})}),require.register("components/participant",function(e,t,n){var o,a,r,s,i,c,l,u=[].slice;l=React.DOM,c=l.span,s=l.a,i=l.i,o=t("../utils/message_utils"),a=React.createClass({displayName:"Participant",render:function(){var e;return e=o.displayAddress(this.props.address),null==this.props.address?c(null):c.apply(null,[{className:"address-item","data-toggle":"tooltip",ref:"participant",title:this.props.address.address,key:this.props.key}].concat(u.call(o.highlightSearch(e))))},_initTooltip:function(){return this.props.tooltip&&null!=this.refs.participant?o.tooltip(this.refs.participant.getDOMNode(),this.props.address,this.props.onAdd):void 0},componentDidMount:function(){return this._initTooltip()},componentDidUpdate:function(){return this._initTooltip()}}),r=React.createClass({displayName:"Participants",render:function(){var e,t;return c({className:"address-list"},function(){var n,o,r,s;if(this.props.participants){for(r=this.props.participants,s=[],t=n=0,o=r.length;o>n;t=++n)e=r[t],s.push(c({key:t,className:null},a({key:t,address:e,onAdd:this.props.onAdd,tooltip:this.props.tooltip}),t<this.props.participants.length-1?c(null,", "):void 0));return s}}.call(this))}}),n.exports=r}),require.register("components/popup_message_attachments",function(e,t,n){var o,a,r,s,i,c;c=React.DOM,r=c.div,i=c.ul,s=c.i,a=t("../constants/app_constants").Tooltips,o=t("./attachement_preview"),n.exports=React.createClass({displayName:"MessageAttachmentsPopup",mixins:[OnClickOutside],getInitialState:function(){return{showAttachements:!1}},toggleAttachments:function(){return this.setState({showAttachements:!this.state.showAttachements})},handleClickOutside:function(){return this.setState({showAttachements:!1})},render:function(){var e,t,n;return e=(null!=(n=this.props.message.get("attachments"))?n.toJS():void 0)||[],r({className:"attachments","aria-expanded":this.state.showAttachements,onClick:function(e){return e.stopPropagation()}},s({className:"btn fa fa-paperclip",onClick:this.toggleAttachments,"aria-describedby":a.OPEN_ATTACHMENTS,"data-tooltip-direction":"left"}),r({className:"popup","aria-hidden":!this.state.showAttachements},i({className:null},function(){var n,a,r;for(r=[],n=0,a=e.length;a>n;n++)t=e[n],r.push(o({ref:"attachmentPreview",file:t,key:t.checksum,preview:!1}));return r}())))}})}),require.register("components/popup_message_details",function(e,n,o){var a,r,s,i,c,l,u,p,d=[].slice;p=React.DOM,r=p.div,i=p.table,c=p.tbody,u=p.tr,l=p.td,s=p.i,a=n("../mixins/participant_mixin"),o.exports=React.createClass({displayName:"PopupMessageDetails",mixins:[a,OnClickOutside],getInitialState:function(){return{showDetails:!1}},toggleDetails:function(){return this.setState({showDetails:!this.state.showDetails})},handleClickOutside:function(){return this.setState({showDetails:!1})},render:function(){var e,n,o,a,p,m,f,h;return o=this.props.message.get("from")[0],f=this.props.message.get("to"),e=this.props.message.get("cc"),p=null!=(h=this.props.message.get("reply-to"))?h[0]:void 0,m=function(e,n,o,a){var r,s;return null==o&&(o=!1),null==a&&(a=!1),s=[],o&&(r={className:"label"},a&&(r.rowSpan=a),s.push(l(r,t(o)))),s.push(l({key:"cell-"+e},n)),u.apply(null,[{key:"row-"+e}].concat(d.call(s)))},r({className:"metas details","aria-expanded":this.state.showDetails,onClick:function(e){return e.stopPropagation()}},s({className:"fa fa-caret-down",onClick:this.toggleDetails}),this.state.showDetails?r({className:"popup","aria-hidden":!this.state.showDetails},i(null,c(null,m("from",this.formatUsers(o),"headers from"),f.length?m("to",this.formatUsers(f[0]),"headers to",f.length):void 0,function(){var e,t,o,r;if(f.length){for(o=f.slice(1),r=[],a=e=0,t=o.length;t>e;a=++e)n=o[a],r.push(m("destTo"+a,this.formatUsers(n)));return r}}.call(this),e.length?m("cc",this.formatUsers(e[0]),"headers cc",e.length):void 0,function(){var t,o,r,s;if(e.length){for(r=e.slice(1),s=[],a=t=0,o=r.length;o>t;a=++t)n=r[a],s.push(m("destCc"+a,this.formatUsers(n)));return s}}.call(this),null!=p?m("reply",this.formatUsers(p),"headers reply-to"):void 0,m("created",this.props.message.get("createdAt"),"headers date")))):void 0)}})}),require.register("components/search_bar",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g;g=React.DOM,f=g.div,m=g.button,h=g.i,u=n("./search_input"),r=n("./account_picker"),l=n("../mixins/router_mixin"),c=n("../actions/layout_action_creator"),d=n("../mixins/store_watch_mixin"),s=n("../stores/account_store"),p=n("../stores/search_store"),a=n("../actions/account_action_creator"),o.exports=i=React.createClass({displayName:"GlobalSearchBar",mixins:[l,d([s,p])],render:function(){return f({className:"search-bar"},h({className:"fa fa-search"}),r({accounts:this.state.accounts,valueLink:{value:this.state.accountID||"all",requestChange:this.onAccountChanged}}),u({value:this.state.search||"",placeholder:t("filters search placeholder"),onSubmit:this.onSearchTriggered}))},onSearchTriggered:function(e){var t;return""!==e?this.redirect({direction:"first",action:"search",parameters:[this.state.accountID,e]}):(this.setState({search:""}),t=this.state.accountID,"all"===this.state.accountID&&(t=null),this.redirect({direction:"first",action:"account.mailbox.messages",parameters:[t]}))},onAccountChanged:function(e){var t,n;return t=null!=(n=s.getSelected())?n.get("id"):void 0,""!==this.state.search?this.redirect({direction:"first",action:"search",parameters:[e,this.state.search]}):"all"!==e&&e!==t?this.redirect({direction:"first",action:"account.mailbox.messages",parameters:[e]}):this.setState({accountID:e})},getStateFromStores:function(){var e,n,o,a;return n=s.getAll().map(function(e){return e.get("label")}).toOrderedMap().set("all",t("search all accounts")),e=(null!=(a=s.getSelected())?a.get("id"):void 0)||"all",o=p.getCurrentSearch(),{accounts:n,search:o,accountID:e}}})}),require.register("components/search_input",function(e,t,n){var o,a,r,s;s=React.DOM,a=s.div,r=s.input,o=s.button,n.exports=React.createClass({displayName:"SearchInput",getInitialState:function(){return{value:this.props.value}},componentWillReceiveProps:function(e){return this.setState({value:e.value})},onChange:function(e){return this.setState({value:e.target.value})},onKeyUp:function(e){return this.setState({value:e.target.value}),"Enter"===e.key&&(null!=e&&e.preventDefault(),null!=e&&e.stopPropagation(),this.props.onSubmit(e.target.value)),"Escape"===e.key?this.onResetClick():void 0},onCheckClick:function(e){return null!=e&&"function"==typeof e.preventDefault&&e.preventDefault(),null!=e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),this.props.onSubmit(this.state.value)},onResetClick:function(e){return this.setState({value:""}),null!=e&&"function"==typeof e.preventDefault&&e.preventDefault(),null!=e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),this.props.onSubmit("")},render:function(){return a({role:"search"},r({type:"text",placeholder:this.props.placeholder,value:this.state.value,onChange:this.onChange,onKeyUp:this.onKeyUp,name:"searchterm"}),0!==this.state.value.length?a({className:"btn-group"},o({className:"btn fa fa-check",onClick:this.onCheckClick}),o({className:"btn fa fa-close",onClick:this.onResetClick})):void 0)}})}),require.register("components/search_result",function(e,n,o){var a,r,s,i,c,l,u,p;s=n("./message-list"),r=n("../actions/message_action_creator"),u=n("../mixins/store_watch_mixin"),i=n("../stores/message_store"),a=n("../stores/account_store"),c=n("../stores/search_store"),l=n("../stores/settings_store"),p=React.DOM.div,o.exports=React.createClass({displayName:"searchResults",mixins:[u([a,c])],getStateFromStores:function(){var e,n,o;return n=c.getCurrentSearch(),e=c.getCurrentSearchAccountID(),"all"===e&&(e=null),o={currentSearchKey:c.getCurrentSearchKey(),currentSearchResults:c.getCurrentSearchResults(),conversationLengths:i.getConversationsLength(),settings:l.get(),accountID:e,currentMessageID:i.getCurrentID(),currentConversationID:i.getCurrentConversationID(),accounts:a.getAll(),mailboxes:a.getAllMailboxes(),displayConversations:!0,canLoadMore:c.hasMoreSearch(),emptyListMessage:t("list search empty",{query:n})}},render:function(){return s({noFilters:!0,messages:this.state.currentSearchResults,accountID:this.state.accountID,messageID:this.state.currentMessageID,conversationID:this.state.currentConversationID,accounts:this.state.accounts,mailboxes:this.state.mailboxes,settings:this.state.settings,conversationLengths:this.state.conversationLengths,emptyListMessage:this.state.emptyListMessage,displayConversations:this.state.displayConversations,queryParams:null,canLoadMore:this.state.canLoadMore,loadMoreMessage:function(){return r.fetchSearchResults()}})}})}),require.register("components/settings",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x,E={}.hasOwnProperty;x=React.DOM,d=x.div,h=x.h3,f=x.form,y=x.label,v=x.input,u=x.button,m=x.fieldset,b=x.legend,w=x.ul,k=x.li,l=x.a,S=x.span,g=x.i,p=React.addons.classSet,s=n("../actions/layout_action_creator"),c=n("../actions/settings_action_creator"),i=n("../utils/plugin_utils"),a=n("../utils/api_utils"),r=n("../constants/app_constants").Dispositions,o.exports=React.createClass({displayName:"Settings",render:function(){var e,n,o,a,s,i;return n="col-sm-5 col-sm-offset-1 control-label",e="col-sm-6",o=this.state.settings.layoutStyle||"vertical",a=this.state.settings.listStyle||"default",d({id:"settings"},h({className:null},t("settings title")),this.props.error?d({className:"error"},this.props.error):void 0,f({className:"form-horizontal"},d({className:"form-group"},y({htmlFor:"settings-layoutStyle",className:n},t("settings label layoutStyle")),d({className:e},d({className:"dropdown"},u({id:"settings-layoutStyle",className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown"},t("settings label layoutStyle "+o)),w({className:"dropdown-menu",role:"menu"},k({role:"presentation","data-target":"layoutStyle","data-style":r.VERTICAL,onClick:this.handleChange},l({role:"menuitem"},t("settings label layoutStyle vertical"))),k({role:"presentation","data-target":"layoutStyle","data-style":r.HORIZONTAL,onClick:this.handleChange},l({role:"menuitem"},t("settings label layoutStyle horizontal"))),k({role:"presentation","data-target":"layoutStyle","data-style":r.THREE,onClick:this.handleChange},l({role:"menuitem"},t("settings label layoutStyle three"))))))),d({className:"form-group"},y({htmlFor:"settings-listStyle",className:n},t("settings label listStyle")),d({className:e},d({className:"dropdown"},u({id:"settings-listStyle",className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown"},t("settings label listStyle "+a)),w({className:"dropdown-menu",role:"menu"},k({role:"presentation","data-target":"listStyle","data-style":"default",onClick:this.handleChange},l({role:"menuitem"},t("settings label listStyle default"))),k({role:"presentation","data-target":"listStyle","data-style":"compact",onClick:this.handleChange},l({role:"menuitem"},t("settings label listStyle compact")))))))),this._renderOption("displayConversation"),this._renderOption("composeInHTML"),this._renderOption("composeOnTop"),this._renderOption("messageDisplayHTML"),this._renderOption("messageDisplayImages"),this._renderOption("messageConfirmDelete"),this._renderOption("displayPreview"),this._renderOption("desktopNotifications"),this._renderOption("autosaveDraft"),m(null,b(null,t("settings plugins")),function(){var e,o;e=this.state.settings.plugins,o=[];for(i in e)E.call(e,i)&&(s=e[i],o.push(f({className:"form-horizontal",key:i},d({className:"form-group"},y({className:n,htmlFor:"settings-plugin-"+i},t("plugin name "+s.name,{_:s.name})),d({className:"col-sm-1"},null!=s.url?S({className:"clickable",onClick:this.pluginDel,"data-plugin":i,title:t("settings plugin del")},g({className:"fa fa-trash-o"})):v({id:"settings-plugin-"+i,checked:s.active,onChange:this.handleChange,"data-target":"plugin","data-plugin":i,type:"checkbox"})),window.plugins[i].onHelp?d({className:"col-sm-1 plugin-help"},S({className:"clickable",onClick:this.pluginHelp,"data-plugin":i,title:t("settings plugin help")},g({className:"fa fa-question-circle"}))):void 0))));return o}.call(this),f({className:"form-horizontal",key:i},d({className:"form-group"},d({className:"col-xs-4"},v({id:"newpluginName",name:"newpluginName",ref:"newpluginName",type:"text",className:"form-control",placeholder:t("settings plugin new name")})),d({className:"col-xs-6"},v({id:"newpluginUrl",name:"newpluginUrl",ref:"newpluginUrl",type:"text",className:"form-control",placeholder:t("settings plugin new url")})),S({className:"col-xs-1 clickable",onClick:this.pluginAdd,title:t("settings plugin add")},g({className:"fa fa-plus"}))))))},_renderOption:function(e){var n,o;return o="col-sm-5 col-sm-offset-1 control-label",n="col-sm-6",f({className:"form-horizontal"},d({className:"form-group"},y({htmlFor:"settings-"+e,className:o},t("settings label "+e)),d({className:n},v({id:"settings-"+e,checked:this.state.settings[e],onChange:this.handleChange,"data-target":e,type:"checkbox"}))))},handleChange:function(e){var t,n,o,a,r,l;switch(e.preventDefault(),r=e.currentTarget,r.dataset.target){case"autosaveDraft":case"composeInHTML":case"composeOnTop":case"desktopNotifications":case"displayConversation":case"displayPreview":case"messageConfirmDelete":case"messageDisplayHTML":case"messageDisplayImages":if(a=this.state.settings,a[r.dataset.target]=r.checked,this.setState({settings:a}),c.edit(a),null!=window.Notification&&a.desktopNotifications)return Notification.requestPermission(function(e){return Notification.permission!==e?Notification.permission=e:void 0});break;case"layoutStyle":return a=this.state.settings,a.layoutStyle=r.dataset.style,s.setDisposition(a.layoutStyle),this.setState({settings:a}),c.edit(a);case"listStyle":return a=this.state.settings,a.listStyle=r.dataset.style,this.setState({settings:a}),c.edit(a);case"plugin":t=r.dataset.plugin,a=this.state.settings,r.checked?i.activate(t):i.deactivate(t),l=a.plugins;for(o in l)E.call(l,o)&&(n=l[o],n.active=window.plugins[o].active);return this.setState({settings:a}),c.edit(a)}},pluginAdd:function(){var e,t;return e=this.refs.newpluginName.getDOMNode().value.trim(),t=this.refs.newpluginUrl.getDOMNode().value.trim(),i.loadJS(t,function(n){return function(){var o;return i.activate(e),o=n.state.settings,o.plugins[e]={name:e,active:!0,url:t},n.setState({settings:o}),c.edit(o)}}(this))},pluginDel:function(e){var t,n,o;return e.preventDefault(),o=e.currentTarget,t=o.dataset.plugin,n=this.state.settings,i.deactivate(t),delete n.plugins[t],this.setState({settings:n}),c.edit(n)},pluginHelp:function(e){var t,n;return e.preventDefault(),n=e.currentTarget,t=n.dataset.plugin,window.plugins[t].onHelp()},registerMailto:function(){var e;return e=window.location,window.navigator.registerProtocolHandler("mailto",""+e.origin+e.pathname+"#compose?mailto=%s","Cozy")},getInitialState:function(e){var t;return t=this.props.settings.toObject(),{settings:this.props.settings.toObject()}}})}),require.register("components/toast",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b,k,S,w,x;w=React.DOM,m=w.a,v=w.h4,b=w.pre,g=w.div,f=w.button,k=w.span,S=w.strong,y=w.i,u=n("../utils/socketio_utils"),s=n("../app_dispatcher"),p=n("../mixins/store_watch_mixin"),l=n("../stores/layout_store"),c=n("../actions/layout_action_creator"),x=n("../constants/app_constants"),a=x.ActionTypes,r=x.AlertLevel,i=React.addons.CSSTransitionGroup,h=React.addons.classSet,o.exports=d=React.createClass({displayName:"Toast",render:function(){var e,n,o,a,s;return a=this.props.toast.toJS(),o=null!=(s=a.errors)?s.length:void 0,n=h({toast:!0,"alert-dismissible":a.finished,"toast-error":a.level===r.ERROR}),g({className:n,role:"alert",key:this.props.key},a.message?g({className:"message"},a.message):void 0,a.finished||o?f({type:"button",className:"close",onClick:this.acknowledge},k({"aria-hidden":"true"},"×"),k({className:"sr-only"},t("app alert close"))):void 0,null!=a.actions?(e="btn btn-cancel btn-cozy-non-default btn-xs",g({className:"toast-actions"},a.actions.map(function(t,n){return f({className:e,type:"button",key:n,onClick:t.onClick},t.label)}))):void 0,o?(e="btn btn-cancel btn-cozy-non-default btn-xs",g({className:"toast-actions"},f({className:e,type:"button",key:"errors",onClick:this.onModalShowClicked},t("there were errors",{smart_count:a.errors.length})))):void 0)},onModalShowClicked:function(){var e;return e=JSON.stringify(this.props.toast.get("errors")[0]),c.displayModal({title:t("modal please contribute"),subtitle:t("modal please report"),closeLabel:t("app alert close"),content:b({style:{"max-height":"300px","word-wrap":"normal"}},e)})},acknowledge:function(){return s.handleViewAction({type:a.RECEIVE_TASK_DELETE,value:this.props.toast.get("id")})}})}),require.register("components/toast_container",function(e,t,n){var o,a,r,s,i,c,l,u;u=React.DOM.div,i=t("./toast"),s=t("../mixins/store_watch_mixin"),r=t("../stores/layout_store"),a=t("../actions/layout_action_creator"),o=React.addons.CSSTransitionGroup,l=React.addons.classSet,n.exports=c=React.createClass({displayName:"ToastContainer",mixins:[s([r])],getStateFromStores:function(){return{toasts:r.getToasts(),hidden:!r.isShown()}},shouldComponentUpdate:function(e,t){var n,o;return o=_.isEqual(t,this.state),n=_.isEqual(e,this.props),!(o&&n)},render:function(){var e,t;return t=this.state.toasts.map(function(e,t){return i({toast:e,key:t})}).toVector().toJS(),e=l({"toasts-container":!0,"action-hidden":this.state.hidden,"has-toasts":0!==t.length}),u({className:e},o({transitionName:"toast"},t))},toggleHidden:function(){return this.state.hidden?a.toastsShow():a.toastsHide()},_clearToasts:function(){return setTimeout(function(){var e;return e=document.querySelectorAll(".toast-enter"),Array.prototype.forEach.call(e,function(e){return e.classList.add("hidden")})},1e4)},closeAll:function(){return a.clearToasts()},componentDidMount:function(){return this._clearToasts()},componentDidUpdate:function(){return this._clearToasts()}})}),require.register("components/toolbar_conversation",function(e,t,n){var o,a,r,s,i,c,l,u,p,d,m;m=React.DOM,d=m.nav,p=m.div,l=m.button,c=m.a,i=t("../constants/app_constants").Tooltips,u=React.addons.classSet,a=t("../stores/layout_store"),o=t("../actions/layout_action_creator"),r=t("../mixins/router_mixin"),s=t("../mixins/store_watch_mixin"),n.exports=React.createClass({displayName:"ToolbarConversation",mixins:[r,s([a])],propTypes:{nextMessageID:React.PropTypes.string,nextConversationID:React.PropTypes.string,prevMessageID:React.PropTypes.string,prevConversationID:React.PropTypes.string,settings:React.PropTypes.object.isRequired},getStateFromStores:function(){return{fullscreen:a.isPreviewFullscreen()}},getUrlParams:function(e,t){var n,o,a;return this.props.settings.get(null!=t)?(n="conversation",o={messageID:e,conversationID:t}):(n="message",o={messageID:e}),a={direction:"second",action:n,parameters:o}},render:function(){return d({className:"toolbar toolbar-conversation btn-toolbar"},p({className:"btn-group"},this.renderNav("prev"),this.renderNav("next")),this.renderFullscreen())},renderNav:function(e){var t,n,o,a,r;if(null!=this.props[""+e+"MessageID"])return o=this.props[""+e+"MessageID"],n=this.props[""+e+"ConversationID"],"prev"===e?(a=i.PREVIOUS_CONVERSATION,t="left"):(a=i.NEXT_CONVERSATION,t="right"),r=this.getUrlParams(o,n),c({className:"btn btn-default fa fa-chevron-"+t,onClick:function(e){return function(){return e.redirect(r)}}(this),href:this.buildUrl(r),"aria-describedby":a,"data-tooltip-direction":"left"})},renderFullscreen:function(){return l({onClick:o.toggleFullscreen,className:u({clickable:!0,btn:!0,"btn-default":!0,fa:!0,fullscreen:!0,"fa-compress":this.state.fullscreen,"fa-expand":!this.state.fullscreen})})}})}),require.register("components/toolbar_message",function(e,t,n){var o,a,r,s,i,c,l,u,p,d,m,f,h,g,v,y,b=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};v=React.DOM,g=v.nav,h=v.div,d=v.button,l=v.a,y=t("../constants/app_constants"),r=y.MessageFlags,o=y.FlagsConstants,c=y.Tooltips,s=t("./toolbox_actions"),i=t("./toolbox_move"),a=t("../actions/layout_action_creator"),u=a.alertError,p=a.notify,f="btn-group btn-group-sm pull-right",m="btn btn-default fa",n.exports=React.createClass({displayName:"ToolbarMessage",propTypes:{message:React.PropTypes.object.isRequired,mailboxes:React.PropTypes.object.isRequired,selectedMailboxID:React.PropTypes.string.isRequired,onDelete:React.PropTypes.func.isRequired,onMove:React.PropTypes.func.isRequired,onHeaders:React.PropTypes.func.isRequired},render:function(){return g({className:"toolbar toolbar-message btn-toolbar",onClick:function(e){return e.stopPropagation()}},this.props.full?h({className:f},this.renderToolboxMove(),this.renderToolboxActions()):void 0,this.props.full?this.renderQuickActions():void 0,this.renderReply())},renderReply:function(){return h({className:f},l({className:""+m+" fa-mail-reply mail-reply",href:"#reply/"+this.props.message.get("id"),"aria-describedby":c.REPLY,"data-tooltip-direction":"top"}),l({className:""+m+" fa-mail-reply-all mail-reply-all",href:"#reply-all/"+this.props.message.get("id"),"aria-describedby":c.REPLY_ALL,"data-tooltip-direction":"top"}),l({className:""+m+" fa-mail-forward mail-forward",href:"#forward/"+this.props.message.get("id"),"aria-describedby":c.FORWARD,"data-tooltip-direction":"top"}))},renderQuickActions:function(){return h({className:f},d({className:""+m+" fa-trash",onClick:this.props.onDelete,"aria-describedby":c.REMOVE_MESSAGE,"data-tooltip-direction":"top"}))},renderToolboxActions:function(){var e,t,n,a,r;return e=this.props.message.get("flags")||[],a=o.FLAGGED,t=b.call(e,a)>=0,r=o.SEEN,n=b.call(e,r)>=0,s({ref:"toolboxActions",mailboxes:this.props.mailboxes,inConversation:this.props.inConversation,isSeen:n,isFlagged:t,messageID:this.props.message.get("id"),message:this.props.message,onMark:this.props.onMark,onHeaders:this.props.onHeaders,onConversationMark:this.props.onConversationMark,onConversationMove:this.props.onConversationMove,onConversationDelete:this.props.onConversationMove,direction:"right",displayConversations:!1})},renderToolboxMove:function(){return i({ref:"toolboxMove",mailboxes:this.props.mailboxes,onMove:this.props.onMove,direction:"right"})}})}),require.register("components/toolbar_messageslist",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f;f=React.DOM,u=f.aside,m=f.i,p=f.button,d=React.addons.classSet,r=n("./toolbar_messageslist_filters"),a=n("./toolbar_messageslist_actions"),c=n("./search_bar"),s=n("../actions/layout_action_creator"),i=n("../mixins/router_mixin"),o.exports=l=React.createClass({displayName:"ToolbarMessagesList",mixins:[i],propTypes:{settings:React.PropTypes.object.isRequired,accountID:React.PropTypes.string.isRequired,mailboxID:React.PropTypes.string.isRequired,mailboxes:React.PropTypes.object.isRequired,messages:React.PropTypes.object.isRequired,edited:React.PropTypes.bool.isRequired,selected:React.PropTypes.object.isRequired,allSelected:React.PropTypes.bool.isRequired,displayConversations:React.PropTypes.bool.isRequired,toggleEdited:React.PropTypes.func.isRequired,toggleAll:React.PropTypes.func.isRequired,afterAction:React.PropTypes.func},onFilterChange:function(e){var t,n,o,a,r,s,i,c;switch(s="-",r="date",n="-",t="-",o="-",i=e.type,a=s+r,i){case"from":case"dest":e.value&&(n=e.value,t=""+e.value+"￿");break;case"date":e.range&&(c=e.range,n=c[0],t=c[1]);break;case"flag":e.value&&(o=e.value)}return window.cozyMails.messageClose(),this.redirect({direction:"first",action:"account.mailbox.messages",parameters:[this.props.accountID,this.props.mailboxID,a,i,o,n,t]})},render:function(){
return u({role:"toolbar"},p({className:"drawer-toggle",onClick:s.drawerToggle,title:t("menu toggle")},m({className:"fa fa-navicon"})),p({role:"menuitem","aria-selected":this.props.edited,onClick:this.props.toggleAll},m({className:d({fa:!0,"fa-square-o":!this.props.edited,"fa-check-square-o":this.props.allSelected,"fa-minus-square-o":this.props.edited&&!this.props.allSelected})})),this.props.edited?a({settings:this.props.settings,mailboxID:this.props.mailboxID,mailboxes:this.props.mailboxes,messages:this.props.messages,selected:this.props.selected,displayConversations:this.props.displayConversations,afterAction:this.props.afterAction}):this.props.noFilters?void 0:r({accountID:this.props.accountID,mailboxID:this.props.mailboxID,queryParams:this.props.queryParams,onFilterChange:this.onFilterChange}),c())}})}),require.register("components/toolbar_messageslist_actions",function(e,n,o){var a,r,s,i,c,l,u,p,d,m;m=React.DOM,p=m.div,d=m.i,u=m.button,l=n("../constants/app_constants").Tooltips,i=n("./toolbox_actions"),c=n("./toolbox_move"),r=n("../actions/layout_action_creator"),s=n("../actions/message_action_creator"),o.exports=a=React.createClass({displayName:"ActionsToolbarMessagesList",propTypes:{settings:React.PropTypes.object.isRequired,mailboxID:React.PropTypes.string.isRequired,mailboxes:React.PropTypes.object.isRequired,messages:React.PropTypes.object.isRequired,selected:React.PropTypes.object.isRequired,displayConversations:React.PropTypes.bool.isRequired,afterAction:React.PropTypes.func},_hasSelection:function(){return Object.keys(this.props.selected).length>0},_getSelectedAndMode:function(e){var n,o,a;return a=Object.keys(this.props.selected),o=a.length,e=Boolean(e),null==e&&(e=this.props.displayConversations),0===a.length?(r.alertError(t("list mass no message")),!1):e?(n=a.map(function(e){return function(t){return e.props.messages.get(t).get("conversationID")}}(this)),{count:o,conversationIDs:n,applyToConversation:e}):{count:o,messageIDs:a,applyToConversation:e}},render:function(){return p({role:"group"},u({role:"menuitem",onClick:this.onDelete,"aria-disabled":this._hasSelection(),"aria-describedby":l.DELETE_SELECTION,"data-tooltip-direction":"bottom"},d({className:"fa fa-trash-o"})),this.props.displayConversations?void 0:c({ref:"listToolboxMove",mailboxes:this.props.mailboxes,onMove:this.onMove,direction:"left"}),i({ref:"listToolboxActions",direction:"left",mailboxes:this.props.mailboxes,inConversation:!0,displayConversations:this.props.displayConversations,onMark:this.onMark,onConversationDelete:this.onConversationDelete,onConversationMark:this.onConversationMark,onConversationMove:this.onConversationMove}))},onDelete:function(e){var n,o,a,i,c;if(c=this._getSelectedAndMode(e))return a=c.applyToConversation?t("list delete conv confirm",{smart_count:c.count}):t("list delete confirm",{smart_count:c.count}),n=function(e){return function(){return s["delete"](c,function(){var t;return c.count>0&&e.props.messages.count()>0?(t=e.props.messages.first().get("id"),s.setCurrent(t,!0)):void 0}),null!=e.props.afterAction?e.props.afterAction():void 0}}(this),i=!this.props.settings.get("messageConfirmDelete"),i?n():(o={title:t("app confirm delete"),subtitle:a,closeLabel:t("app cancel"),actionLabel:t("app confirm"),action:function(){return n(),r.hideModal()}},r.displayModal(o))},onMove:function(e,t){var n,o;if(o=this._getSelectedAndMode(t))return n=this.props.mailboxID,s.move(o,n,e,function(e){return function(){var t;return o.count>0&&e.props.messages.count()>0?(t=e.props.messages.first().get("id"),s.setCurrent(t,!0)):void 0}}(this)),null!=this.props.afterAction?this.props.afterAction():void 0},onMark:function(e,t){var n;if(n=this._getSelectedAndMode(t))return s.mark(n,e)},onConversationDelete:function(){return this.onDelete(!0)},onConversationMove:function(e){return this.onMove(e,!0)},onConversationMark:function(e){return this.onMark(e,!0)}})}),require.register("components/toolbar_messageslist_filters",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v;g=React.DOM,p=g.div,h=g.ul,m=g.li,f=g.span,d=g.i,u=g.button,v=n("../constants/app_constants"),i=v.MessageFilter,l=v.Tooltips,c=n("../mixins/router_mixin"),s=n("../actions/layout_action_creator"),a=n("./date_range_picker"),o.exports=r=React.createClass({displayName:"FiltersToolbarMessagesList",propTypes:{accountID:React.PropTypes.string.isRequired,mailboxID:React.PropTypes.string.isRequired},getInitialState:function(){return{expanded:!1}},shouldComponentUpdate:function(e,t){var n;return n=!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},onDateFilter:function(e,t){var n;return n=e&&t?[e,t]:null,this.props.onFilterChange({type:"date",range:n})},toggleFilters:function(e){var t;return t="flag"===this.props.queryParams.type&&this.props.queryParams.filter===e,this.props.onFilterChange({type:"flag",value:t?"-":e})},render:function(){var e;return e="flag"===this.props.queryParams.type&&this.props.queryParams.filter,p({role:"group",className:"filters","aria-expanded":this.state.expanded},u({role:"presentation",onClick:function(e){return function(){return e.setState({expanded:!e.state.expanded})}}(this)},d({className:"fa fa-filter"})),u({role:"menuitem","aria-selected":e===i.UNSEEN,onClick:function(e){return function(){return e.toggleFilters(i.UNSEEN)}}(this),"aria-describedby":l.FILTER_ONLY_UNREAD,"data-tooltip-direction":"bottom"},d({className:"fa fa-eye"}),f({className:"btn-label"},t("filters unseen"))),u({role:"menuitem","aria-selected":e===i.FLAGGED,onClick:function(e){return function(){return e.toggleFilters(i.FLAGGED)}}(this),"aria-describedby":l.FILTER_ONLY_IMPORTANT,"data-tooltip-direction":"bottom"},d({className:"fa fa-star"}),f({className:"btn-label"},t("filters flagged"))),u({role:"menuitem","aria-selected":e===i.ATTACH,onClick:function(e){return function(){return e.toggleFilters(i.ATTACH)}}(this),"aria-describedby":l.FILTER_ONLY_WITH_ATTACHMENT,"data-tooltip-direction":"bottom"},d({className:"fa fa-paperclip"}),f({className:"btn-label"},t("filters attach"))),a({active:"date"===this.props.queryParams.type,onDateFilter:this.onDateFilter}))}})}),require.register("components/toolbar_messageslist_search",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v,y;v=React.DOM,d=v.div,h=v.i,p=v.button,g=v.input,f=v.form,a=n("./basic_components").Dropdown,y=n("../constants/app_constants"),s=y.MessageFilter,u=y.Tooltips,c=n("./search_input"),i=n("../mixins/router_mixin"),r=n("../actions/layout_action_creator"),m={from:t("list filter from"),dest:t("list filter dest")},o.exports=l=React.createClass({displayName:"SearchToolbarMessagesList",propTypes:{accountID:React.PropTypes.string.isRequired,mailboxID:React.PropTypes.string.isRequired},getInitialState:function(){return{type:"from",value:""}},prevent:function(e){return e.preventDefault()},onTypeChange:function(e){return this.setState({type:e,value:""})},onValueChange:function(e){return this.props.onFilterChange({type:this.state.type,value:e})},render:function(){return f({role:"group",className:"search",onSubmit:this.prevent},a({options:m,valueLink:{value:this.state.type,requestChange:this.onTypeChange}}),c({value:this.state.value,placeholder:t("filters search placeholder"),onSubmit:this.onValueChange}))}})}),require.register("components/toolbox_actions",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g,v=[].slice;h=React.DOM,p=h.div,f=h.ul,d=h.li,m=h.span,l=h.a,u=h.button,g=n("./basic_components"),s=g.MenuHeader,i=g.MenuItem,r=g.MenuDivider,a=n("../constants/app_constants").FlagsConstants,o.exports=c=React.createClass({displayName:"ToolboxActions",propTypes:{direction:React.PropTypes.string.isRequired,displayConversations:React.PropTypes.bool.isRequired,isFlagged:React.PropTypes.bool,isSeen:React.PropTypes.bool,mailboxes:React.PropTypes.object.isRequired,message:React.PropTypes.object,messageID:React.PropTypes.string,onConversationDelete:React.PropTypes.func.isRequired,onConversationMark:React.PropTypes.func.isRequired,onConversationMove:React.PropTypes.func.isRequired,onHeaders:React.PropTypes.func,onMark:React.PropTypes.func.isRequired},shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},render:function(){var e;return e="right"===this.props.direction?"right":"left",p({className:"menu-action btn-group btn-group-sm"},u({className:"btn btn-default dropdown-toggle fa fa-cog",type:"button","data-toggle":"dropdown"}," ",m({className:"caret"})),f.apply(null,[{className:"dropdown-menu dropdown-menu-"+e,role:"menu"},this.props.displayConversations?void 0:this.renderMarkActions(),this.props.displayConversations?void 0:r()].concat(v.call(this.renderRawActions()),[this.props.inConversation?this.renderConversationActions():void 0],[this.props.inConversation?r({key:"divider"}):void 0],[this.props.inConversation?s({key:"header-move"},t("mail action conversation move")):void 0],[this.props.inConversation?this.renderMailboxes():void 0])))},renderMarkActions:function(){var e;return e=[s({key:"header-mark"},t("mail action mark")),null!=this.props.isSeen&&this.props.isSeen?void 0:i({key:"action-mark-seen",onClick:this.props.onMark,onClickValue:a.SEEN},t("mail mark read")),null==this.props.isSeen||this.props.isSeen?i({key:"action-mark-unseen",onClick:this.props.onMark,onClickValue:a.UNSEEN},t("mail mark unread")):void 0,null==this.props.isFlagged||this.props.isFlagged?i({key:"action-mark-noflag",onClick:this.props.onMark,onClickValue:a.NOFLAG},t("mail mark nofav")):void 0,null!=this.props.isFlagged&&this.props.isFlagged?void 0:i({key:"action-mark-flagged",onClick:this.props.onMark,onClickValue:a.FLAGGED},t("mail mark fav"))],e.filter(function(e){return Boolean(e)})},renderRawActions:function(){var e;return e=[this.props.displayConversations?void 0:s({key:"header-more"},t("mail action more")),null!=this.props.messageID?i({key:"action-headers",onClick:this.props.onHeaders},t("mail action headers")):void 0,null!=this.props.message?i({key:"action-raw",href:"raw/"+this.props.message.get("id"),target:"_blank"},t("mail action raw")):void 0],e.filter(function(e){return Boolean(e)})},renderConversationActions:function(){var e;return e=[i({key:"conv-delete",onClick:this.props.onConversationDelete},t("mail action conversation delete")),i({key:"conv-seen",onClick:this.props.onConversationMark,onClickValue:a.SEEN},t("mail action conversation seen")),i({key:"conv-unseen",onClick:this.props.onConversationMark,onClickValue:a.UNSEEN},t("mail action conversation unseen")),i({key:"conv-flagged",onClick:this.props.onConversationMark,onClickValue:a.FLAGGED},t("mail action conversation flagged")),i({key:"conv-noflag",onClick:this.props.onConversationMark,onClickValue:a.NOFLAG},t("mail action conversation noflag"))]},renderMailboxes:function(){return this.props.mailboxes.filter(function(e){return function(t,n){return n!==e.props.selectedMailboxID}}(this)).map(function(e){return function(t,n){return i({key:n,className:"pusher pusher-"+t.get("depth"),onClick:e.props.onConversationMove,onClickValue:n},t.get("label"))}}(this)).toJS()}})}),require.register("components/toolbox_move",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f,h,g;h=React.DOM,l=h.div,f=h.ul,p=h.li,m=h.span,u=h.i,d=h.p,i=h.a,c=h.button,g=n("./basic_components"),a=g.MenuHeader,r=g.MenuItem,o.exports=s=React.createClass({displayName:"ToolboxMove",shouldComponentUpdate:function(e,t){return!_.isEqual(t,this.state)||!_.isEqual(e,this.props)},render:function(){var e;return e="right"===this.props.direction?"right":"left",l({className:"menu-move btn-group btn-group-sm"},c({className:"btn btn-default dropdown-toggle fa fa-folder-open",type:"button","data-toggle":"dropdown"}," ",m({className:"caret"})),f({className:"dropdown-menu dropdown-menu-"+e,role:"menu"},a(null,t("mail action move")),this.renderMailboxes()))},renderMailboxes:function(){return this.props.mailboxes.filter(function(e){return function(t,n){return n!==e.props.selectedMailboxID}}(this)).map(function(e){return function(t,n){return r({key:n,className:"pusher pusher-"+t.get("depth"),onClick:e.props.onMove,onClickValue:n},t.get("label"))}}(this)).toJS()}})}),require.register("components/tooltips-manager",function(e,n,o){var a,r,s,i;a=n("../constants/app_constants").Tooltips,i=React.DOM,r=i.div,s=i.p,o.exports=React.createClass({displayName:"TooltipManager",shouldComponentUpdate:function(){return!1},render:function(){return r(null,this.getTooltip(a.REPLY,t("tooltip reply")),this.getTooltip(a.REPLY_ALL,t("tooltip reply all")),this.getTooltip(a.FORWARD,t("tooltip forward")),this.getTooltip(a.REMOVE_MESSAGE,t("tooltip remove message")),this.getTooltip(a.OPEN_ATTACHMENTS,t("tooltip open attachments")),this.getTooltip(a.OPEN_ATTACHMENT,t("tooltip open attachment")),this.getTooltip(a.DOWNLOAD_ATTACHMENT,t("tooltip download attachment")),this.getTooltip(a.PREVIOUS_CONVERSATION,t("tooltip previous conversation")),this.getTooltip(a.NEXT_CONVERSATION,t("tooltip next conversation")),this.getTooltip(a.FILTER_ONLY_UNREAD,t("tooltip filter only unread")),this.getTooltip(a.FILTER_ONLY_IMPORTANT,t("tooltip filter only important")),this.getTooltip(a.FILTER_ONLY_WITH_ATTACHMENT,t("tooltip filter only attachment")),this.getTooltip(a.ACCOUNT_PARAMETERS,t("tooltip account parameters")),this.getTooltip(a.DELETE_SELECTION,t("tooltip delete selection")),this.getTooltip(a.FILTER,t("tooltip filter")),this.getTooltip(a.QUICK_FILTER,t("tooltip display filters")),this.getTooltip(a.EXPUNGE_MAILBOX,t("tooltip expunge mailbox")),this.getTooltip(a.HELP_SHORTCUTS,t("tooltip help shortcuts")),this.getTooltip(a.ADD_CONTACT,t("tooltip add contact")),this.getTooltip(a.SHOW_CONTACT,t("tooltip show contact")))},getTooltip:function(e,t){return s({id:e,role:"tooltip","aria-hidden":"true"},t)}})}),require.register("constants/app_constants",function(e,t,n){n.exports={ActionTypes:{CHECK_ACCOUNT_REQUEST:"CHECK_ACCOUNT_REQUEST",CHECK_ACCOUNT_SUCCESS:"CHECK_ACCOUNT_SUCCESS",CHECK_ACCOUNT_FAILURE:"CHECK_ACCOUNT_FAILURE",ADD_ACCOUNT_REQUEST:"ADD_ACCOUNT_REQUEST",ADD_ACCOUNT_SUCCESS:"ADD_ACCOUNT_SUCCESS",ADD_ACCOUNT_FAILURE:"ADD_ACCOUNT_FAILURE",REMOVE_ACCOUNT_REQUEST:"REMOVE_ACCOUNT_REQUEST",REMOVE_ACCOUNT_SUCCESS:"REMOVE_ACCOUNT_SUCCESS",REMOVE_ACCOUNT_FAILURE:"REMOVE_ACCOUNT_FAILURE",EDIT_ACCOUNT_REQUEST:"EDIT_ACCOUNT_REQUEST",EDIT_ACCOUNT_SUCCESS:"EDIT_ACCOUNT_SUCCESS",EDIT_ACCOUNT_FAILURE:"EDIT_ACCOUNT_FAILURE",SELECT_ACCOUNT:"SELECT_ACCOUNT",NEW_ACCOUNT_SETTING:"NEW_ACCOUNT_SETTING",MAILBOX_ADD:"MAILBOX_ADD",MAILBOX_CREATE:"MAILBOX_CREATE",MAILBOX_UPDATE:"MAILBOX_UPDATE",MAILBOX_DELETE:"MAILBOX_DELETE",MAILBOX_EXPUNGE:"MAILBOX_EXPUNGE",RECEIVE_RAW_MESSAGE:"RECEIVE_RAW_MESSAGE",RECEIVE_RAW_MESSAGES:"RECEIVE_RAW_MESSAGES",RECEIVE_RAW_MESSAGE_REALTIME:"RECEIVE_RAW_MESSAGE_REALTIME",MESSAGE_SEND:"MESSAGE_SEND",MESSAGE_CURRENT:"MESSAGE_CURRENT",RECEIVE_MESSAGE_DELETE:"RECEIVE_MESSAGE_DELETE",RECEIVE_MAILBOX_UPDATE:"RECEIVE_MAILBOX_UPDATE",MESSAGE_TRASH_REQUEST:"MESSAGE_TRASH_REQUEST",MESSAGE_TRASH_SUCCESS:"MESSAGE_TRASH_SUCCESS",MESSAGE_TRASH_FAILURE:"MESSAGE_TRASH_FAILURE",MESSAGE_MOVE_REQUEST:"MESSAGE_MOVE_REQUEST",MESSAGE_MOVE_SUCCESS:"MESSAGE_MOVE_SUCCESS",MESSAGE_MOVE_FAILURE:"MESSAGE_MOVE_FAILURE",MESSAGE_FLAGS_REQUEST:"MESSAGE_FLAGS_REQUEST",MESSAGE_FLAGS_SUCCESS:"MESSAGE_FLAGS_SUCCESS",MESSAGE_FLAGS_FAILURE:"MESSAGE_FLAGS_FAILURE",MESSAGE_FETCH_REQUEST:"MESSAGE_FETCH_REQUEST",MESSAGE_FETCH_SUCCESS:"MESSAGE_FETCH_SUCCESS",MESSAGE_FETCH_FAILURE:"MESSAGE_FETCH_FAILURE",MESSAGE_UNDO_REQUEST:"MESSAGE_UNDO_REQUEST",MESSAGE_UNDO_SUCCESS:"MESSAGE_UNDO_SUCCESS",MESSAGE_UNDO_FAILURE:"MESSAGE_UNDO_FAILURE",MESSAGE_UNDO_TIMEOUT:"MESSAGE_UNDO_TIMEOUT",CONVERSATION_FETCH_REQUEST:"CONVERSATION_FETCH_REQUEST",CONVERSATION_FETCH_SUCCESS:"CONVERSATION_FETCH_SUCCESS",CONVERSATION_FETCH_FAILURE:"CONVERSATION_FETCH_FAILURE",MESSAGE_RECOVER_REQUEST:"MESSAGE_RECOVER_REQUEST",MESSAGE_RECOVER_SUCCESS:"MESSAGE_RECOVER_SUCCESS",MESSAGE_RECOVER_FAILURE:"MESSAGE_RECOVER_FAILURE",SEARCH_PARAMETER_CHANGED:"SEARCH_PARAMETER_CHANGED",SEARCH_REQUEST:"SEARCH_REQUEST",SEARCH_SUCCESS:"SEARCH_SUCCESS",SEARCH_FAILURE:"SEARCH_FAILURE",SET_CONTACT_QUERY:"SET_CONTACT_QUERY",RECEIVE_RAW_CONTACT_RESULTS:"RECEIVE_RAW_CONTACT_RESULTS",CLEAR_CONTACT_RESULTS:"CLEAR_CONTACT_RESULTS",CONTACT_LOCAL_SEARCH:"CONTACT_LOCAL_SEARCH",SET_DISPOSITION:"SET_DISPOSITION",TOGGLE_LIST_MODE:"TOGGLE_LIST_MODE",RESIZE_PREVIEW_PANE:"RESIZE_PREVIEW_PANE",MAXIMIZE_PREVIEW_PANE:"MAXIMIZE_PREVIEW_PANE",MINIMIZE_PREVIEW_PANE:"MINIMIZE_PREVIEW_PANE",DISPLAY_MODAL:"DISPLAY_MODAL",HIDE_MODAL:"HIDE_MODAL",REFRESH:"REFRESH",INTENT_AVAILABLE:"INTENT_AVAILABLE",SETTINGS_UPDATED:"SETTINGS_UPDATED",RECEIVE_TASK_UPDATE:"RECEIVE_TASK_UPDATE",RECEIVE_TASK_DELETE:"RECEIVE_TASK_DELETE",CLEAR_TOASTS:"CLEAR_TOASTS",RECEIVE_REFRESH_UPDATE:"RECEIVE_REFRESH_UPDATE",RECEIVE_REFRESH_STATUS:"RECEIVE_REFRESH_STATUS",RECEIVE_REFRESH_DELETE:"RECEIVE_REFRESH_DELETE",RECEIVE_REFRESH_NOTIF:"RECEIVE_REFRESH_NOTIF",REFRESH_REQUEST:"REFRESH_REQUEST",REFRESH_SUCCESS:"REFRESH_SUCCESS",REFRESH_FAILURE:"REFRESH_FAILURE",QUERY_PARAMETER_CHANGED:"QUERY_PARAMETER_CHANGED",TOASTS_SHOW:"TOASTS_SHOW",TOASTS_HIDE:"TOASTS_HIDE",DRAWER_SHOW:"DRAWER_SHOW",DRAWER_HIDE:"DRAWER_HIDE",DRAWER_TOGGLE:"DRAWER_TOGGLE"},PayloadSources:{VIEW_ACTION:"VIEW_ACTION",SERVER_ACTION:"SERVER_ACTION"},ComposeActions:{REPLY:"REPLY",REPLY_ALL:"REPLY_ALL",FORWARD:"FORWARD"},AlertLevel:{SUCCESS:"SUCCESS",INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR"},MessageFlags:{FLAGGED:"\\Flagged",SEEN:"\\Seen",DRAFT:"\\Draft"},MessageFilter:{ALL:"all",ATTACH:"attach",FLAGGED:"flagged",UNSEEN:"unseen"},MailboxFlags:{DRAFT:"\\Drafts",SENT:"\\Sent",TRASH:"\\Trash",ALL:"\\All",SPAM:"\\Junk",FLAGGED:"\\Flagged"},FlagsConstants:{SEEN:"\\Seen",UNSEEN:"Unseen",FLAGGED:"\\Flagged",NOFLAG:"Noflag"},Dispositions:{COL:"column",ROW:"row"},SpecialBoxIcons:{inboxMailbox:"fa-inbox",draftMailbox:"fa-file-text-o",sentMailbox:"fa-send-o",trashMailbox:"fa-trash-o",junkMailbox:"fa-fire",allMailbox:"fa-archive"},Tooltips:{REPLY:"TOOLTIP_REPLY",REPLY_ALL:"TOOLTIP_REPLY_ALL",FORWARD:"TOOLTIP_FORWARD",REMOVE_MESSAGE:"TOOLTIP_REMOVE_MESSAGE",OPEN_ATTACHMENTS:"TOOLTIP_OPEN_ATTACHMENTS",OPEN_ATTACHMENT:"TOOLTIP_OPEN_ATTACHMENT",DOWNLOAD_ATTACHMENT:"TOOLTIP_DOWNLOAD_ATTACHMENT",PREVIOUS_CONVERSATION:"TOOLTIP_PREVIOUS_CONVERSATION",NEXT_CONVERSATION:"TOOLTIP_NEXT_CONVERSATION",FILTER_ONLY_UNREAD:"TOOLTIP_FILTER_ONLY_UNREAD",FILTER_ONLY_IMPORTANT:"TOOLTIP_FILTER_ONLY_IMPORTANT",FILTER_ONLY_WITH_ATTACHMENT:"TOOLTIP_FILTER_ONLY_WITH_ATTACHMENT",ACCOUNT_PARAMETERS:"TOOLTIP_ACCOUNT_PARAMETERS",DELETE_SELECTION:"TOOLTIP_DELETE_SELECTION",FILTER:"TOOLTIP_FILTER",QUICK_FILTER:"TOOLTIP_QUICK_FILTER",COMPOSE_IMAGE:"TOOLTIP_COMPOSE_IMAGE",COMPOSE_MOCK:"TOOLTIP_COMPOSE_MOCK",EXPUNGE_MAILBOX:"TOOLTIP_EXPUNGE_MAILBOX",ADD_CONTACT:"TOOLTIP_ADD_CONTACT",SHOW_CONTACT:"TOOLTIP_SHOW_CONTACT",HELP_SHORTCUTS:"TOOLTIP_HELP_SHORTCUT"}}}),require.register("initialize",function(e,t,n){var o,a,r,s;a=function(){var e;return e=0,window.start=function(){return null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)&&(e=performance.now()),React.addons.Perf.start()},window.stop=function(){return null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)&&console.log(performance.now()-e),React.addons.Perf.stop()},window.printWasted=function(){return stop(),React.addons.Perf.printWasted()},window.printInclusive=function(){return stop(),React.addons.Perf.printInclusive()},window.printExclusive=function(){return stop(),React.addons.Perf.printExclusive()}},s=function(){var e,t,n,o,a;return n=null!=(o=window.performance)?o.timing:void 0,t=Math.ceil(null!=(a=window.performance)?a.now():void 0),null!=n?(e="Response at "+(n.responseEnd-n.navigationStart)+"ms\nOnload at "+(n.loadEventStart-n.navigationStart)+"ms\nPage loaded in "+t+"ms",window.cozyMails.logInfo(e)):void 0},o=function(){var e;return e=t("./utils/intent_manager"),window.intentManager=new e,window.intentManager.send("nameSpace",{type:"ping",from:"mails"}).then(function(e){return LayoutActionCreator.intentAvailability(!0)},function(e){return LayoutActionCreator.intentAvailability(!1)})},r=function(){var e;return e=t("./utils/plugin_utils"),null==window.settings.plugins&&(window.settings.plugins={}),e.merge(window.settings.plugins),e.init()},window.onerror=function(e,t,n,o,a){var r,s,i;return console.error(e,t,n,o,a,null!=a?a.stack:void 0),s=(null!=a?a.toString():void 0)||e,s!==window.lastError?(r={data:{type:"error",error:{msg:e,name:null!=a?a.name:void 0,full:s,stack:null!=a?a.stack:void 0},url:t,line:n,col:o,href:window.location.href}},i=new XMLHttpRequest,i.open("POST","activity",!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(JSON.stringify(r)),window.lastError=s):void 0},window.onload=function(){var e,n,r,i,c,l,u,p,d,m,f,h,g,v,y;try{return window.__DEV__="localhost"===window.location.hostname,a(),window.cozyMails=t("./utils/api_utils"),null==window.settings&&(window.settings={}),v=window.locale||window.navigator.language||"en",window.cozyMails.setLocale(v),i=t("./actions/layout_action_creator/"),i.setDisposition(window.settings.layoutStyle),u=t("./utils/plugin_utils"),null==window.settings.plugins&&(window.settings.plugins={}),u.merge(window.settings.plugins),u.init(),window.cozyMails.setSetting("plugins",window.settings.plugins),o(),e=t("./stores/account_store"),r=t("./stores/contact_store"),c=t("./stores/layout_store"),l=t("./stores/message_store"),d=t("./stores/settings_store"),p=t("./router"),this.router=new p,window.router=this.router,n=t("./components/application"),m=n({router:this.router}),window.rootComponent=React.renderComponent(m,document.body),Backbone.history.start(),t("./utils/socketio_utils"),window.settings.desktopNotifications&&null!=window.Notification&&Notification.requestPermission(function(e){return Notification.permission!==e?Notification.permission=e:void 0}),s(),window.cozyMails.customEvent("APPLICATION_LOADED")}catch(b){if(h=b,console.error(h,null!=h?h.stack:void 0),g=h.toString(),g!==window.lastError)return f={data:{type:"error",error:{msg:h.message,name:null!=h?h.name:void 0,full:g,stack:null!=h?h.stack:void 0},file:null!=h?h.fileName:void 0,line:null!=h?h.lineNumber:void 0,col:null!=h?h.columnNumber:void 0,href:window.location.href}},y=new XMLHttpRequest,y.open("POST","activity",!0),y.setRequestHeader("Content-Type","application/json;charset=UTF-8"),y.send(JSON.stringify(f)),window.lastError=g}}}),require.register("libs/cached_transform",function(e,t,n){var o=[].slice;n.exports=function(){var e,t,n,a,r,s,i,c,l,u,p,d,m;if(c=arguments[0],r=arguments[1],t=4<=arguments.length?o.call(arguments,2,u=arguments.length-1):(u=2,[]),l=arguments[u++],null==c.__cachedTransforms&&(c.__cachedTransforms={}),n=c.__cachedTransforms[r],i=!0,n){for(m=n.args,a=p=0,d=m.length;d>p;a=++p)e=m[a],t[a]!==e&&(i=!1);if(i)return n.result}return s=l(),c.__cachedTransforms[r]={args:t,result:s},s}}),require.register("libs/flux/dispatcher/dispatcher",function(e,t,n){var o,a,r,s;a=t("../invariant"),r=1,s="ID_",n.exports=o=o=function(){function e(){this._callbacks={},this._isPending={},this._isHandled={},this._isDispatching=!1,this._pendingPayload=null}return e.prototype.register=function(e){var t;return t=s+r++,this._callbacks[t]=e,t},e.prototype.unregister=function(e){var t;return t="Dispatcher.unregister(...): `%s` does not map to a registered callback.",a(this._callbacks[e],t,e),delete this._callbacks[e]},e.prototype.waitFor=function(e){var t,n,o,r,s,i,c;for(a(this._isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching."),o="Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",r="Dispatcher.waitFor(...): `%s` does not map to a registered callback.",c=[],n=s=0,i=e.length-1;i>=s;n=s+=1)t=e[n],this._isPending[t]?a(this._isHandled[t],o,t):(a(this._callbacks[t],r,t),c.push(this._invokeCallback(t)));return c},e.prototype.dispatch=function(e){var t,n,o;console.log("DIS",e.action.type,e.action.value),n="Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.",a(!this._isDispatching,n),this._startDispatching(e);try{o=[];for(t in this._callbacks)this._isPending[t]||o.push(this._invokeCallback(t));return o}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){return this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){var t;for(t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;return this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){return this._pendingPayload=null,this._isDispatching=!1},e}()}),require.register("libs/flux/invariant",function(e,t,n){"use strict";var o=function(e,t,n,o,a,r,s,i){if(__DEV__&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,a,r,s,i],u=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return l[u++]}))}throw c.framesToPop=1,c}};n.exports=o}),require.register("libs/flux/store/store",function(e,t,n){var o,a,r={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var o in t)r.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};o=t("../../../app_dispatcher"),n.exports=a=function(e){function t(){t.__super__.constructor.call(this),this.uniqID=r++,this.__bindHandlers(n.bind(this)),i.call(this)}var n,a,r,i;return s(t,e),t.prototype.uniqID=null,r=0,a={},n=function(e,t){return null==a[this.uniqID]&&(a[this.uniqID]={}),a[this.uniqID][e]=t},i=function(){return this.dispatchToken=o.register(function(e){return function(t){var n,o,r,s;return s=t.action,o=s.type,r=s.value,null!=(n=a[e.uniqID][o])?n.call(e,r):void 0}}(this))},t.prototype.__bindHandlers=function(e){var t;if(__DEV__)throw t="The store "+this.constructor.name+" must define a `__bindHandlers` method",new Error(t)},t}(EventEmitter)}),require.register("libs/panel_router",function(e,t,n){var o,a,r={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var o in t)r.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};o=t("../actions/layout_action_creator"),n.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.patterns={},t.prototype.routes={},t.prototype.previous=null,t.prototype.current=null,t.prototype.cachedPatterns=[],t.prototype.initialize=function(e){var t,n,a;a=this.patterns;for(t in a)n=a[t],this.cachedPatterns.push({key:t,pattern:this._routeToRegExp(n.pattern)}),this.routes[n.pattern]=t,this.routes[""+n.pattern+"/*secondPanel"]=t;return this._bindRoutes(),this.on("route",function(e){return function(t,n){var a,r,s,i,c,l;return"default"===t?(e.current={firstPanel:null,secondPanel:null},c=e.buildUrl({direction:"first",fullWidth:!0,action:o.getDefaultRoute(),parameters:[null]}),e.navigate(c,{trigger:!0})):(l=e._processSubRouting(t,n),r=l[0],i=l[1],a=e.fluxActionFactory(r),s=e.fluxActionFactory(i),e.previous=e.current,e.current={firstPanel:r,secondPanel:i},null!=a&&a(r,"first"),null!=s&&s(i,"second"),e.trigger("fluxRoute",e.current))}}(this))},t.prototype.fluxActionFactory=function(e){var t,n;return t=null,n=this.patterns[null!=e?e.action:void 0],null!=n?(t=o[n.fluxAction],null==t&&console.warn("`"+n.fluxAction+"` method not found in layout actions."),t):void 0},t.prototype._processSubRouting=function(e,t){var n,o,a,r,s,i;return t.pop(),i=t.pop(),a=this.patterns[e].pattern.match(/:[\w]+/g)||[],a.length>t.length&&null!=i&&(t.push(i),i=null),o=this._arrayToNamedParameters(e,t),r=_.first(_.filter(this.cachedPatterns,function(e){return e.pattern.test(i)})),null!=r?(t=this._extractParameters(r.pattern,i),t.pop(),s=this._mergeDefaultParameter({action:r.key,parameters:this._arrayToNamedParameters(r.key,t)})):s=null,n=this._mergeDefaultParameter({action:e,parameters:o}),[n,s]},t.prototype._arrayToNamedParameters=function(e,t){var n,o,a,r,s,i,c;for(o={},r=this.patterns[e].pattern.match(/:[\w]+/g)||[],n=i=0,c=r.length;c>i;n=++i)a=r[n],s=a.substr(1),o[s]=t[n];return o},t.prototype._namedParametersToArray=function(e,t){var n,o,a,r,s,i,c;for(a=[],r=this.patterns[e].pattern.match(/:[\w]+/g)||[],n=i=0,c=r.length;c>i;n=++i)o=r[n],s=o.substr(1),a.push(t[o]);return a},t.prototype.buildUrl=function(e){var t,n,o,a,r,s;return null!=e.firstPanel||null!=e.secondPanel?(t=e.firstPanel||this.current.firstPanel,a=e.secondPanel||this.current.secondPanel):null!=e.direction?"first"===e.direction?(t=e,a=this.current.secondPanel):"second"===e.direction?(t=this.current.firstPanel,a=e):console.warn("`direction` should be `first`, `second`."):console.warn("`direction` parameter is mandatory when using short call."),o=null!=e.firstPanel||"first"===e.direction,o&&e.fullWidth&&(null!=e.secondPanel&&"second"===e.direction&&console.warn("You shouldn't use the fullWidth option with a second panel"),a=null),n=this._getURLFromRoute(t),r=this._getURLFromRoute(a),s="#"+n,null!=r&&r.length>0&&(s=""+s+"/"+r),s},t.prototype.buildClosePanelUrl=function(e){var t;return t="first"===e||"full"===e?_.clone(this.current.secondPanel):_.clone(this.current.firstPanel),null!=t?(t.direction="first",t.fullWidth=!0,this.buildUrl(t)):"#"},t.prototype._getURLFromRoute=function(e){var t,n,o,a,r,s,i,c,l,u;if(e=_.clone(e),null!=(null!=e?e.parameters:void 0)&&(e.parameters=_.clone(e.parameters)),null!=e){if(c=this.patterns[e.action].pattern,null==e.parameters||e.parameters instanceof Array||e.parameters instanceof Object||(e.parameters=[e.parameters]),null!=e.parameters&&e.parameters instanceof Array&&(t=e.action,s=e.parameters,e.parameters=this._arrayToNamedParameters(t,s)),e=this._mergeDefaultParameter(e),i=c.match(/:[\w]+/gi)||[],n=c,e.parameters)for(l=0,u=i.length;u>l;l++)a=i[l],o=a.substr(1),r=e.parameters[o],n=n.replace(a,r);return n}return""},t.prototype._mergeDefaultParameter=function(e){var t,n,o,a;if(e=_.clone(e),a=_.clone(e.parameters||{}),n=this._getDefaultParameters(e.action,e.parameters),null!=n)for(o in n)t=n[o],null==a[o]&&(a[o]=t);return e.parameters=a,e},t}(Backbone.Router)}),require.register("libs/prop_types",function(e,t,n){var o,a,r,s;o=e,s=React.PropTypes;for(a in s)r=s[a],o[a]=r;o.valueLink=function(e){return React.PropTypes.shape({value:e,requestChange:React.PropTypes.func.isRequired})},o.immutableMapStringTo=function(e){return function(t,n,a,r){var s,i,c,l;if(s=o.instanceOf(Immutable.Map).isRequired.apply(this,arguments))return s;l=t[n].values();for(c in l)if(i=l[c],s=e(l,i,a,r))return s;return null}},o.Mailbox=function(){return React.PropTypes.shape({id:o.string,label:o.string,depth:o.number,weight:o.number,attribs:o.arrayOf(o.string)})},o.Account=function(){return React.PropTypes.shape({label:o.string,name:o.string,login:o.string,password:o.string,imapServer:o.string,imapPort:o.string,smtpServer:o.string,smtpPort:o.string,smtpMethod:o.string,draftMailbox:o.string,sentMailbox:o.string,trashMailbox:o.string})}}),require.register("locales/ca",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote",
"compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/de",function(e,t,n){n.exports={"app loading":"Laden…","app back":"Zurück","app cancel":"Abbrechen","app confirm":"Bestätigen","app menu":"Menü","app search":"Suchen…","app alert close":"Schließen","app unimplemented":"Noch nicht implementiert","app error":"Argh, Ich bin nicht fähig diese Aktion auszuführen, bitte probieren Sie es wieder","app confirm delete":"Löschen bestätigen",compose:"Neue E-Mail erstellen","compose default":"Hallo, wie geht's?","compose from":"Von","compose to":"An","compose to help":"Empfänger Liste","compose cc":"Cc","compose cc help":"Kopie Liste","compose bcc":"Bcc","compose bcc help":"Verborgene Kopie Liste","compose subject":"Betreff","compose content":"Inhalt","compose subject help":"Betreff","compose reply prefix":"Re:","compose reply separator":"%{sender} schrieb am %{date} ","compose forward prefix":"Fwd:","compose forward separator":"%{sender} schrieb am %{date} ","compose action draft":"Entwurf speichern","compose action send":"Senden","compose action delete":"Entwurf löschen","compose action sending":"Senden","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"Sie können keine Nachricht an Niemanden senden","compose error no subject":"Bitte vergeben Sie einen Betreff","compose confirm keep draft":"Nachricht wurde nicht gesendet, Entwurf behalten?","compose confirm draft keep":"Entwurf speichern","compose confirm draft delete":"Entwurf löschen","compose wrong email format":"Die vergebene E-Mail Adresse hat kein geeignes Format: %{address}.","compose forward header":"Weitergeleitete Nachricht","compose forward subject":"Betreff:","compose forward date":"Datum:","compose forward from":"Von:","compose forward to":"An:","menu show":"Menü anzeigen","menu compose":"Erstellen","menu account new":"Neues Postfach","menu settings":"Parameter","menu mailbox total":"%{smart_count} Nachricht |||| %{smart_count} Nachrichten","menu mailbox unread":", %{smart_count} ungelesene Nachricht ||||, %{smart_count} ungelesene Nachrichten","menu mailbox new":"und %{smart_count} neue Nachricht |||| und %{smart_count} neue Nachrichten","menu favorites on":"Weniger","menu favorites off":"Mehr","menu toggle":"Menü umschalten","menu refresh label":"Aktualisieren","menu refreshing":"Aktualisieren...","list empty":"Keine E-Mail in diesem Postfach.","no flagged message":"Keine wichtige E-Mail in diesem Postfach.","no unseen message":"Alle E-Mails in dieser Box wurden gelesen","no attach message":"Keine Nachrichten mit Anhängen","no filter message":"Keine E-Mail für diesen Filter.","list fetching":"Laden…","list search empty":'Keine Ergebnis für diese Regel gefunden "%{query}".',"list count":"%{smart_count} Nachricht in diesem Postfach |||| %{smart_count} NAchrichten in diesem Postfach","list search count":"%{smart_count} Ergebnis. |||| %{smart_count} Ergebnisse.","list filter":"Filter","list filter all":"Alle","list filter unseen":"Ungelesen","list filter flagged":"Wichtig","list filter attach":"Anhänge","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"TT/MM/JJJJ","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sortieren","list sort date":"Datum","list sort subject":"Betreff","list option compact":"Verdichten","list next page":"Mehr Nachrichten","list end":"Das ist das Ende der Liste","list mass no message":"Keine Nachrichten ausgewählt","list delete confirm":"Möchten Sie diese Nachricht wirklich löschen? ||||\nMöchten Sie diese %{smart_count} Nachrichten wirklich löschen?","list delete conv confirm":"Möchten Sie diese Unterhaltung wirklich löschen? ||||\nMöchten Sie diese %{smart_count} Unterhaltungen wirklich löschen?","mail to":"An:","mail cc":"Cc:","headers from":"Von","headers to":"An","headers cc":"Cc","headers reply-to":"Antwort an","headers date":"Datum","headers subject":"Betreff","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"Bytes","length kbytes":"kB","length mbytes":"MB","mail action reply":"Anworten","mail action reply all":"Allen antworten","mail action forward":"Weiterleiten","mail action delete":"Löschen","mail action mark":"Markieren als","mail action copy":"Kopie","mail action move":"Verschieben","mail action more":"Mehr","mail action headers":"Headers","mail action raw":"Reine Nachricht","mail mark spam":"Spam","mail mark nospam":"Kein Spam","mail mark fav":"Wichtig","mail mark nofav":"Nicht wichtig","mail mark read":"Gelesen","mail mark unread":"Ungelesen","mail confirm delete title":"Nachricht löschen","mail confirm delete":"Möchten Sie die Nachricht wirklich löschen “%{subject}”?","mail confirm delete nosubject":"Möchten Sie diese Nachricht wirklich löschen?","mail confirm delete cancel":"Abbrechen","mail confirm delete delete":"Löschen","mail action conversation delete":"Unterhaltung löschen","mail action conversation move":"Unterhaltung verschieben","mail action conversation seen":"Unterhaltung als gelesen markieren","mail action conversation unseen":"Unterhaltung als ungelesen markieren","mail action conversation flagged":"Unterhaltung als wichtig markieren","mail action conversation noflag":"Unterhaltung als normal markieren","mail conversation length":"%{smart_count} Nachricht in Unterhaltung. ||||\n%{smart_count} Nachrichten in Unterhaltung.","account new":"Neues Konto","account edit":"Konto bearbeiten","account add":"Hinzufügen","account save":"Speichern","account saving":"Speichern","account check":"Verbindung prüfen","account accountType short":"IMAP","account accountType":"Konto Typ","account imapPort short":"993","account imapPort":"Port","account imapSSL":"SSL verwenden","account imapServer short":"imap.provider.tld","account imapServer":"IMAP Server","account imapTLS":"TLS verwenden","account imapLogin short":"IMAP Benutzer","account imapLogin":"IMAP user (if different from email address)","account label short":"Ein kurzer Postfach Name","account label":"Konto Name","account login short":"Ihre E-Mail Addresse","account login":"E-Mail Addresse","account name short":"Ihr Name, dieser wird angezeigt","account name":"Ihr Name","account oauth":"This account uses Google OAuth","account password":"Passwort","account receiving server":"Postausgang Server","account sending server":"Posteingang Server","account smtpLogin short":"SMTP Benutzer","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentifizierungsmethode","account smtpMethod NONE":"Keine","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP Passwort","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"SSL verwenden","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP Server","account smtpTLS":"STARTTLS verwenden","account remove":"Konto löschen","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Entwürfe","account sent mailbox":"Posteingang","account trash mailbox":"Papierkorb","account mailboxes":"Ordner","account special mailboxes":"Spezielle Postfächer","account newmailbox label":"Neuer Ordner","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Möchten Sie wirklich alle Nachrichtenn in diesem Postfach löschen?","account tab account":"Konto","account tab mailboxes":"Ordner","account errors":"Einige Daten fehlen oder sind ungültig","account type":"Konto Typ","account updated":"Konto aktualisiert","account checked":"Parameter ok","account creation ok":"Das Konto wurde erfolgreich erstellt. Wählen Sie nun die Postfächer, die Sie im Menü sehen möchten","account refreshed":"Konto aktualisiert","account refresh error":"Fehler beim aktualisieren der Konten, Parameter prüfen","account identifiers":"Identifikation","account actions":"Aktionen","account danger zone":"Gefahrenzone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Erweiterte Einstellungen ausblenden","account imap show advanced":"Erweiterte Einstellungen anzeigen","account smtp hide advanced":"Erweiterte Einstellungen ausblenden","account smtp show advanced":"Erweiterte Einstellungen anzeigen","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Speichern","mailbox create ok":"Ordner erstellt","mailbox create ko":"Fehler beim Erstellen des Ordners","mailbox update ok":"Ordner aktualisiert","mailbox update ko":"Fehler beim Aktualisieren des Ordners","mailbox delete ok":"Ordner gelöscht","mailbox delete ko":"Fehler beim Löschen des Ordners","mailbox expunge ok":"Papierkorb geleeren","mailbox expunge ko":"Fehler beim Leeren des Papierkorbs","mailbox title edit":"Ordner umbennen","mailbox title delete":"Ordner löschen","mailbox title edit save":"Speichern","mailbox title edit cancel":"Abbrechen","mailbox title add":"Neuen Ordner hinzufügen","mailbox title add cancel":"Abbrechen","mailbox title favorite":"Ordner wird angezeigt","mailbox title not favorite":"Ordner wird nicht angezeigt","mailbox title total":"Zusammen","mailbox title unread":"Ungelesen","mailbox title new":"Neu","config error auth":"Falsche Verbindungseinstellungen","config error imapPort":"Falsche IMAP Einstellungen","config error imapServer":"Falscher IMAP Server","config error imapTLS":"Falscher IMAP TLS","config error smtpPort":"Falscher SMTP Port","config error smtpServer":"Falscher SMTP Server","config error nomailboxes":"Kein Ordner in diesem Konto, bitte erstellen Sie einen","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Nachricht senden","message action sent ko":"Fehler beim Senden der Nachricht:","message action draft ok":"Nachricht gesichert","message action draft ko":"Fehler beim Sichern der Nachricht:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Nachricht markiert","message flag ko":"Error marking message","message flag ok":"Nachricht markiert","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Entwurf markiert","draft mark ko":"Error marking message:","conversation move ok":"Unterhaltung “%{subject}” wurde verschoben","conversation move ko":"Fehler beim Verschieben der Unterhaltung “%{subject}”","conversation delete ok":"Unterhaltung “%{subject}” wurde gelöscht","conversation delete ko":"Fehler beim Löschen der Unterhaltung","conversation seen ok":"Unterhaltung als gelesen markiert","conversation seen ko":"Fehler","conversation unseen ok":"Unterhaltung als ungelesen markiert","conversation unseen ko":"Fehler","undo last action":"Undo last action","conversation flagged ko":"Fehler","conversation noflag ko":"Fehler","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Anzeige von Bildern innerhalb der Nachricht wurde geblockt","message images display":"Bilder anzeigen","message html display":"HTML anzeigen","message delete no trash":"Bitte wählen Sie einen Ordner als Papierkorb","message delete already":"Nachricht bereits im Papierkorb","message move already":"Nachricht bereits in diesem Ordner","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"Anhänge anzeigen","settings title":"Einstellungen","settings button save":"Speichern","settings plugins":"Ergänzende Module","settings plugin add":"Hinzufügen","settings plugin del":"Löschen","settings plugin help":"Hilfe","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Formatierte Nachricht","settings label composeOnTop":"Antwort am Anfang der Nachricht","settings label desktopNotifications":"Mitteilungen","settings label displayConversation":"Unterhaltungen anzeigen","settings label displayPreview":"Nachrichten Vorschau anzeigen","settings label messageDisplayHTML":"Nachricht in HTML anzeigen","settings label messageDisplayImages":"Bilder in Nachrichten anzeigen","settings label messageConfirmDelete":"Bestätigung vor dem Löschen einer Nachricht","settings label layoutStyle":"Layout anzeigen","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertikal","settings label layoutStyle three":"Drei Spalten","settings label listStyle":"Stil der Nachrichten-Listen","settings label listStyle default":"Normal","settings label listStyle compact":"Kompakt","settings lang":"Sprache","settings lang en":"Englisch","settings lang fr":"Französisch","settings lang de":"Deutsch","settings save error":"Einstellungen können nicht gespeichert werden, bitte versuchen Sie es erneut","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Eine auswählen","mailbox pick null":"Kein Postfach dafür","task account-fetch":"%{account} aktualisieren","task box-fetch":"%{box} aktualisieren","task apply-diff-fetch":"Nachrichten aus %{box} von %{account} holen","task apply-diff-remove":"Nachrichten aus %{box} von %{account} löschen","task recover-uidvalidity":"Analysiere","there were errors":"%{smart_count} Fehler. |||| %{smart_count} Fehler.","modal please report":"Bitte übertragen Sie diese Information zu Cozy.","modal please contribute":"Bitte mithelfen","modal copy content":"Copy information into clipboard","validate must not be empty":"Pflichtfeld","toast hide":"Alarme ausblenden","toast show":"Alarme anzeigen","toast close all":"Alle Alarme schließen","notif new title":"CozyEmail","notif new":"%{smart_count} Nachricht nicht gelesen in Konto %{account}||||\n%{smart_count} Nachrichten nicht gelesen in Konto %{account}","notif complete":"Import des Kontos %{account} abgeschlossen.","contact form":"Kontakte auswählen","contact form placeholder":"Kontakt Name","contact button label":"Zum Adressbuch hinzufügen","contact create success":"%{contact} wurde zu Ihren Kontakten hinzugefügt","contact create error":"Fehler beim Hinzufügen Ihrer Kontakte: %{error}","message contact creation title":"Kontakt hinzufügen","message contact creation":"Do you want to create a contact for %{contact}?",
"gmail security tile":"Über GMAIL Sicherheit","gmail security body":"GMAIL betrachtet Verbindungen die Benutzername und Passwort verwenden nicht als sicher.\nBitte klicken Sie auf den folgenden Link, Stellen Sie sicher das\nSie sich mit Ihrem Konto %{login} angemelden und geben Sie Apps mit geringerer Sicherheit frei.","gmail security link":"Freigabe für Apps mit geringerer Sicherheit.","plugin name Gallery":"Anhang Galerie","plugin name medium-editor":"Medium Editor","plugin name MiniSlate":"MiniSlate Editor","plugin name Sample JS":"Beispiel","plugin name Keyboard shortcuts":"Tastaturkombinationen","plugin name VCard":"VCard-Kontakt","plugin modal close":"Schließen","calendar unknown format":"Diese Nachricht enthält eine Einladung für ein Ereignis in einem unbekannten Format.","tooltip reply":"Antworten","tooltip reply all":"Allen Antworten","tooltip forward":"Weiterleiten","tooltip remove message":"Entfernen","tooltip open attachments":"Liste der Anhänge öffnen","tooltip open attachment":"Anhang öffnen","tooltip download attachment":"Anhang herunterladen","tooltip previous conversation":"Zur vorigen Unterhaltung","tooltip next conversation":"Zur nächsten Unterhaltung","tooltip filter only unread":"Ungelesen Nachrichten anzeigen","tooltip filter only important":"Wichtige Nachrichten anzeigen","tooltip filter only attachment":"Nachrichten mit Anhang anzeigen","tooltip account parameters":"Konto Einstellungen","tooltip delete selection":"Markierte Nachrichten löschen","tooltip filter":"Filter","tooltip display filters":"Filter anzeigen","tooltip expunge mailbox":"Einen Kontakt hinzufügen","tooltip add contact":"Zu Kontakte hinzufügen","tooltip show contact":"Kontakt anzeigen","filters unseen":"Ungelesen","filters flagged":"Markiert","filters attach":"Anhang","filters search placeholder":"Suchen...","daterangepicker placeholder":"nach Datum","daterangepicker presets yesterday":"Gestern","daterangepicker presets last week":"letzte Woche","daterangepicker presets last month":"letztes Monat","daterangepicker clear":"löschen"}}),require.register("locales/en",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re: ","compose reply separator":"\n\nOn %{date}, %{sender} wrote \n","compose forward prefix":"Fwd: ","compose forward separator":"\n\nOn %{date}, %{sender} wrote \n","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages ","menu mailbox new":" and %{smart_count} new message|||| and %{smart_count} new messages ","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To: ","mail cc":"Cc: ","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message: ","message action draft ok":"Message saved","message action draft ko":"Error saving message: ","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message: ","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”: ","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message: ","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft: ","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”: ","draft mark ok":"Draft marked","draft mark ko":"Error marking message: ","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Add ons","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","tooltip help shortcuts":"Show list of available shortcuts","filters unseen":"unread","filters flagged":"starred","filters attach":"attachments","filters search placeholder":"Search...","search all accounts":"All accounts","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/eo",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations",
"settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/es",function(e,t,n){n.exports={"app loading":"Cargando…","app back":"Retroceder","app cancel":"Anular","app confirm":"Confirmar","app menu":"Menú","app search":"Buscar…","app alert close":"Cerrar","app unimplemented":"No implementado","app error":"¡ Ay !..., un error ha ocurrido, por favor ensayar de nuevo","app confirm delete":"Confirmar la acción de borrar",compose:"Escribir un nuevo mensaje","compose default":"Buenos días, ¿cómo está usted?","compose from":"De","compose to":"Para","compose to help":"Lista de destinatarios principales","compose cc":"Cc","compose cc help":"Lista de destinatarios a quienes se les envía una copia","compose bcc":"Cco","compose bcc help":"Lista de destinatarios a quienes se les envía una copia oculta","compose subject":"Asunto","compose content":"Contenido","compose subject help":"Asunto","compose reply prefix":"Re :","compose reply separator":"El %{date}, %{sender} escribió :","compose forward prefix":"Fwd:","compose forward separator":"El %{date}, %{sender} escribió :","compose action draft":"Guardar borrador","compose action send":"Enviar","compose action delete":"Suprimir borrador","compose action sending":"Envío","compose toggle cc":"Cc","compose toggle bcc":"Cco","compose error no dest":"Usted no ha designado destinatario alguno","compose error no subject":"Usted no ha señalado el asunto","compose confirm keep draft":"Usted no ha enviado el mensaje, ¿ quiere conservar el borrador ?","compose confirm draft keep":"Guardar el borrador","compose confirm draft delete":"Eliminat=r el borrador","compose wrong email format":"La dirección del correo no tiene el formato adecuado: %{address}.","compose forward header":"Mensaje transferido","compose forward subject":"Asunto :","compose forward date":"Fecha:","compose forward from":"De:","compose forward to":"Para:","menu show":"Mostrar el menú","menu compose":"Nuevo","menu account new":"Añadir una cuenta","menu settings":"Parámetros","menu mailbox total":"%{smart_count} mensaje |||| %{smart_count} mensajes","menu mailbox unread":"de los cuales %{smart_count} mensaje no leído |||| de los cuales %{smart_count} mensajes no leídos","menu mailbox new":"y %{smart_count} nuevo mensaje|||| y %{smart_count} nuevos mensajes","menu favorites on":"Menos","menu favorites off":"Más","menu toggle":"Menú","menu refresh label":"Refrescar","menu refreshing":"Refrescándose...","list empty":"No hay mensajes en esta casilla.","no flagged message":"No hay mensajes importantes en esta casilla.","no unseen message":"No hay mensajes no leídos en esta casilla.","no attach message":"Cargando…","no filter message":"No hay mensajes para ese filtro.","list fetching":"Cargando…","list search empty":'No se ha encontrado ningún resultado en la consulta    \\"%{query}\\".',"list count":"%{smart_count} mensaje en esta casilla ||| %{smart_count} mensajes en esta casilla","list search count":"%{smart_count} resultado encontrado. |||%{smart_count} resultados encontrados.","list filter":"Filtrar","list filter all":"Todos","list filter unseen":"No leídos","list filter flagged":"Importantes","list filter attach":"Archivos adjuntos","list filter from":"El Remitente es","list filter date":"Fechado el","list filter date placeholder":"DD/MM/AAAA","list filter dest":"El Destinatario es","list filter subject":"El Asunto comienza con...","list sort":"Clasificar","list sort date":"Fecha","list sort subject":"Asunto","list option compact":"Compacto","list next page":"Más mensajes","list end":"Este es el fin del camino","list mass no message":"Ningún mensaje seleccionado","list delete confirm":"¿Quiere realmente borrar este mensaje? ||||\n¿Quiere realmente borrar %{smart_count} mensajes ?","list delete conv confirm":"¿ Quiere realmente borrar esta conversación ?|||| \n¿ Quiere realmente borrar %{smart_count} conversaciones ?","mail to":"Para","mail cc":"Cc","headers from":"De","headers to":"Para","headers cc":"Copia","headers reply-to":"Responder a","headers date":"Fecha","headers subject":"Asunto","load more messages":"Cargar %{smart_count} mensaje más |||| cargar %{smart_count} mensajes más","length bytes":"octetos","length kbytes":"Ko","length mbytes":"Mo","mail action reply":"Responder","mail action reply all":"Responder a todos","mail action forward":"Transferir","mail action delete":"Suprimir","mail action mark":"Marcar como","mail action copy":"Copiar","mail action move":"Desplazar","mail action more":"Más","mail action headers":"Encabezados","mail action raw":"Mensaje en bruto","mail mark spam":"Spam","mail mark nospam":"Legítimo","mail mark fav":"Importante","mail mark nofav":"No importante","mail mark read":"Leído","mail mark unread":"No leído","mail confirm delete title":"Borrar mensaje","mail confirm delete":"¿Quiere usted realmente borrar el mensaje « %{subject} »?","mail confirm delete nosubject":"¿Quiere usted realmente suprimir este mensaje?","mail confirm delete cancel":"Anular","mail confirm delete delete":"Borrar","mail action conversation delete":"Suprimir la conversación","mail action conversation move":"Desplazar la conversación","mail action conversation seen":"Marcar la conversación como leída","mail action conversation unseen":"Marcar la conversación como no leída","mail action conversation flagged":"Marcar la conversación como importante","mail action conversation noflag":"Marcar la conversación como normal","mail conversation length":"%{smart_count} mensaje en esta conversación. ||||\n%{smart_count} mensajes en esta conversación.","account new":"Nueva cuenta","account edit":"Modificar la cuenta","account add":"Crear","account save":"Guardar","account saving":"En curso...","account check":"Chequear la conexión","account accountType short":"IMAP","account accountType":"Tipo de cuenta","account imapPort short":"993","account imapPort":"Puerto","account imapSSL":"Utilizar SSL","account imapServer short":"imap.proveedor.tld","account imapServer":"Servidor IMAP","account imapTLS":"Utilizar TLS","account imapLogin short":"Usuario IMAP","account imapLogin":"Usuario IMAP (si diferente del de la dirección email)","account label short":"Nombre abreviado","account label":"Nombre de la cuenta","account login short":"Su dirección de correo electrónico","account login":"Dirección de correo electrónico","account name short":"Su nombre, tal como se visualizará","account name":"Su nombre","account oauth":"Esta cuenta utiliza Google OAuth","account password":"Contraseña","account receiving server":"Servidor de recepción","account sending server":"Servidor de envío","account smtpLogin short":"Usuario SMTP","account smtpLogin":"Usuario SMTP (i diferente del de la dirección email)","account smtpMethod":"Método de autenticación","account smtpMethod NONE":"Ninguno","account smtpMethod PLAIN":"Sin formato","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"Contraseña SMTP","account smtpPassword":"Contraseña SMTP (si diferente de la contraseña IMAP)","account smtpPort short":"465","account smtpPort":"Puerto","account smtpSSL":"Utilizar SSL","account smtpServer short":"smtp.proveedor.tld","account smtpServer":"Servidor SMTP","account smtpTLS":"Usar STARTTLS","account remove":"Suprimir esta cuenta","account removed":"Cuenta suprimida","account remove confirm":'¿Quiere usted realmente suprimir la cuenta "%{label}"?',"account draft mailbox":"Guardar los boradores en","account sent mailbox":"Guardar los mensajes enviados en","account trash mailbox":"Papelera","account mailboxes":"Carpetas","account special mailboxes":"Casillas Especiales","account newmailbox label":"Nueva carpeta","account newmailbox placeholder":"Nombre","account newmailbox parent":"Crear en:","account confirm delbox":"¿Quiere realmente suprimir todos los mensajes de esta casilla?","account tab account":"Cuenta","account tab mailboxes":"Carpetas","account errors":"Algún dato falta o es incorrecto","account type":"Tipo de cuenta","account updated":"Cuenta modificada","account checked":"Parámetros correctos","account creation ok":"¡Bravo! Cuenta creada con éxito. Ahora seleccionar las casillas que usted quiere ver en el menu","account refreshed":"Cuenta actualizada","account refresh error":"Al actualizar las cuentas, ha surgido un error, chequear los parámetros","account identifiers":"Identificación","account actions":"Acciones","account danger zone":"Zona peligrosa","account no special mailboxes":"Escoger una carpeta específica para sus Borradores y sus emails Enviados y Suprimidos.","account imap hide advanced":"Ocultar los parámetros avanzados","account imap show advanced":"Mostrar los parámetros avanzados","account smtp hide advanced":"Ocultar los parámetros avanzados","account smtp show advanced":"Mostrar los parámetros avanzados","account tab signature":"Firma","account signature short":"Escriba aquí el texto que quiera añadir en la parte inferior de todos sus emails.","account signature":"Firma de sus emails","account signature save":"Guardar","mailbox create ok":"Carpeta creada","mailbox create ko":"Error al crear carpeta","mailbox update ok":"Carpeta actualizada","mailbox update ko":"Error al actualizar carpeta","mailbox delete ok":"Carpeta suprimida","mailbox delete ko":"Error al suprimir carpeta","mailbox expunge ok":"Carpeta suprimida","mailbox expunge ko":"Error al suprimir carpeta","mailbox title edit":"Renombrar carpeta","mailbox title delete":"Suprimir carpeta","mailbox title edit save":"Guardar","mailbox title edit cancel":"Anular","mailbox title add":"Crear una carpeta","mailbox title add cancel":"Anular","mailbox title favorite":"La carpeta se visualiza","mailbox title not favorite":"La carpeta no se visualiza","mailbox title total":"Total","mailbox title unread":"No leído","mailbox title new":"Nuevo","config error auth":"Error en los parámetros de conexión","config error imapPort":"Error en los parámetros IMAP","config error imapServer":"Servidor IMAP inválido","config error imapTLS":"Error IMAP TLS","config error smtpPort":"Puerto del servidor SMTP inválido","config error smtpServer":"Servidor SMTP inválido","config error nomailboxes":"No hay carpetas en esta cuenta, crear una","action undo":"Anular","action undo ok":"Acción anulada","action undo ko":"Imposible anular la acción","message action sent ok":"Mensaje enviado","message action sent ko":"Error al enviar mensaje","message action draft ok":"Mensaje guardado","message action draft ko":"Imposible guardar mensaje","message delete ok":"Mensaje “%{subject}” borrado","message delete ko":"Error al borrar mensaje:","message move ok":"Mensaje “%{subject}” desplazado","message move ko":"Error al desplazar el mensaje “%{subject}”:","message mark ok":"Mensaje marcado","message flag ko":"Error al marcar mensaje","message flag ok":"Mensaje marcado","message mark ko":"Error al marcar mensaje","draft delete ok":"Borrador “%{subject}” borrado","draft delete ko":"Error al suprimir borrador","draft move ok":"Borrador “%{subject}” desplazado","draft move ko":"Error al desplazar borrador “%{subject}”:","draft mark ok":"Borrador marcado","draft mark ko":"Error al marcar mensaje:","conversation move ok":'Conversación "%{subject}" desplazada',"conversation move ko":'Error al desplazar la conversación "%{subject}"',"conversation delete ok":'Conversación "%{subject}" suprimida',"conversation delete ko":"Error al suprimir la conversación","conversation seen ok":"Coversación marcada como leída","conversation seen ko":"Error","conversation unseen ok":"Conversación marcada como no leída","conversation unseen ko":"Error","undo last action":"Anular la última acción","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"Conversación %{smart_count} desplazada||||\nConversaciones %{smart_count} desplazadas","conversations move ko":"Error al desplazar la converación  %{smart_count} ||||\nError al desplazar las conversaciones %{smart_count}","conversations delete ok":"%{smart_count} conversación borrada||||\n%{smart_count} conversaciones borradas","conversations delete ko":"Error al borrar %{smart_count} conversación ||||\nError al borrar %{smart_count} conversaciones","conversations seen ok":"%{smart_count} conversación desplazada||||\n%{smart_count} conversaciones desplazadas","conversations seen ko":"Error al marcar %{smart_count} coversación como leída||||\nError al marcar %{smart_count} conversaciones como leídas","conversations unseen ok":"%{smart_count} conversación marcada como no laída||||\n%{smart_count} conversaciones marvadas como no leídas","conversations unseen ko":"Error al marcar %{smart_count} conversación como no leída||||\nError al marcar %{smart_count} conversaciones como no leídas","conversations flagged ko":"Error al señalar %{smart_count} conversación como marcada||||\nError al señalar %{smart_count} conversaciones como marcadas","conversations noflag ko":"%{smart_count} conversación nomarcada||||\n%{smart_count} conversaciones no marcadas","message images warning":"Se ha bloqueado la visualización de las imágenes dentro de los mensajes","message images display":"Visualizar imágenes","message html display":"Se ha bloqueado la visualización de las imágenes dentro de los mensajes","message delete no trash":"Seleccionar una carpeta Papelera","message delete already":"Este mensaje está ya en la Papelera","message move already":"Este mensaje está ya en esta carpeta","undo ok":"Deshacer la acción","undo ko":"Error al deshacer una acción","undo unavailable":"Deshacer una acción no está disponible","message preview title":"Visualizar archivos adjuntos","settings title":"Parámetros","settings button save":"Guardar","settings plugins":"Modulos complementarios","settings plugin add":"Crear","settings plugin del":"Suprimir","settings plugin help":"Ayuda","settings plugin new name":"Nombre del plugin","settings plugin new url":"Url del plugin","settings label autosaveDraft":"Guardar el borrador mientras se redacta","settings label composeInHTML":"Editor rico","settings label composeOnTop":"Responder encima del mensaje","settings label desktopNotifications":"Notificaciones","settings label displayConversation":"Visualizar las conversaciones","settings label displayPreview":"Previsualizar los mensajes","settings label messageDisplayHTML":"Visualizar los mensajes en HTML","settings label messageDisplayImages":"Visualizar las imágenes en los mensajes","settings label messageConfirmDelete":"Confirmar antes de suprimir un mensaje","settings label layoutStyle":"Visualización de la lista de mensajes","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Tres columnas","settings label listStyle":"Visualización de la lista de mensajes","settings label listStyle default":"Normal","settings label listStyle compact":"Compacto","settings lang":"Idioma","settings lang en":"Inglés","settings lang fr":"Francés","settings lang de":"Alemán","settings save error":"Imposible guardar los parámetros, ensayar más tarde","picker drop here":"Colocar archivos aquí o Escoger archivos locales","mailbox pick one":"Escoger un casilla","mailbox pick null":"No hay casilla para esto","task account-fetch":"Cargando %{account}","task box-fetch":"Cargando %{box}","task apply-diff-fetch":"Trayendo mensajes desde %{box} de {account}","task apply-diff-remove":"Suprimiendo mensajes de %{box} de %{account}","task recover-uidvalidity":"Analizando","there were errors":"%{smart_count} error. |||| %{smart_count} errores.","modal please report":"Por favor transmitir esta información a Cozy.","modal please contribute":"Le rogamos contribuir","modal copy content":"Copiar la información en el portapapeles","validate must not be empty":"Este campo debe llenarse","toast hide":"Ocultar las alertas","toast show":"Visualizar las alertas","toast close all":"Cerrar todas las alertas","notif new title":"Mensajería Cozy","notif new":"%{smart_count} mensaje no leído en la cuenta %}cuenta}||||\n%{smart_count} mensajes no leidos en la cuenta %{account}","notif complete":"Importación de la cuenta %{account} terminada","contact form":"Seleccionar contactos","contact form placeholder":"Nombre del contacto","contact button label":"Añadir a la agenda de direcciones","contact create success":"%{contact} ha sido añadido a sus contactos","contact create error":"Error al crear contacto: {error}","message contact creation title":"Añadir un contacto","message contact creation":"¿Quiere usted crear un contacto para %{contact}?","gmail security tile":"Acerca de la seguridad de Gmail","gmail security body":"Gmail considera las conexiones por nombre de usuario y contraseña como no seguras.\nPor favor hacer clic en el siguiente enlace, asegurandose que se está conectado\ncon la cuenta %{login} y activar el acceso para las aplicaciones menos seguras.","gmail security link":"Activar el acceso para las aplicaciones menos seguras","plugin name Gallery":"Galería de documentos adjuntos","plugin name medium-editor":"Editor Medium","plugin name MiniSlate":"Editor MiniSlate","plugin name Sample JS":"Ejemplo","plugin name Keyboard shortcuts":"Atajos de teclado","plugin name VCard":"Contactos Vcards","plugin modal close":"Cerrar","calendar unknown format":"Este mensaje contiene una invitación a un evento en un formato actualmente desconocido.","tooltip reply":"Responder","tooltip reply all":"Responder a todos","tooltip forward":"Tranferir","tooltip remove message":"Suprimir","tooltip open attachments":"Abrir la lista de documentos adjuntos","tooltip open attachment":"Abrir el documento adjunto","tooltip download attachment":"Descargar el documento adjunto","tooltip previous conversation":"Ir a la conversación precedente","tooltip next conversation":"Ir a la conversación siguiente","tooltip filter only unread":"Visualizar sólo los mensajes no leídos","tooltip filter only important":"Visualizar sólo los mensajes importantes","tooltip filter only attachment":"Mostrar sólo los mensajes con archivos adjuntos","tooltip account parameters":"Parámetros de la cuenta","tooltip delete selection":"Suprimir todos los mensajes seleccionados","tooltip filter":"Filtrar","tooltip display filters":"Visualizar filtros","tooltip expunge mailbox":"Suprimir buzón de correos","tooltip add contact":"Añadir a sus contactos","tooltip show contact":"Visualizar contacto","filters unseen":"no leído","filters flagged":"leídos","filters attach":"archivos adjuntos","filters search placeholder":".Buscar...","daterangepicker placeholder":"por fecha","daterangepicker presets yesterday":"ayer","daterangepicker presets last week":"la última semana","daterangepicker presets last month":"el último mes","daterangepicker clear":"borrar"}}),require.register("locales/fr",function(e,t,n){n.exports={"app loading":"Chargement…","app back":"Retour","app cancel":"Annuler","app confirm":"Confirmer","app menu":"Menu","app search":"Rechercher…","app alert close":"Fermer","app unimplemented":"Non implémenté","app error":"Oups, une erreur est survenue, veuillez réessayer","app confirm delete":"Confirmer la suppression",compose:"Écrire un nouveau message","compose default":"Bonjour, comment ça va ?","compose from":"De","compose to":"À","compose to help":"Liste des destinataires principaux","compose cc":"Cc","compose cc help":"Liste des destinataires en copie","compose bcc":"Cci","compose bcc help":"Liste des destinataires en copie cachée","compose subject":"Objet","compose content":"Contenu","compose subject help":"Sujet","compose reply prefix":"Re:","compose reply separator":"Le %{date}, %{sender} a écrit","compose forward prefix":"Fwd:","compose forward separator":"Le %{date}, %{sender} a écrit","compose action draft":"Enregistrer","compose action send":"Envoyer","compose action delete":"Supprimer","compose action sending":"Envoi…","compose toggle cc":"Copie à","compose toggle bcc":"Copie cachée à","compose error no dest":"Vous n'avez pas saisi de destinataires","compose error no subject":"Vous n'avez pas saisi de sujet","compose confirm keep draft":"Vous n'avez pas envoyé le message, voulez-vous conserver le brouillon ?","compose confirm draft keep":"Conserver le brouillon","compose confirm draft delete":"Supprimer le brouillon","compose wrong email format":"L'adresse électronique donnée n'est pas bien formatée : %{address}.","compose forward header":"Message transféré","compose forward subject":"Sujet :","compose forward date":"Date :","compose forward from":"De :","compose forward to":"Pour :","menu show":"Montrer le menu","menu compose":"Nouveau","menu account new":"Ajouter un compte","menu settings":"Paramètres","menu mailbox total":"%{smart_count} message |||| %{smart_count} messages","menu mailbox unread":"dont %{smart_count} non lu |||| dont %{smart_count} non lus","menu mailbox new":"et %{smart_count} nouveaux |||| et %{smart_count} nouveaux","menu favorites on":"Moins","menu favorites off":"Davantage","menu toggle":"Menu","menu refresh label":"Actualiser","menu refreshing":"Actualisation en cours…","list empty":"Pas d'email dans cette boîte..","no flagged message":"Pas d'email important dans cette boîte.","no unseen message":"Pas d'email non-lu dans cette boîte.","no attach message":"Pas d'email avec des pièces jointes.","no filter message":"Pas d'email pour ce filtre.","list fetching":"Chargement…","list search empty":'Aucun résultat trouvé pour la requête "%{query}".',"list count":"%{smart_count} message dans cette boite |||| %{smart_count} messages dans cette boite","list search count":"%{smart_count} résultat trouvé. |||| %{smart_count} résultats trouvés.","list filter":"Filtrer","list filter all":"Tous","list filter unseen":"Non lus","list filter flagged":"Importants","list filter attach":"Pièces jointes","list filter from":"L'expéditeur est","list filter date":"Date comprise dans","list filter date placeholder":"JJ/MM/AAAA","list filter dest":"Le destinataire est","list filter subject":"Le sujet commence par…","list sort":"Trier","list sort date":"Date","list sort subject":"Sujet","list option compact":"Compacter","list next page":"Davantage de messages","list end":"FIN","list mass no message":"Aucun message sélectionné","list delete confirm":"Voulez-vous vraiment supprimer ce message ?||||\nVoulez-vous vraiment supprimer %{smart_count} messages ?","list delete conv confirm":"Voulez-vous vraiment supprimer cette conversation ?||||\nVoulez-vous vraiment supprimer %{smart_count} conversations ?","mail to":"À","mail cc":"Copie","headers from":"De","headers to":"À","headers cc":"Copie","headers reply-to":"Répondre à","headers date":"Date","headers subject":"Objet","load more messages":"Charger %{smart_count} message de plus |||| Charger %{smart_count} messages de plus","length bytes":"octets","length kbytes":"ko","length mbytes":"Mo","mail action reply":"Répondre","mail action reply all":"Répondre à tous","mail action forward":"Transférer","mail action delete":"Supprimer","mail action mark":"Marquer comme","mail action copy":"Copier","mail action move":"Déplacer","mail action more":"Plus","mail action headers":"En-têtes","mail action raw":"Message brut","mail mark spam":"Pourriel","mail mark nospam":"Légitime","mail mark fav":"Important","mail mark nofav":"Normal","mail mark read":"Lu","mail mark unread":"Non lu","mail confirm delete title":"Supprimer ce message","mail confirm delete":"Voulez-vous vraiment supprimer le message « %{subject} » ?","mail confirm delete nosubject":"Voulez-vous vraiment supprimer ce message","mail confirm delete cancel":"Annuler","mail confirm delete delete":"Annuler","mail action conversation delete":"Supprimer la conversation","mail action conversation move":"Déplacer la conversation","mail action conversation seen":"Marquer la conversation comme lue","mail action conversation unseen":"Marquer la conversation comme non lue","mail action conversation flagged":"Marquer la conversation comme importante","mail action conversation noflag":"Marquer la conversation comme normale","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"Nouveau compte","account edit":"Modifier le compte","account add":"Créer","account save":"Enregistrer","account saving":"En cours…","account check":"Tester la connexion","account accountType short":"IMAP","account accountType":"Type de compte","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Utiliser SSL","account imapServer short":"imap.fournisseur.tld","account imapServer":"Serveur IMAP","account imapTLS":"Utiliser STARTTLS","account imapLogin short":"Utilisateur IMAP","account imapLogin":"Utilisateur IMAP (s'il est différent de l'adresse mail)","account label short":"Nom abrégé","account label":"Nom du compte","account login short":"Votre adresse électronique","account login":"Adresse","account name short":"Votre nom, tel qu'il sera affiché","account name":"Votre nom","account oauth":"Ce compte utilise Google OAuth","account password":"Mot de passe","account receiving server":"Serveur de réception","account sending server":"Serveur d'envoi","account smtpLogin short":"Utilisateur SMTP","account smtpLogin":"Utilisateur SMTP (s'il est différent de l'adresse mail)","account smtpMethod":"Méthode d'authentification","account smtpMethod NONE":"Aucune","account smtpMethod PLAIN":"Simple","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"Mot de passe SMTP","account smtpPassword":"Mot de passe SMTP (s'il est différent du mot de passe IMAP)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Utiliser SSL","account smtpServer short":"smtp.fournisseur.tld","account smtpServer":"Serveur sortant","account smtpTLS":"Utiliser STARTTLS","account remove":"Supprimer ce compte","account removed":"Compte supprimé","account remove confirm":"Voulez-vous vraiment supprimer le compte “%{label}” ?","account draft mailbox":"Enregistrer les brouillons dans","account sent mailbox":"Enregistrer les messages envoyés dans","account trash mailbox":"Corbeille","account mailboxes":"Dossiers","account special mailboxes":"Dossiers spéciaux","account newmailbox label":"Nouveaux dossier","account newmailbox placeholder":"Nom","account newmailbox parent":"Créer sous","account confirm delbox":"Voulez-vous vraiment supprimer tous les messages de la corbeille ?","account tab account":"Compte","account tab mailboxes":"Dossiers","account errors":"Certaines informations manquent ou sont incorrectes","account type":"Type de compte","account updated":"Modification enregistrée","account checked":"Paramètres corrects","account creation ok":"Youpi, le compte a été créé ! Sélectionnez à présent les dossiers que vous voulez voir apparaitre dans le menu","account refreshed":"Actualisé","account refresh error":"Une erreur est survenue, vérifiez les paramètres de connexion aux comptes","account identifiers":"Identification","account actions":"Actions","account danger zone":"Zone dangereuse","account no special mailboxes":"Veuillez choisir des dossiers spécifiques dédiés à vos brouillons, messages envoyés et messages supprimés","account imap hide advanced":"Masquer les paramètres avancés","account imap show advanced":"Afficher les paramètres avancés","account smtp hide advanced":"Masquer les paramètres avancés","account smtp show advanced":"Afficher les paramètres avancés","account tab signature":"Signature","account signature short":"Saisissez ici le texte qui sera ajouté en signature au bas de vos messages.","account signature":"Signature du mail","account signature save":"Enregistrer","mailbox create ok":"Dossier créé","mailbox create ko":"Erreur lors de la création du dossier","mailbox update ok":"Dossier mis à jour","mailbox update ko":"Erreur de mise à jour","mailbox delete ok":"Dossier supprimé","mailbox delete ko":"Erreur de suppression du dossier","mailbox expunge ok":"Corbeille vidée",
"mailbox expunge ko":"Erreur de suppression des messages","mailbox title edit":"Renommer le dossier","mailbox title delete":"Supprimer le dossier","mailbox title edit save":"Enregistrer","mailbox title edit cancel":"Annuler","mailbox title add":"Créer un dossier","mailbox title add cancel":"Annuler","mailbox title favorite":"Dossier affiché","mailbox title not favorite":"Dossier non affiché","mailbox title total":"Total","mailbox title unread":"Non lus","mailbox title new":"Nouveaux","config error auth":"Impossible de se connecter avec ces paramètres","config error imapPort":"Paramètres IMAP invalides","config error imapServer":"Serveur IMAP invalide","config error imapTLS":"Erreur IMAP TLS","config error smtpPort":"Port du serveur d'envoi invalide","config error smtpServer":"Serveur d'envoi invalide","config error nomailboxes":"Ce compte n'a pas encore de dossier, commencez par en créer","action undo":"Défaire","action undo ok":"Action annulée","action undo ko":"Impossible de défaire cette action","message action sent ok":"Message envoyé !","message action sent ko":"Une erreur est survenue :","message action draft ok":"Message sauvegardé !","message action draft ko":"Une erreur est survenue :","message delete ok":"Le message « %{subject} » a été supprimé","message delete ko":"Erreur lors de la suppression du message :","message move ok":"Le message « %{subject} » a été déplacé","message move ko":"Erreur lors du déplacement du message « %{subject} » :","message mark ok":"Message marqué","message flag ko":"Erreur en marquant le message","message flag ok":"Message marqué","message mark ko":"Erreur en marquant le message :","draft delete ok":"Le brouillon « %{subject} » a été supprimé","draft delete ko":"Erreur lors de la suppression du brouillon :","draft move ok":"Brouillon « %{subject} » déplacé","draft move ko":"Erreur lors du déplacement du brouillon « %{subject} » :","draft mark ok":"Brouillon marqué","draft mark ko":"Erreur en marquant le message :","conversation move ok":"Conversation « %{subject} » déplacée","conversation move ko":"Le déplacement de « %{subject} » a échoué","conversation delete ok":"Conversation « %{subject} » supprimée","conversation delete ko":"L'opération a échoué","conversation seen ok":"Ok","conversation seen ko":"L'opération a échoué","conversation unseen ok":"Ok","conversation unseen ko":"L'opération a échoué","undo last action":"Défaire la dernière action","conversation flagged ko":"L'opération a échoué","conversation noflag ko":"L'opération a échoué","conversations move ok":"%{smart_count} conversation déplacée||||\n%{smart_count} conversations déplacées","conversations move ko":"Erreur lors du déplacement d'%{smart_count} conversation||||\nErreur lors du déplacement de %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation supprimée||||\n%{smart_count} conversations supprimées","conversations delete ko":"Erreur lors de la suppression d' %{smart_count} conversation ||||\nErreur lors de la suppression de %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation déplacée||||\n%{smart_count} conversations déplacées","conversations seen ko":"Erreur en marquant %{smart_count} message comme lu||||\nErreur en marquant %{smart_count} messages comme lus||||","conversations unseen ok":"%{smart_count} conversation marquée comme non lue||||\n%{smart_count} conversations marquées comme non lues","conversations unseen ko":"Erreur en marquant %{smart_count} conversation comme non lue||||\nErreur en marquant %{smart_count} conversations comme non lues","conversations flagged ko":"Erreur en marquant %{smart_count} conversation comme importante||||\nErreur en marquant %{smart_count} conversations comme importantes","conversations noflag ko":"%{smart_count} conversation marquée comme non importante ||||\n%{smart_count} conversations marquées comme non importantes","message images warning":"L'affichage des images du message a été bloqué","message images display":"Afficher les images","message html display":"Afficher en HTML","message delete no trash":"Choisissez d'abord un dossier Corbeille","message delete already":"Ce message est déjà dans la corbeille","message move already":"Ce message est déjà dans ce dossier","undo ok":"Action annulée","undo ko":"Erreur lors de l'annulation","undo unavailable":"Annulation non disponible","message preview title":"Voir les pièces jointes","settings title":"Paramètres","settings button save":"Enregistrer","settings plugins":"Modules complémentaires","settings plugin add":"Ajouter","settings plugin del":"Supprimer","settings plugin help":"Documentation","settings plugin new name":"Nom du plugin","settings plugin new url":"Url du plugin","settings label autosaveDraft":"Enregistrer le message en tant que brouillon pendant la composition","settings label composeInHTML":"Éditeur riche","settings label composeOnTop":"Répondre au-dessus du message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Afficher les conversations","settings label displayPreview":"Prévisualiser les messages","settings label messageDisplayHTML":"Afficher les messages en HTML","settings label messageDisplayImages":"Afficher les images","settings label messageConfirmDelete":"Demander confirmation avant de supprimer un message","settings label layoutStyle":"Affichage","settings label layoutStyle horizontal":"Message sous la liste","settings label layoutStyle vertical":"Message à côté de la liste","settings label layoutStyle three":"Trois colonnes","settings label listStyle":"Affichage de la liste des messages","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Langue","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Erreur d'enregistrement des paramètres, veuillez réessayer","picker drop here":"Glissez-déposez ici des fichiers ou choisissez des fichiers locaux","mailbox pick one":"Choisissez une boîte","mailbox pick null":"Pas de boîte pour ça","task account-fetch":"Rafraîchissement %{account}","task box-fetch":"Rafraîchissement %{box}","task apply-diff-fetch":"Téléchargement des messages du dossier %{box} de %{account}","task apply-diff-remove":"Suppression des messages du dossier %{box} de %{account}","task recover-uidvalidity":"Analyse du compte","there were errors":"%{smart_count} erreur. |||| %{smart_count} erreurs.","modal please report":"Merci de bien vouloir transmettre ces informations à cozy.","modal please contribute":"Merci de contribuer","modal copy content":"Copier l'information dans le presse-papiers","validate must not be empty":"Ce champ doit être renseigné","toast hide":"Masquer les alertes","toast show":"Afficher les alertes","toast close all":"Fermer toutes les alertes","notif new title":"Messagerie Cozy","notif new":"%{smart_count} message non-lu dans le compte %{account}||||\n%{smart_count} messages non-lus dans le compte  %{account}","notif complete":"Importation du compte %{account} finie.","contact form":"Sélectionnez des contacts","contact form placeholder":"Nom","contact button label":"Ajouter au carnet d'adresses","contact create success":"%{contact} a été ajouté(e) à vos contacts","contact create error":"L'ajout à votre carnet d'adresses a échoué : {error}","message contact creation title":"Ajouter un contact","message contact creation":"Voulez-vous créer un contact pour %{contact}&nbsp;?","gmail security tile":"Sécurité Gmail","gmail security body":"Gmail considère les connexions par nom d'utilisateur et mot de passe\ncomme non sécurisées. Veuillez cliquer sur le lien ci-dessous, assurez-vous\nd'être connecté avec le compte %{login} et activez l'accès\npour les applications moins sécurisées.","gmail security link":"Activer l'accès pour les applications moins sécurisées","plugin name Gallery":"Galerie de pièces jointes","plugin name medium-editor":"Éditeur Medium","plugin name MiniSlate":"Éditeur MiniSlate","plugin name Sample JS":"Exemple","plugin name Keyboard shortcuts":"Raccourcis clavier","plugin name VCard":"Affichage de VCard","plugin modal close":"Fermer","calendar unknown format":"Ce message contient une invitation à un évènement\ndans un format actuellement non pris en charge.","tooltip reply":"Répondre","tooltip reply all":"Répondre à tous","tooltip forward":"Transférer","tooltip remove message":"Supprimer","tooltip open attachments":"Ouvrir la liste des pièces jointes","tooltip open attachment":"Ouvrir la pièce jointe","tooltip download attachment":"Télécharger la pièce jointe","tooltip previous conversation":"Aller à la conversation précédente","tooltip next conversation":"Aller à la conversation suivante","tooltip filter only unread":"Afficher seulement les messages non lus","tooltip filter only important":"Afficher seulement les messages importants","tooltip filter only attachment":"Afficher seulement les messages avec des pièces jointes","tooltip account parameters":"Paramètres du compte","tooltip delete selection":"Supprimer tous les messages sélectionnés","tooltip filter":"Filtre","tooltip display filters":"Afficher les filtres","tooltip expunge mailbox":"Vider la boîte mail","tooltip add contact":"Ajouter à vos contacts","tooltip show contact":"Afficher le contact","filters unseen":"non lus","filters flagged":"lus","filters attach":"pièces jointes","filters search placeholder":"Rechercher…","daterangepicker placeholder":"par date","daterangepicker presets yesterday":"hier","daterangepicker presets last week":"la semaine dernière","daterangepicker presets last month":"le mois dernier","daterangepicker clear":"effacer"}}),require.register("locales/it",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/ko",function(e,t,n){n.exports={"app loading":"불러오는중...","app back":"뒤로","app cancel":"취소","app confirm":"확인","app menu":"메뉴","app search":"메시지 검색...","app alert close":"닫기","app unimplemented":"준비중 입니다.","app error":"실행 할 수 없습니다. 다시 시도해 주세요","app confirm delete":"정말로 삭제 하시겠습니까",compose:"새 메일 작성","compose default":"안녕하세요, 오늘 하루 어떠셨나요?","compose from":"보낸 사람","compose to":"받는 사람","compose to help":"받는 사람 목록","compose cc":"참조","compose cc help":"참조 목록","compose bcc":"숨은 참조","compose bcc help":"숨은 참조 목록","compose subject":"제목","compose content":"내용","compose subject help":"제목","compose reply prefix":"답장:","compose reply separator":"%{date}일에 %{sender} 님이 작성 하였습니다","compose forward prefix":"전달:","compose forward separator":"%{date}일에 %{sender} 님이 작성 하였습니다","compose action draft":"임시 저장","compose action send":"보내기","compose action delete":"임시 저장 메일 삭제","compose action sending":"보내는중","compose toggle cc":"참조","compose toggle bcc":"숨은참조","compose error no dest":"받는 사람이 없습니다.","compose error no subject":"제목을 입력하세요","compose confirm keep draft":"메시지를 보내지 못했습니다, 임시 저장소에 보관 할까요?","compose confirm draft keep":"임시 저장소에 보관","compose confirm draft delete":"임시 저장 메일 삭제","compose wrong email format":"형식오류:%{address}","compose forward header":"메시지를 전달 하였습니다","compose forward subject":"제목:","compose forward date":"일자:","compose forward from":"보낸 사람:","compose forward to":"받는 사람:","menu show":"메뉴 보이기","menu compose":"새 메일 쓰기","menu account new":"새 계정 추가","menu settings":"옵션","menu mailbox total":"%{smart_count} 개의 메시지|||| %{smart_count} 개의 메시지","menu mailbox unread":", %{smart_count} 개의 읽지 않은 메시지 ||||, %{smart_count} 개의 읽지 않은 메시지","menu mailbox new":", %{smart_count} 개의 새 메시지|||| and %{smart_count} 개의 새 메시지","menu favorites on":"간략히","menu favorites off":"더보기","menu toggle":"토글 메뉴","menu refresh label":"새로고침","menu refreshing":"새로고침 중....","list empty":"이 메일 함에는 이메일이 없습니다.","no flagged message":"이 메일 함에는 중요 이메일이 없습니다.","no unseen message":"이 메일 함에 있는 모든 메시지 읽은 상태로 표시","no attach message":"첨부 파일을 포함한 메시지가 없습니다","no filter message":"이 필터에 해당하는 이메일이 없습니다.","list fetching":"불러오는중...","list search empty":'"%{query}"과 일치하는 이메일을 찾지 못했습니다.',"list count":"이 메시지 함에는 %{smart_count} 개의 메시지 |||| 이 메시지 함에는 %{smart_count} 개의 메시지","list search count":"%{smart_count} 개의 결과. |||| %{smart_count} 개의 결과.","list filter":"필터","list filter all":"전체","list filter unseen":"숨기기","list filter flagged":"중요","list filter attach":"첨부","list filter from":"보낸 사람","list filter date":"일자","list filter date placeholder":"일/월/년도","list filter dest":"받는 사람","list filter subject":"..으로 시작 되는 제목","list sort":"정렬","list sort date":"일자","list sort subject":"제목","list option compact":"간소화","list next page":"더 많은 메시지","list end":"마지막 페이지","list mass no message":"선택된 메시지가 없습니다","list delete confirm":"이 메시지를 정말로 삭제 하시겠습니까? ||||\n%{smart_count}개의 메시지를 삭제 하시겠습니까?","list delete conv confirm":"정말로 이 내용을 삭제 하시겠습니까? ||||\n정말로 %{smart_count}개의 내용을 삭제 하시겠습니까?","mail to":"받는 사람:","mail cc":"참조:","headers from":"보낸 사람","headers to":"받는 사람","headers cc":"참조","headers reply-to":"에게 답장","headers date":"일자","headers subject":"제목","load more messages":"%{smart_count} 개의 메시지 더 보이기 |||| %{smart_count} 개의 메시지 더 보이기","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"답장","mail action reply all":"전체 답장","mail action forward":"전달","mail action delete":"삭제","mail action mark":"으로 표시","mail action copy":"복사","mail action move":"이동","mail action more":"더 많이","mail action headers":"헤더","mail action raw":"원본","mail mark spam":"스팸","mail mark nospam":"스팸 아님","mail mark fav":"중요","mail mark nofav":"중요하지 않음","mail mark read":"읽기","mail mark unread":"읽지 않음","mail confirm delete title":"메시지 삭제","mail confirm delete":"“%{subject}” 메시지를 삭제 하시겠습니까?","mail confirm delete nosubject":"메시지를 삭제 하시겠습니까?","mail confirm delete cancel":"취소","mail confirm delete delete":"삭제","mail action conversation delete":"대화 삭제","mail action conversation move":"대화 이동","mail action conversation seen":"읽은 대화로 표시","mail action conversation unseen":"읽지 않은 대화로 표시","mail action conversation flagged":"중요한 대화로 표시","mail action conversation noflag":"일반 대화로 표시","mail conversation length":"%{smart_count} 개의 대화 메시지. ||||\n%{smart_count} 개의 대화 메시지","account new":"새 계정","account edit":"계정 편집","account add":"추가","account save":"저장","account saving":"저장중","account check":"연결 확인","account accountType short":"IMAP","account accountType":"계정 타입","account imapPort short":"993","account imapPort":"포트","account imapSSL":"SSL 사용","account imapServer short":"imap.provider.tld","account imapServer":"IMAP 서버","account imapTLS":"TLS 사용","account imapLogin short":"IMAP 사용자","account imapLogin":"IMAP 사용자(이메일 주소와 다른 경우)","account label short":"계정 표시 이름","account label":"계정 라벨","account login short":"이메일 주소","account login":"이메일 주소","account name short":"표시 이름","account name":"이름","account oauth":"이 계정에서 구글 OAuth 사용","account password":"비밀번호","account receiving server":"받는 서버","account sending server":"보내는 서버","account smtpLogin short":"SMTP 사용자","account smtpLogin":"SMTP 사용자(이메일 주소와 다른 경우)","account smtpMethod":"인증방법","account smtpMethod NONE":"없음","account smtpMethod PLAIN":"텍스트","account smtpMethod LOGIN":"로그인","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP 비밀번호","account smtpPassword":"SMTP 비밀번호(IMAP 비밀번호와 다른 경우)","account smtpPort short":"465",
"account smtpPort":"포트","account smtpSSL":"SSL 사용","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP 서버","account smtpTLS":"STARTTLS 사용","account remove":"계정 삭제","account removed":"계정 삭제","account remove confirm":"정말로 “%{label}” 계정을 삭제 하시겠습니까?","account draft mailbox":"임시보관함","account sent mailbox":"보낸편지함","account trash mailbox":"휴지통","account mailboxes":"폴더","account special mailboxes":"특수 메일함","account newmailbox label":"새 폴더","account newmailbox placeholder":"이름","account newmailbox parent":"상위:","account confirm delbox":"이 메일 함에 있는 모든 메시지를 삭제 하시겠습니까?","account tab account":"계정","account tab mailboxes":"폴더","account errors":"데이터가 없거나 잘못 되었습니다.","account type":"계정 타입","account updated":"계정 업데이트","account checked":"속성 정상","account creation ok":"계정을 성공적으로 생성 하였습니다. 메뉴에서 원하는 메일 함을 선택 하세요.","account refreshed":"계정 새로고침","account refresh error":"새로고침 오류, 속성을 확인하세요.","account identifiers":"계정정보","account actions":"도구","account danger zone":"주의","account no special mailboxes":"임시보관함, 보낸 메일함, 휴지통을 선택 해 주세요.","account imap hide advanced":"고급 속성 숨기기","account imap show advanced":"고급 속성 보기","account smtp hide advanced":"고급 속성 숨기기","account smtp show advanced":"고급 속성 보기","account tab signature":"서명","account signature short":"서명을 입력하세요. 모든 메일 하단에 추가 되어 집니다.","account signature":"이메일 서명","account signature save":"저장","mailbox create ok":"폴더 생성됨","mailbox create ko":"폴더 생성 중 오류","mailbox update ok":"폴더 변경됨","mailbox update ko":"폴더 변경 중 오류","mailbox delete ok":"폴더 삭제됨","mailbox delete ko":"폴더 삭제 중 오류","mailbox expunge ok":"폴더 정리됨","mailbox expunge ko":"폴더 정리 중 오류","mailbox title edit":"폴더 이름 바꾸기","mailbox title delete":"폴더 삭제","mailbox title edit save":"저장","mailbox title edit cancel":"취소","mailbox title add":"새 폴더 추가","mailbox title add cancel":"취소","mailbox title favorite":"폴더 표시","mailbox title not favorite":"폴더 표시 안함","mailbox title total":"전체","mailbox title unread":"읽지않음","mailbox title new":"새 메일","config error auth":"접속 속성 오류","config error imapPort":"IMAP 속성 오류","config error imapServer":"IMAP 서버 오류","config error imapTLS":"IMAP TLS 오류","config error smtpPort":"SMTP 포트 오류","config error smtpServer":"SMTP 서버 오류","config error nomailboxes":"현재 계정에 폴더가 없습니다. 새 폴더를 생성해 주세요.","action undo":"이전","action undo ok":"실행 취소됨","action undo ko":"이전으로 되돌릴 수 없습니다.","message action sent ok":"메시지를 보냈습니다.","message action sent ko":"메시지 보내는 중에 오류:","message action draft ok":"메시지를 저장 하였습니다.","message action draft ko":"메시지 저장 중에 오류:","message delete ok":"“%{subject}” 메시지 삭제됨","message delete ko":"메시지 삭제 중 오류:","message move ok":"“%{subject}” 메시지를 이동 하였습니다.","message move ko":"“%{subject}” 메시지 이동 중 오류:","message mark ok":"메시지 표시됨","message flag ko":"메시지 표시 중 오류가 발생 하였습니다.","message flag ok":"메시지 표시됨","message mark ko":"메시지 표시 중 오류:","draft delete ok":"“%{subject}” 임시 메일을 삭제 하였습니다.","draft delete ko":"임시 메일 삭제 중 오류:","draft move ok":"“%{subject}” 임시 메시지를 이동 하였습니다.","draft move ko":"“%{subject}” 임시 메시지 이동 중 오류:","draft mark ok":"임시 메시지로 표시","draft mark ko":"메시지 표시 중 오류:","conversation move ok":"“%{subject}” 대화를 이동 하였습니다.","conversation move ko":"“%{subject}” 대화를 이동 중에 오류가 발생 하였습니다.","conversation delete ok":"“%{subject}” 대화를 삭제 하였습니다.","conversation delete ko":"대화 삭제 중 오류가 발생 하였습니다.","conversation seen ok":"읽은 대화로 표시 하였습니다.","conversation seen ko":"오류","conversation unseen ok":"읽지 않은 대화로 표시","conversation unseen ko":"오류","undo last action":"마지막 명령 취소","conversation flagged ko":"오류","conversation noflag ko":"오류","conversations move ok":"%{smart_count}개의 대화를 이동 하였습니다.||||\n%{smart_count}개의 대화를 이동 하였습니다.","conversations move ko":"%{smart_count} 개의 대화를 이동 하는 동안 오류가 발생 하였습니다||||\n%{smart_count} 개의 대화를 이동 하는 동안 오류가 발생 하였습니다","conversations delete ok":"%{smart_count} 개의 대화가 삭제 되었습니다||||\n%{smart_count} 개의 대화가 삭제 되었습니다","conversations delete ko":"%{smart_count} 개의 대화를 삭제 하는 중에 오류가 발생 하였습니다 ||||\n%{smart_count} 개의 대화를 삭제 하는 중에 오류가 발생 하였습니다","conversations seen ok":"%{smart_count}개의 대화를 이동 하였습니다.||||\n%{smart_count}개의 대화를 이동 하였습니다.","conversations seen ko":"%{smart_count} 개를 읽음 표시 하는 동안 오류가 발생 하였습니다||||\n%{smart_count} 개를 읽음 표시 하는 동안 오류가 발생 하였습니다","conversations unseen ok":"%{smart_count} 개의 대화를 읽지 않음으로 표시 하였습니다||||\n%{smart_count} 개의 대화를 읽지 않음으로 표시 하였습니다","conversations unseen ko":"%{smart_count} 개의 대화를 읽지 않음으로 표시 하는 중에 오류가 발생 하였습니다||||\n%{smart_count} 개의 대화를 읽지 않음으로 표시 하는 중에 오류가 발생 하였습니다","conversations flagged ko":"%{smart_count} 개의 대화에 표시를 하는 중에 오류가 발생 하였습니다||||\n%{smart_count} 개의 대화에 표시를 하는 중에 오류가 발생 하였습니다","conversations noflag ko":"%{smart_count} 개의 대화에 표시를 해제 하였습니다||||\n%{smart_count} 개의 대화에 표시를 해제 하였습니다","message images warning":"차단된 이미지 보이기","message images display":"이미지 보이기","message html display":"HTML으로 보기","message delete no trash":"휴지통 폴더를 선택 하세요","message delete already":"휴지통 폴더에 메시지가 있습니다","message move already":"이 폴더에 메시지가 있습니다.","undo ok":"실행 취소","undo ko":"실행 취소를 하는 중에 오류가 발생 하였습니다.","undo unavailable":"실행 취소를 할 수 없습니다","message preview title":"첨부 보기","settings title":"설정","settings button save":"저장","settings plugins":"추가 모듈","settings plugin add":"추가","settings plugin del":"삭제","settings plugin help":"도움말","settings plugin new name":"플러그인 명","settings plugin new url":"플러그인 URL","settings label autosaveDraft":"작성 중에 임시 보관함에 저장 합니다","settings label composeInHTML":"HTML 에디터","settings label composeOnTop":"답장 메시지 위에 위치","settings label desktopNotifications":"알림","settings label displayConversation":"대화 보이기","settings label displayPreview":"메시지 미리보기 보이기","settings label messageDisplayHTML":"HTML 형식 메시지 보이기","settings label messageDisplayImages":"메시지에 이미지 보이기","settings label messageConfirmDelete":"메시지 삭제 전에 확인 하기","settings label layoutStyle":"레이아웃 보이기","settings label layoutStyle horizontal":"수평","settings label layoutStyle vertical":"수직","settings label layoutStyle three":"3개 컬럼","settings label listStyle":"목록 스타일 메시지","settings label listStyle default":"일반","settings label listStyle compact":"간소화","settings lang":"언어","settings lang en":"영어","settings lang fr":"프랑스어","settings lang de":"네델란드어","settings save error":"설정을 저장 할 수 없습니다, 다시 시도해 주세요.","picker drop here":"파일 선택 후 여기에 올려 놓으세요.","mailbox pick one":"한개 선택","mailbox pick null":"선택된 박스 없음","task account-fetch":"%{account} 계정 새로 고침 중","task box-fetch":"%{box} 메일 함을 새로 고침 중","task apply-diff-fetch":"%{account} 계정의 %{box} 메일 함으로부터 메일 받는 중","task apply-diff-remove":"%{account} 계정의 %{box} 메일 함으로부터 메일 삭제 중","task recover-uidvalidity":"분석 중","there were errors":"%{smart_count} 개의 오류가 발견 되었습니다. |||| %{smart_count} 개의 오류가 발견 되었습니다.","modal please report":"이 내용을 관리자에게 보내 주세요.","modal please contribute":"보내주세요.","modal copy content":"클립 보드로 정보를 복사","validate must not be empty":"필수 항목","toast hide":"경고 숨기기","toast show":"경고 보이기","toast close all":"모든 경고 닫기","notif new title":"CozyEmail","notif new":"%{account} 계정에 %{smart_count} 개의 읽지 않은 메시지가 있습니다. ||||\n%{account} 계정에 %{smart_count} 개의 읽지 않은 메시지가 있습니다.","notif complete":"%{account} 계정 설정을 완료 하였습니다.","contact form":"연락처 선택","contact form placeholder":"연락처 명","contact button label":"주소록 추가","contact create success":"%{contact}은 이미 추가된 연락처 입니다.","contact create error":"연락처 추가 중 오류 발생: {error}","message contact creation title":"연락처 추가","message contact creation":"%{contact} 연락처를 새로 만드시겠습니까?","gmail security tile":"Gmail 보안에 대하여","gmail security body":"아이디, 비번을 이용하여 Gmail에 접속 하는 것은 안전 하지 않습니다.\n아래 링크를 클릭 하세요.\n%{login} 계정을 이용하여 연결 하고, 접근 하도록 할 수 있습니다.","gmail security link":"접근을 허용 합니다","plugin name Gallery":"첨부 갤러리","plugin name medium-editor":"중간 에디터","plugin name MiniSlate":"간편 에디터","plugin name Sample JS":"예시","plugin name Keyboard shortcuts":"키보드 단축 키","plugin name VCard":"연락처 VCard","plugin modal close":"닫기","calendar unknown format":"이 메시지는 알 수 없는 형식의 이벤트 초대를 포함 하고 있습니다.","tooltip reply":"답장","tooltip reply all":"전체 답장","tooltip forward":"전달","tooltip remove message":"삭제","tooltip open attachments":"첨부 목록 열기","tooltip open attachment":"첨부 열기","tooltip download attachment":"첨부 다운로드","tooltip previous conversation":"이전 대화로 가기","tooltip next conversation":"다음 대화로 가기","tooltip filter only unread":"읽지 않은 메시지만 보이기","tooltip filter only important":"중요 표시된 메시지만 보이기","tooltip filter only attachment":"첨부 파일이 있는 메시지만 보이기","tooltip account parameters":"계정 속성","tooltip delete selection":"선택된 모든 메시지 삭제","tooltip filter":"필터","tooltip display filters":"필터 보이기","tooltip expunge mailbox":"메일함 삭제","tooltip add contact":"연락처에 추가","tooltip show contact":"연락처 보이기","filters unseen":"읽지 않음","filters flagged":"공유됨","filters attach":"첨부","filters search placeholder":"검색...","daterangepicker placeholder":"날짜","daterangepicker presets yesterday":"어제","daterangepicker presets last week":"지난주","daterangepicker presets last month":"지난달","daterangepicker clear":"비우기"}}),require.register("locales/nl_NL",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/pl",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)",
"account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/pt_BR",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/ro",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?",
"mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("locales/ru",function(e,t,n){n.exports={"app loading":"Loading…","app back":"Back","app cancel":"Cancel","app confirm":"Confirm","app menu":"Menu","app search":"Search…","app alert close":"Close","app unimplemented":"Not implemented yet","app error":"Argh, I'm unable to perform this action, please try again","app confirm delete":"Confirm delete",compose:"Compose new email","compose default":"Hello, how are you doing today?","compose from":"From","compose to":"To","compose to help":"Recipients list","compose cc":"Cc","compose cc help":"Copy list","compose bcc":"Bcc","compose bcc help":"Hidden copy list","compose subject":"Subject","compose content":"Content","compose subject help":"Subject","compose reply prefix":"Re:","compose reply separator":"On %{date}, %{sender} wrote","compose forward prefix":"Fwd:","compose forward separator":"On %{date}, %{sender} wrote","compose action draft":"Save draft","compose action send":"Send","compose action delete":"Delete draft","compose action sending":"Sending","compose toggle cc":"Cc","compose toggle bcc":"Bcc","compose error no dest":"You can not send a message to nobody","compose error no subject":"Please set a subject","compose confirm keep draft":"Message not sent, keep the draft?","compose confirm draft keep":"Keep draft","compose confirm draft delete":"Delete draft","compose wrong email format":"The given email is unproperly formatted: %{address}.","compose forward header":"Forwarded message","compose forward subject":"Subject:","compose forward date":"Date:","compose forward from":"From:","compose forward to":"To:","menu show":"Show menu","menu compose":"Compose","menu account new":"New Mailbox","menu settings":"Parameters","menu mailbox total":"%{smart_count} message|||| %{smart_count} messages","menu mailbox unread":", %{smart_count} unread message ||||, %{smart_count} unread messages","menu mailbox new":"and %{smart_count} new message|||| and %{smart_count} new messages","menu favorites on":"Less","menu favorites off":"More","menu toggle":"Toggle Menu","menu refresh label":"Refresh","menu refreshing":"Refreshing...","list empty":"No email in this box.","no flagged message":"No Important email in this box.","no unseen message":"All emails have been read in this box","no attach message":"No message with attachments","no filter message":"No email for this filter.","list fetching":"Loading…","list search empty":'No result found for the query "%{query}".',"list count":"%{smart_count} message in this box |||| %{smart_count} messages in this box","list search count":"%{smart_count} result found. |||| %{smart_count} results found.","list filter":"Filter","list filter all":"All","list filter unseen":"Unseen","list filter flagged":"Important","list filter attach":"Attachments","list filter from":"Sender is","list filter date":"Date in","list filter date placeholder":"DD/MM/YYYY","list filter dest":"Recipient is","list filter subject":"Subject starts with…","list sort":"Sort","list sort date":"Date","list sort subject":"Subject","list option compact":"Compact","list next page":"More messages","list end":"This is the end of the road","list mass no message":"No message selected","list delete confirm":"Do you really want to delete this message ? ||||\nDo you really want to delete %{smart_count} messages?","list delete conv confirm":"Do you really want to delete this conversation ? ||||\nDo you really want to delete %{smart_count} conversation?","mail to":"To:","mail cc":"Cc:","headers from":"From","headers to":"To","headers cc":"Cc","headers reply-to":"Reply to","headers date":"Date","headers subject":"Subject","load more messages":"Load %{smart_count} more message |||| load %{smart_count} more messages","length bytes":"bytes","length kbytes":"Kb","length mbytes":"Mb","mail action reply":"Reply","mail action reply all":"Reply all","mail action forward":"Forward","mail action delete":"Delete","mail action mark":"Mark as","mail action copy":"Copy","mail action move":"Move","mail action more":"More","mail action headers":"Headers","mail action raw":"Raw message","mail mark spam":"Spam","mail mark nospam":"No spam","mail mark fav":"Important","mail mark nofav":"Not important","mail mark read":"Read","mail mark unread":"Unread","mail confirm delete title":"Delete message","mail confirm delete":"Do you really want to delete message “%{subject}”?","mail confirm delete nosubject":"Do you really want to delete this message?","mail confirm delete cancel":"Cancel","mail confirm delete delete":"Delete","mail action conversation delete":"Delete conversation","mail action conversation move":"Move conversation","mail action conversation seen":"Mark conversation as read","mail action conversation unseen":"Mark conversation as unread","mail action conversation flagged":"Mark conversation as important","mail action conversation noflag":"Mark conversation as normal","mail conversation length":"%{smart_count} message dans cette conversation. ||||\n%{smart_count} messages dans cette conversation.","account new":"New account","account edit":"Edit account","account add":"Add","account save":"Save","account saving":"Saving","account check":"Check connection","account accountType short":"IMAP","account accountType":"Account type","account imapPort short":"993","account imapPort":"Port","account imapSSL":"Use SSL","account imapServer short":"imap.provider.tld","account imapServer":"IMAP server","account imapTLS":"Use TLS","account imapLogin short":"IMAP user","account imapLogin":"IMAP user (if different from email address)","account label short":"A short mailbox name","account label":"Account label","account login short":"Your email address","account login":"Email address","account name short":"Your name, as it will be displayed","account name":"Your name","account oauth":"This account uses Google OAuth","account password":"Password","account receiving server":"Receiving server","account sending server":"Sending server","account smtpLogin short":"SMTP user","account smtpLogin":"SMTP user (if different from email address)","account smtpMethod":"Authentification method","account smtpMethod NONE":"None","account smtpMethod PLAIN":"Plain","account smtpMethod LOGIN":"Login","account smtpMethod CRAM-MD5":"Cram-MD5","account smtpPassword short":"SMTP password","account smtpPassword":"SMTP password (if different from IMAP password)","account smtpPort short":"465","account smtpPort":"Port","account smtpSSL":"Use SSL","account smtpServer short":"smtp.provider.tld","account smtpServer":"SMTP server","account smtpTLS":"Use STARTTLS","account remove":"Remove this account","account removed":"Account removed","account remove confirm":"Do you really want to remove account “%{label}” ?","account draft mailbox":"Draft box","account sent mailbox":"Sent box","account trash mailbox":"Trash","account mailboxes":"Folders","account special mailboxes":"Special mailboxes","account newmailbox label":"New Folder","account newmailbox placeholder":"Name","account newmailbox parent":"Parent:","account confirm delbox":"Do you really want to delete all messages in this box?","account tab account":"Account","account tab mailboxes":"Folders","account errors":"Some data are missing or invalid","account type":"Account type","account updated":"Account updated","account checked":"Parameters ok","account creation ok":"Yeah! The account has been successfully created. Now select the mailboxes you want to see in the menu","account refreshed":"Account refreshed","account refresh error":"Error refreshing accounts, check parameters","account identifiers":"Identification","account actions":"Actions","account danger zone":"Danger Zone","account no special mailboxes":"Please choose a specific folder for your Drafts, Sent and Deleted emails.","account imap hide advanced":"Hide advanced parameters","account imap show advanced":"Show advanced parameters","account smtp hide advanced":"Hide advanced parameters","account smtp show advanced":"Show advanced parameters","account tab signature":"Signature","account signature short":"Type here the text that will be added to the bottom of all your emails.","account signature":"Email Signature","account signature save":"Save","mailbox create ok":"Folder created","mailbox create ko":"Error creating folder","mailbox update ok":"Folder updated","mailbox update ko":"Error updating folder","mailbox delete ok":"Folder deleted","mailbox delete ko":"Error deleting folder","mailbox expunge ok":"Folder expunged","mailbox expunge ko":"Error expunging folder","mailbox title edit":"Rename folder","mailbox title delete":"Delete folder","mailbox title edit save":"Save","mailbox title edit cancel":"Cancel","mailbox title add":"Add new folder","mailbox title add cancel":"Cancel","mailbox title favorite":"Folder is displayed","mailbox title not favorite":"Folder not displayed","mailbox title total":"Total","mailbox title unread":"Unread","mailbox title new":"New","config error auth":"Wrong connection parameters","config error imapPort":"Wrong IMAP parameters","config error imapServer":"Wrong IMAP server","config error imapTLS":"Wrong IMAP TLS","config error smtpPort":"Wrong SMTP Port","config error smtpServer":"Wrong SMTP Server","config error nomailboxes":"No folder in this account, please create one","action undo":"Undo","action undo ok":"Action cancelled","action undo ko":"Unable to undo action","message action sent ok":"Message sent","message action sent ko":"Error sending message:","message action draft ok":"Message saved","message action draft ko":"Error saving message:","message delete ok":"Message “%{subject}” deleted","message delete ko":"Error deleting message:","message move ok":"Message “%{subject}” moved","message move ko":"Error moving message “%{subject}”:","message mark ok":"Message marked","message flag ko":"Error marking message","message flag ok":"Message marked","message mark ko":"Error marking message:","draft delete ok":"Draft “%{subject}” deleted","draft delete ko":"Error deleting draft:","draft move ok":"Draft “%{subject}” moved","draft move ko":"Error moving draft “%{subject}”:","draft mark ok":"Draft marked","draft mark ko":"Error marking message:","conversation move ok":"Conversation “%{subject}” moved","conversation move ko":"Error moving conversation “%{subject}”","conversation delete ok":"Conversation “%{subject}” deleted","conversation delete ko":"Error deleting conversation","conversation seen ok":"Conversation marked as read","conversation seen ko":"Error","conversation unseen ok":"Conversation marked as unread","conversation unseen ko":"Error","undo last action":"Undo last action","conversation flagged ko":"Error","conversation noflag ko":"Error","conversations move ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations move ko":"Error moving %{smart_count} conversation||||\nError moving %{smart_count} conversations","conversations delete ok":"%{smart_count} conversation deleted||||\n%{smart_count} conversations deleted","conversations delete ko":"Error deleting %{smart_count} conversation ||||\nError deleting %{smart_count} conversations","conversations seen ok":"%{smart_count} conversation moved||||\n%{smart_count} conversations moved","conversations seen ko":"Error marking %{smart_count} as read||||\nError marking %{smart_count} as read","conversations unseen ok":"%{smart_count} conversation marked as unread||||\n%{smart_count} conversations marked as unread","conversations unseen ko":"Error marking %{smart_count} conversations as unread||||\nError marking %{smart_count} conversations as unread","conversations flagged ko":"Error marking %{smart_count} conversation as flagged||||\nError marking %{smart_count} conversations as flagged","conversations noflag ko":"%{smart_count} conversation unflagged||||\n%{smart_count} conversations unflagged","message images warning":"Display of images inside message has been blocked","message images display":"Display images","message html display":"Display HTML","message delete no trash":"Please select a Trash folder","message delete already":"Message already in trash folder","message move already":"Message already in this folder","undo ok":"Undone","undo ko":"Error undoing some action","undo unavailable":"Undo not available","message preview title":"View attachments","settings title":"Settings","settings button save":"Save","settings plugins":"Modules complémentaires","settings plugin add":"Add","settings plugin del":"Delete","settings plugin help":"Help","settings plugin new name":"Plugin Name","settings plugin new url":"Plugin URL","settings label autosaveDraft":"Save draft message while composing","settings label composeInHTML":"Rich message editor","settings label composeOnTop":"Reply on top of message","settings label desktopNotifications":"Notifications","settings label displayConversation":"Display conversations","settings label displayPreview":"Display message preview","settings label messageDisplayHTML":"Display message in HTML","settings label messageDisplayImages":"Display images inside messages","settings label messageConfirmDelete":"Confirm before deleting a message","settings label layoutStyle":"Display Layout","settings label layoutStyle horizontal":"Horizontal","settings label layoutStyle vertical":"Vertical","settings label layoutStyle three":"Three cols","settings label listStyle":"Message list style","settings label listStyle default":"Normal","settings label listStyle compact":"Compact","settings lang":"Language","settings lang en":"English","settings lang fr":"Français","settings lang de":"Deutsch","settings save error":"Unable to save settings, please try again","picker drop here":"Drop files here or Choose local files","mailbox pick one":"Pick one","mailbox pick null":"No box for this","task account-fetch":"Refreshing %{account}","task box-fetch":"Refreshing %{box}","task apply-diff-fetch":"Fetching mails from %{box} of %{account}","task apply-diff-remove":"Deleting mails from %{box} of %{account}","task recover-uidvalidity":"Analysing","there were errors":"%{smart_count} error. |||| %{smart_count} errors.","modal please report":"Please transmit this information to cozy.","modal please contribute":"Please contribute","modal copy content":"Copy information into clipboard","validate must not be empty":"This field is required","toast hide":"Hide alerts","toast show":"Display alerts","toast close all":"Close all alerts","notif new title":"CozyEmail","notif new":"%{smart_count} message not read in account %{account}||||\n%{smart_count} messages not read in account %{account}","notif complete":"Importation of account %{account} complete.","contact form":"Select contacts","contact form placeholder":"contact name","contact button label":"Add to addressbook","contact create success":"%{contact} has been added to your contacts","contact create error":"Error adding to your contacts : {error}","message contact creation title":"Add a contact","message contact creation":"Do you want to create a contact for %{contact}?","gmail security tile":"About Gmail security","gmail security body":"Gmail considers connection using username and password not safe.\nPlease click on the following link, make sure\nyou are connected with your %{login} account and enable access for\nless secure apps.","gmail security link":"Enable access for less secure apps.","plugin name Gallery":"Attachment gallery","plugin name medium-editor":"Medium editor","plugin name MiniSlate":"MiniSlate editor","plugin name Sample JS":"Sample","plugin name Keyboard shortcuts":"Keyboard shortcuts","plugin name VCard":"Contacts VCards","plugin modal close":"Close","calendar unknown format":"This message contains an invite to an event in a currently unknown format.","tooltip reply":"Answer","tooltip reply all":"Answer to all","tooltip forward":"Forward","tooltip remove message":"Remove","tooltip open attachments":"Open attachment list","tooltip open attachment":"Open attachment","tooltip download attachment":"Download the attachment","tooltip previous conversation":"Go to previous conversation","tooltip next conversation":"Go to next conversation","tooltip filter only unread":"Show only unread messages","tooltip filter only important":"Show only important messages","tooltip filter only attachment":"Show only messages with attachment","tooltip account parameters":"Account parameters","tooltip delete selection":"Delete all selected messages","tooltip filter":"Filter","tooltip display filters":"Display filters","tooltip expunge mailbox":"Expunge mailbox","tooltip add contact":"Add to your contacts","tooltip show contact":"Show contact","filters unseen":"unread","filters flagged":"stared","filters attach":"attachments","filters search placeholder":"Search...","daterangepicker placeholder":"by date","daterangepicker presets yesterday":"yesterday","daterangepicker presets last week":"last week","daterangepicker presets last month":"last month","daterangepicker clear":"clear"}}),require.register("mixins/participant_mixin",function(e,t,n){var o,a,r,s,i,c;c=React.DOM,i=c.span,r=c.a,s=c.i,a=t("../stores/contact_store"),o=t("../components/contact_label"),n.exports={formatUsers:function(e){var t,n,a,r;if(null!=e){if(_.isArray(e)){for(t=[],a=0,r=e.length;r>a;a++)n=e[a],t.push(o({contact:n,tooltip:!0})),n!==_.last(e)&&t.push(", ");return t}return o({contact:e,tooltip:!0})}}}}),require.register("mixins/router_mixin",function(e,t,n){var o;o=window.router,n.exports={buildUrl:function(e){return o.buildUrl.call(o,e)},buildClosePanelUrl:function(e){return o.buildClosePanelUrl.call(o,e)},redirect:function(e){var t;return t="string"==typeof e?e:this.buildUrl(e),o.navigate(t,!0)}}}),require.register("mixins/should_update_mixin",function(e,t,n){var o,a={}.hasOwnProperty;o=function(e,t,n){var o,r;if(e===t)return!0;for(o in e)if(a.call(e,o)&&(r=e[o],t[o]!==r))return n&&console.log("DIFF ON "+o),!1;for(o in t)if(a.call(t,o)&&null!=t[o]&&null==e[o])return n&&console.log("LOST "+o),!1;return!0},n.exports={ImmutableEquality:{shouldComponentUpdate:function(e,t){return o(this.props,e)&&o(this.state,t)}},UnderscoreEqualitySlow:{shouldComponentUpdate:function(e,t){var n,o;return o=_.isEqual(t,this.state),n=_.isEqual(e,this.props),!(o&&n)}},Logging:{shouldComponentUpdate:function(e,t){return!o(e,this.props,!0)||!o(t,this.state,!0)}}}}),require.register("mixins/store_watch_mixin",function(e,t,n){var o;n.exports=o=function(e){return{componentDidMount:function(){return e.forEach(function(e){return function(t){return t.on("change",e._setStateFromStores)}}(this))},componentWillUnmount:function(){return e.forEach(function(e){return function(t){return t.removeListener("change",e._setStateFromStores)}}(this))},getInitialState:function(){return this.getStateFromStores()},_setStateFromStores:function(){return this.isMounted()?this.setState(this.getStateFromStores()):void 0}}}}),require.register("mixins/tooltip_refresher_mixin",function(e,t,n){var o;n.exports=o={componentDidMount:function(){return AriaTips.bind()},componentDidUpdate:function(){}}}),require.register("prosemirror/collab/index",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),
o&&e(t,o),t}}(),r=t("../edit"),s=t("./rebase");e.rebaseSteps=s.rebaseSteps,r.defineOption("collab",!1,function(e,t){e.mod.collab&&(e.mod.collab.detach(),e.mod.collab=null),t&&(e.mod.collab=new i(e,t))});var i=function(){function e(t,n){var a=this;o(this,e),this.pm=t,this.options=n,this.version=n.version||0,this.versionDoc=t.doc,this.unconfirmedSteps=[],this.unconfirmedMaps=[],t.on("transform",this.onTransform=function(e){for(var t=0;t<e.steps.length;t++)a.unconfirmedSteps.push(e.steps[t]),a.unconfirmedMaps.push(e.maps[t]);a.signal("mustSend")}),t.on("beforeSetDoc",this.onSetDoc=function(){throw new Error("setDoc is not supported on a collaborative editor")}),t.history.allowCollapsing=!1}return a(e,[{key:"detach",value:function(){this.pm.off("transform",this.onTransform),this.pm.off("beforeSetDoc",this.onSetDoc),this.pm.history.allowCollapsing=!0}},{key:"hasSendableSteps",value:function(){return this.unconfirmedSteps.length>0}},{key:"sendableSteps",value:function(){return{version:this.version,doc:this.pm.doc,steps:this.unconfirmedSteps.slice()}}},{key:"confirmSteps",value:function(e){this.unconfirmedSteps.splice(0,e.steps.length),this.unconfirmedMaps.splice(0,e.steps.length),this.version+=e.steps.length,this.versionDoc=e.doc}},{key:"receive",value:function(e){var t=this.versionDoc,n=e.map(function(e){var n=e.apply(t);return t=n.doc,n.map});this.version+=e.length,this.versionDoc=t;var o=s.rebaseSteps(t,n,this.unconfirmedSteps,this.unconfirmedMaps);return this.unconfirmedSteps=o.transform.steps.slice(),this.unconfirmedMaps=o.transform.maps.slice(),this.pm.updateDoc(o.doc,o.mapping),this.pm.history.rebased(n,o.transform,o.positions),n}}]),e}();r.eventMixin(i)}),require.register("prosemirror/collab/rebase",function(e,t,n){"use strict";function o(e,t,n,o){for(var r=new a.Remapping([],t.slice()),s=new a.Transform(e),i=[],c=0;c<n.length;c++){var l=a.mapStep(n[c],r),u=l&&s.step(l),p=r.addToFront(o[c].invert());u?(r.addToBack(u.map,p),i.push(s.steps.length-1)):i.push(-1)}return{doc:s.doc,transform:s,mapping:r,positions:i}}Object.defineProperty(e,"__esModule",{value:!0}),e.rebaseSteps=o;var a=t("../transform")}),require.register("prosemirror/dom/index",function(e,t,n){"use strict";function o(e,t){var n=document.createElement(e);if(t)for(var o in t)"style"==o?n.style.cssText=t[o]:null!=t[o]&&n.setAttribute(o,t[o]);for(var r=arguments.length,s=Array(r>2?r-2:0),i=2;r>i;i++)s[i-2]=arguments[i];for(var c=0;c<s.length;c++)a(s[c],n);return n}function a(e,t){if("string"==typeof e&&(e=document.createTextNode(e)),Array.isArray(e))for(var n=0;n<e.length;n++)a(e[n],t);else t.appendChild(e)}function r(e){p?p(e):setTimeout(e,10)}function s(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function i(e,t){var n=e.className,o=s(t).exec(n);if(o){var a=n.slice(o.index+o[0].length);e.className=n.slice(0,o.index)+(a?o[1]+a:"")}}function c(e,t){var n=e.className;s(t).test(n)||(e.className+=(n?" ":"")+t)}function l(e,t){return 1!=t.nodeType&&(t=t.parentNode),t&&e.contains(t)}function u(e){var t=document.createElement("style");t.textContent=e,document.head.insertBefore(t,document.head.firstChild)}Object.defineProperty(e,"__esModule",{value:!0}),e.elt=o,e.requestAnimationFrame=r,e.rmClass=i,e.addClass=c,e.contains=l,e.insertCSS=u;var p=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,d=/MSIE \d/.test(navigator.userAgent),m=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),f={mac:/Mac/.test(navigator.platform),ie_upto10:d,ie_11up:m,ie:d||m,gecko:/gecko\/\d/i.test(navigator.userAgent)};e.browser=f}),require.register("prosemirror/edit/capturekeys",function(e,t,n){"use strict";function o(){}function a(e){if(e.selection.node){var t=r.findSelectionNear(e.doc,e.selection.from,1,!0);t&&r.setDOMSelectionToPos(e,t.head)}return!1}Object.defineProperty(e,"__esModule",{value:!0});var r=t("./selection"),s=t("../dom"),i=t("./keys"),c={Esc:o,Enter:o,"Mod-Enter":o,"Shift-Enter":o,Backspace:o,Delete:o,"Mod-B":o,"Mod-I":o,"Mod-Backspace":o,"Mod-Delete":o,"Shift-Backspace":o,"Shift-Delete":o,"Shift-Mod-Backspace":o,"Shift-Mod-Delete":o,"Mod-Z":o,"Mod-Y":o,"Shift-Mod-Z":o,"Ctrl-D":o,"Ctrl-H":o,"Ctrl-Alt-Backspace":o,"Alt-D":o,"Alt-Delete":o,"Alt-Backspace":o,"Mod-A":a};["Left","Right","Up","Down","Home","End","PageUp","PageDown"].forEach(function(e){c[e]=c["Shift-"+e]=c["Mod-"+e]=c["Shift-Mod-"+e]=c["Alt-"+e]=c["Shift-Alt-"+e]=a}),["Left","Mod-Left","Right","Mod-Right","Up","Down"].forEach(function(e){return delete c[e]}),s.browser.mac&&(c["Ctrl-F"]=c["Ctrl-B"]=c["Ctrl-P"]=c["Ctrl-N"]=c["Alt-F"]=c["Alt-B"]=c["Ctrl-A"]=c["Ctrl-E"]=c["Ctrl-V"]=c.goPageUp=a);var l=new i.Keymap(c);e.captureKeys=l}),require.register("prosemirror/edit/char",function(e,t,n){"use strict";function o(e){return/\w/.test(e)||r(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||s.test(e))}function a(e){return/\s/.test(e)?"space":o(e)?"word":"other"}function r(e){return e.charCodeAt(0)>=768&&i.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isWordChar=o,e.charCategory=a,e.isExtendingChar=r;var s=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,i=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/}),require.register("prosemirror/edit/commands",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){U[e]=t instanceof H?t:new H(e,t)}function i(e,t){q[e]=t}function c(e){var t=e.options.commandParamHandler;return t&&q[t]?q[t]:void 0}function l(e){function t(e){var t=function(t){var o=e[t],a=o.commands;a&&a.forEach(function(e){var t=e.name,a=e.create;n[t]=new H(t,a(o))})};for(var o in e)t(o)}var n=Object.create(null);for(var o in U)n[o]=U[o];return t(e.nodes),t(e.styles),n}function u(e){function t(e,o){if(Array.isArray(o))for(var a=0;a<o.length;a++)t(e,o[a]);else if(o){var r=/^(.+?)(?:\((\d+)\))?$/.exec(o),s=A(r,3),i=(s[0],s[1]),c=s[2],l=void 0===c?50:c;O["default"](n[i]||(n[i]=[]),{command:e,rank:l},function(e,t){return e.rank-t.rank})}}var n={};for(var o in e.commands){var a=e.commands[o];t(o,a.info.key),t(o,R.browser.mac?a.info.macKey:a.info.pcKey)}for(var r in n)n[r]=n[r].map(function(e){return e.command});return new j.Keymap(n)}function p(e,t){var n=e.selection;return n.empty?P.containsStyle(e.activeStyles(),t):P.rangeHasStyle(e.doc,n.from,n.to,t)}function d(e,t){var n=e.selection,o=n.from,a=n.to,r=n.empty;if(r)return!P.containsStyle(e.activeStyles(),t)&&e.doc.path(o.path).type.canContainStyle(t);var s=!1;return e.doc.nodesBetween(o,a,function(e){return s||e.isTextblock&&!e.type.canContainStyle(t)?!1:void(e.isInline&&!P.containsStyle(e.styles,t)&&(s=!0))}),s}function m(e,t){var n=e.selection,o=n.from,a=n.to,r=!1;return e.doc.nodesBetween(o,a,function(e){return e.isTextblock?(e.type.canContainStyle(t)&&(r=!0),!1):void 0}),r}function f(e,t,n,o){n||(n=t);var a=t.charAt(0).toUpperCase()+t.slice(1);e.attachCommand("set"+a,function(e){return{label:"Set "+n,run:function(t){t.setStyle(e,!0)},select:function(t){return d(t,e)},icon:{from:t}}}),e.attachCommand("unset"+a,function(e){return{label:"Remove "+n,run:function(t){t.setStyle(e,!1)},select:function(t){return p(t,e)},icon:{from:t}}}),e.attachCommand(t,function(e){var t={label:"Toggle "+n,run:function(t){t.setStyle(e,null)},active:function(t){return p(t,e)},select:function(t){return m(t,e)}};for(var a in o)t[a]=o[a];return t})}function h(e,t,n){if("char"!=n&&"word"!=n)throw new Error("Unknown motion unit: "+n);for(var o=e.childBefore(t),a=o.index,r=o.innerOffset,s=null,i=0;a>=0;a--,r=null){var c=e.child(a),l=c.offset;if(!c.isText)return s?t:t-1;if("char"==n)for(var u=null==r?l:r;u>0;u--){if(!L.isExtendingChar(c.text.charAt(u-1)))return t-1;t--}else if("word"==n)for(var u=null==r?l:r;u>0;u--){var p=L.charCategory(c.text.charAt(u-1));if(null==s||1==i&&"space"==s)s=p;else if(s!=p)return t;t--,i++}}return t}function g(e,t){var n=e.doc.path(t.path),o=n.child(t.offset-1),r=n.child(t.offset);if(!o.type.canContainChildren(r)||e.tr.join(t).apply(B)===!1){var s=void 0;if(r.isTextblock&&(s=o.type.findConnection(r.type))){var i=e.tr,c=t.move(1);if(i.step("ancestor",t,c,null,{types:[o.type].concat(a(s)),attrs:[o.attrs].concat(a(s.map(function(){return null})))}),i.join(c),i.join(t),i.apply(B)!==!1)return}var l=F.findSelectionFrom(e.doc,t,1);return e.tr.lift(l.from,l.to).apply(B)}}function v(e,t,n){if("char"!=n&&"word"!=n)throw new Error("Unknown motion unit: "+n);for(var o=e.childAfter(t),a=o.index,r=o.innerOffset,s=null,i=0;a<e.length;a++,r=0){var c=e.child(a),l=c.offset;if(!c.isText)return s?t:t+1;if("char"==n)for(var u=r;l>u;u++){if(!L.isExtendingChar(c.text.charAt(u+1)))return t+1;t++}else if("word"==n)for(var u=r;l>u;u++){var p=L.charCategory(c.text.charAt(u));if(null==s||1==i&&"space"==s)s=p;else if(s!=p)return t;t++,i++}}return t}function y(e){var t=e.selection,n=t.node,o=t.from;return n?N.joinableBlocks(e.doc,o)?o:null:N.joinPoint(e.doc,o,-1)}function b(e){var t=e.selection,n=t.node,o=t.to;return n?N.joinableBlocks(e.doc,o)?o:null:N.joinPoint(e.doc,o,1)}function k(e,t,n,o){return P.Pos.samePath(t.path,n.path)&&t.path.length>=2&&0==t.path[t.path.length-1]&&o.canContain(e.path(t.path.slice(0,t.path.length-1)))}function S(e,t,n,o,a){e.attachCommand("wrap"+t,function(e){var t={label:"Wrap in "+n,run:function(t){var n=t.selection,a=n.from,r=n.to,s=n.head,i=!1;if(o&&s&&k(t.doc,a,r,e)){if(0==a.path[a.path.length-2])return!1;i=!0}var c=t.tr.wrap(a,r,e);return i&&c.join(a.shorten(a.depth-2)),c.apply(B)},select:function(t){var n=t.selection,a=n.from,r=n.to,s=n.head;return o&&s&&k(t.doc,a,r,e)&&0==a.path[a.path.length-2]?!1:N.canWrap(t.doc,a,r,e)}};for(var r in a)t[r]=a[r];return t})}function w(e,t,n,o,a){o||(o={}),e.attachCommand(t,function(e){return{label:"Change to "+n,run:function(t){var n=t.selection,a=n.from,r=n.to;return t.tr.setBlockType(a,r,e,o).apply(B)},select:function(t){var n=t.selection,a=n.from,r=n.to,s=n.node;return s?s.isTextblock&&!P.compareMarkup(e,s.type,o,s.attrs):!N.alreadyHasBlockType(t.doc,a,r,e,o)},key:a}})}function x(e){var t=e.schema.cached.textblockTypes;if(t)return t;var n=[];for(var o in e.schema.nodes){var a=e.schema.nodes[o];if(a.textblockTypes)for(var r=0;r<a.textblockTypes.length;r++){var s=a.textblockTypes[r];O["default"](n,{label:s.label,value:{type:a,attrs:s.attrs},rank:s.rank},function(e,t){return e.rank-t.rank})}}return e.schema.cached.textblockTypes=n}function E(e){var t=e.selection,n=t.from,o=t.to,a=t.node;if(!a||a.isInline){if(!P.Pos.samePath(n.path,o.path))return null;a=e.doc.path(n.path)}else if(!a.isTextblock)return null;for(var r=x(e),s=0;s<r.length;s++){var i=r[s],c=i.value;if(P.compareMarkup(c.type,a.type,c.attrs,a.attrs))return i}}function _(e){var t=e.selection,n=0;if(t.node)return!!t.from.depth&&t.from.shorten();for(;n<t.head.depth&&n<t.anchor.depth&&t.head.path[n]==t.anchor.path[n];n++);return 0==n?!1:t.head.shorten(n-1)}function M(e,t){var n=e.selection,o=n.from,a=n.to,r=n.node,s=t>0?a:o;return F.findSelectionFrom(e.doc,r&&r.isBlock?s:s.shorten(null,t>0?1:0),t)}function C(e,t){var n=e.selection,o=n.empty,a=n.node,r=n.from,s=n.to;if(!o&&!a)return!1;if(a&&a.isInline)return e.setSelection(t>0?s:r),!0;var i=void 0;if(!a&&(i=e.doc.path(r.path))&&(t>0?r.offset<i.maxOffset:r.offset)){var c=t>0?i.childAfter(r.offset):i.childBefore(r.offset),l=c.node,u=c.innerOffset;return l&&l.type.selectable&&(t>0?!u:u==l.offset)?(e.setNodeSelection(0>t?r.move(-1):r),!0):!1}var p=M(e,t);return p&&(p instanceof F.NodeSelection||a)?(e.setSelection(p),!0):!1}function T(e,t){var n=e.selection,o=n.empty,a=n.node,r=n.from,s=n.to;if(!o&&!a)return!1;var i=!0;if((!a||a.isInline)&&(i=F.verticalMotionLeavesTextblock(e,t>0?s:r,t)),i){var c=M(e,t);if(c&&c instanceof F.NodeSelection)return e.setSelection(c),a||(e.sel.lastNonNodePos=r),!0}if(!a)return!1;if(a.isInline)return F.setDOMSelectionToPos(e,r),!1;var l=e.sel.lastNonNodePos,u=F.findSelectionFrom(e.doc,0>t?r:s,t);return l&&u&&P.Pos.samePath(l.path,u.from.path)?(F.setDOMSelectionToPos(e,l),!1):(e.setSelection(u),!0)}Object.defineProperty(e,"__esModule",{value:!0});var A=function(){function e(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(c){a=!0,r=c}finally{try{!o&&i["return"]&&i["return"]()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.defineCommand=s,e.defineParamHandler=i,e.initCommands=l,e.defaultKeymap=u;var P=t("../model"),N=t("../transform"),R=t("../dom"),I=t("../util/sortedinsert"),O=o(I),L=t("./char"),j=t("./keys"),F=t("./selection"),U=Object.create(null),q=Object.create(null);P.NodeType.attachCommand=P.StyleType.attachCommand=function(e,t){this.register("commands",{name:e,create:t})};var H=function(){function e(t,n){r(this,e),this.name=t,this.label=n.label||t,this.run=n.run,this.params=n.params||[],this.select=n.select||function(){return!0},this.active=n.active||function(){return!1},this.info=n,this.display=n.display||"icon"}return D(e,[{key:"exec",value:function(e,t){var n=this;if(!this.params.length)return this.run(e);if(t)return this.run.apply(this,[e].concat(a(t)));var o=c(e);return o?void o(e,this,function(t){t&&n.run.apply(n,[e].concat(a(t)))}):!1}}]),e}();e.Command=H;var B={scrollIntoView:!0};P.HardBreak.attachCommand("insertHardBreak",function(e){return{label:"Insert hard break",run:function(t){var n=t.selection,o=n.node,a=n.from;return o&&o.isBlock?!1:t.doc.path(a.path).type.isCode?t.tr.typeText("\n").apply(B):t.tr.replaceSelection(e.create()).apply(B)},key:["Mod-Enter","Shift-Enter"]}}),f(P.StrongStyle,"strong",null,{menuGroup:"inline",menuRank:20,icon:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},key:"Mod-B"}),f(P.EmStyle,"em","emphasis",{menuGroup:"inline",menuRank:21,icon:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},key:"Mod-I"}),f(P.CodeStyle,"code",null,{menuGroup:"inline",menuRank:22,icon:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},key:"Mod-`"}),P.LinkStyle.attachCommand("unlink",function(e){return{label:"Unlink",run:function(t){t.setStyle(e,!1)},select:function(t){return p(t,e)},active:function(){return!0},menuGroup:"inline",menuRank:30,icon:{from:"link"}}}),P.LinkStyle.attachCommand("link",function(e){return{label:"Add link",run:function(t,n,o){t.setStyle(e,!0,{href:n,title:o})},params:[{name:"Target",type:"text"},{name:"Title",type:"text","default":""}],select:function(t){return m(t,e)&&!p(t,e)},menuGroup:"inline",menuRank:30,icon:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"}}}),P.Image.attachCommand("insertImage",function(e){return{label:"Insert image",run:function(t,n,o,a){return t.tr.replaceSelection(e.create({src:n,title:a,alt:o})).apply(B)},params:[{name:"Image URL",type:"text"},{name:"Description / alternative text",type:"text","default":""},{name:"Title",type:"text","default":""}],select:function(t){return t.doc.path(t.selection.from.path).type.canContainType(e)},menuGroup:"inline",menuRank:40,icon:{width:1097,height:1024,path:"M365 329q0 45-32 77t-77 32-77-32-32-77 32-77 77-32 77 32 32 77zM950 548v256h-804v-109l182-182 91 91 292-292zM1005 146h-914q-7 0-12 5t-5 12v694q0 7 5 12t12 5h914q7 0 12-5t5-12v-694q0-7-5-12t-12-5zM1097 164v694q0 37-26 64t-64 26h-914q-37 0-64-26t-26-64v-694q0-37 26-64t64-26h914q37 0 64 26t26 64z"},prefillParams:function(t){var n=t.selection.node;return n&&n.type==e?[n.attrs.src,n.attrs.alt,n.attrs.title]:void 0}}}),s("deleteSelection",{label:"Delete the selection",run:function(e){return e.tr.replaceSelection().apply(B)},key:["Backspace(10)","Delete(10)","Mod-Backspace(10)","Mod-Delete(10)"],macKey:["Ctrl-H(10)","Alt-Backspace(10)","Ctrl-D(10)","Ctrl-Alt-Backspace(10)","Alt-Delete(10)","Alt-D(10)"]}),s("joinBackward",{label:"Join with the block above",run:function(e){var t=e.selection,n=t.head,o=t.empty;if(!o||n.offset>0)return!1;for(var a=void 0,r=void 0,s=n.path.length-1;!a&&s>=0;s--)n.path[s]>0&&(r=n.shorten(s),a=e.doc.path(r.path).child(r.offset-1));return a?null==a.type.contains?e.tr["delete"](r.move(-1),r).apply(B):g(e,r):e.tr.lift(n).apply(B)},key:["Backspace(30)","Mod-Backspace(30)"]}),s("deleteCharBefore",{label:"Delete a character before the cursor",run:function(e){var t=e.selection,n=t.head,o=t.empty;if(!o||0==n.offset)return!1;var a=h(e.doc.path(n.path),n.offset,"char");return e.tr["delete"](new P.Pos(n.path,a),n).apply(B)},key:"Backspace(60)",macKey:"Ctrl-H(40)"}),s("deleteWordBefore",{label:"Delete the word before the cursor",run:function(e){var t=e.selection,n=t.head,o=t.empty;if(!o||0==n.offset)return!1;var a=h(e.doc.path(n.path),n.offset,"word");return e.tr["delete"](new P.Pos(n.path,a),n).apply(B)},key:"Mod-Backspace(40)",macKey:"Alt-Backspace(40)"}),s("joinForward",{label:"Join with the block below",run:function(e){var t=e.selection,n=t.head,o=t.empty;if(!o||n.offset<e.doc.path(n.path).maxOffset)return!1;for(var a=void 0,r=void 0,s=n.path.length-1;!a&&s>=0;s--){r=n.shorten(s,1);var i=e.doc.path(r.path);r.offset<i.length&&(a=i.child(r.offset))}return a?null==a.type.contains?e.tr["delete"](r,r.move(1)).apply(B):g(e,r):!1},key:["Delete(30)","Mod-Delete(30)"]}),s("deleteCharAfter",{label:"Delete a character after the cursor",run:function(e){var t=e.selection,n=t.head,o=t.empty;if(!o||n.offset==e.doc.path(n.path).maxOffset)return!1;var a=v(e.doc.path(n.path),n.offset,"char");return e.tr["delete"](n,new P.Pos(n.path,a)).apply(B)},key:"Delete(60)",macKey:"Ctrl-D(60)"}),s("deleteWordAfter",{label:"Delete a character after the cursor",run:function(e){var t=e.selection,n=t.head,o=t.empty;if(!o||n.offset==e.doc.path(n.path).maxOffset)return!1;var a=v(e.doc.path(n.path),n.offset,"word");return e.tr["delete"](n,new P.Pos(n.path,a)).apply(B)},key:"Mod-Delete(40)",macKey:["Ctrl-Alt-Backspace(40)","Alt-Delete(40)","Alt-D(40)"]}),s("joinUp",{label:"Join with above block",run:function(e){var t=e.selection.node,n=y(e);return n?(e.tr.join(n).apply(),void(t&&e.setNodeSelection(n.move(-1)))):!1},select:function(e){return y(e)},menuGroup:"block",menuRank:80,icon:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},key:"Alt-Up"}),s("joinDown",{label:"Join with below block",run:function(e){var t=e.selection.node,n=b(e);return n?(e.tr.join(n).apply(),void(t&&e.setNodeSelection(n.move(-1)))):!1},select:function(e){return b(e)},key:"Alt-Down"}),s("lift",{label:"Lift out of enclosing block",run:function(e){var t=e.selection,n=t.from,o=t.to;return e.tr.lift(n,o).apply(B)},select:function(e){var t=e.selection,n=t.from,o=t.to;return N.canLift(e.doc,n,o)},menuGroup:"block",menuRank:75,icon:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},key:"Alt-Left"}),S(P.BulletList,"BulletList","bullet list",!0,{menuGroup:"block",menuRank:40,icon:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},key:["Alt-Right '*'","Alt-Right '-'"]}),S(P.OrderedList,"OrderedList","ordered list",!0,{menuGroup:"block",menuRank:41,icon:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},key:"Alt-Right '1'"}),S(P.BlockQuote,"BlockQuote","block quote",!1,{menuGroup:"block",menuRank:45,icon:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"},key:["Alt-Right '>'","Alt-Right '\"'"]}),s("newlineInCode",{label:"Insert newline",run:function(e){var t=e.selection,n=t.from,o=t.to,a=t.node,r=void 0;return!a&&P.Pos.samePath(n.path,o.path)&&(r=e.doc.path(n.path)).type.isCode&&o.offset<r.maxOffset?e.tr.typeText("\n").apply(B):!1},key:"Enter(10)"}),s("createParagraphNear",{label:"Create a paragraph near the selected leaf block",run:function(e){var t=e.selection,n=t.from,o=t.to,a=t.node;if(!a||!a.isBlock||a.type.contains)return!1;var r=n.offset?o:n;e.tr.insert(r,e.schema.defaultTextblockType().create()).apply(B),e.setSelection(new P.Pos(r.toPath(),0))},key:"Enter(20)"}),s("liftEmptyBlock",{label:"Move current block up",run:function(e){var t=e.selection,n=t.head,o=t.empty;return!o||n.offset>0?!1:n.path[n.path.length-1]>0&&e.tr.split(n.shorten()).apply()!==!1?void 0:e.tr.lift(n).apply(B)},key:"Enter(30)"}),s("splitBlock",{label:"Split the current block",run:function(e){var t=e.selection,n=t.from,o=t.to,a=t.node,r=e.doc.path(o.path);if(a&&a.isBlock)return n.offset?e.tr.split(n).apply(B):!1;var s=o.offset==r.maxOffset?e.schema.defaultTextblockType():null;return e.tr["delete"](n,o).split(n,1,s).apply(B)},key:"Enter(60)"}),P.ListItem.attachCommand("splitListItem",function(e){return{label:"Split the current list item",run:function(t){var n=t.selection,o=n.from,a=n.to,r=n.node,s=n.empty;if(r&&r.isBlock||o.path.length<2||!P.Pos.samePath(o.path,a.path)||s&&0==o.offset)return!1;var i=o.shorten(),c=t.doc.path(i.path);if(c.type!=e)return!1;var l=a.offset==c.child(i.offset).maxOffset?t.schema.defaultTextblockType():null;return t.tr["delete"](o,a).split(o,2,l).apply(B)},key:"Enter(50)"}}),w(P.Heading,"makeH1","heading 1",{level:1},"Mod-H '1'"),w(P.Heading,"makeH2","heading 2",{level:2},"Mod-H '2'"),w(P.Heading,"makeH3","heading 3",{level:3},"Mod-H '3'"),w(P.Heading,"makeH4","heading 4",{level:4},"Mod-H '4'"),w(P.Heading,"makeH5","heading 5",{level:5},"Mod-H '5'"),w(P.Heading,"makeH6","heading 6",{level:6},"Mod-H '6'"),w(P.Paragraph,"makeParagraph","paragraph",null,"Mod-P"),w(P.CodeBlock,"makeCodeBlock","code block",null,"Mod-\\"),P.HorizontalRule.attachCommand("insertHorizontalRule",function(e){return{label:"Insert horizontal rule",run:function(t){return t.tr.replaceSelection(e.create()).apply(B)},key:"Mod-Space"}}),s("undo",{label:"Undo last change",run:function(e){return e.scrollIntoView(),e.history.undo()},select:function(e){return e.history.canUndo()},menuGroup:"history",menuRank:10,icon:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},key:"Mod-Z"}),s("redo",{label:"Redo last undone change",run:function(e){return e.scrollIntoView(),e.history.redo()},select:function(e){return e.history.canRedo()},menuGroup:"history",menuRank:20,icon:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},key:["Mod-Y","Shift-Mod-Z"]}),s("textblockType",{label:"Change block type",run:function(e,t){var n=e.selection,o=n.from,a=n.to;return e.tr.setBlockType(o,a,t.type,t.attrs).apply()},select:function(e){var t=e.selection.node;return!t||t.isTextblock},params:[{name:"Type",type:"select",options:x,"default":E,defaultLabel:"Type..."}],display:"select",menuGroup:"block",menuRank:10}),P.Paragraph.prototype.textblockTypes=[{label:"Normal",rank:10}],P.CodeBlock.prototype.textblockTypes=[{label:"Code",rank:20}],P.Heading.prototype.textblockTypes=[1,2,3,4,5,6].map(function(e){return{label:"Head "+e,attrs:{level:e},rank:30+e}}),s("selectParentBlock",{label:"Select parent node",run:function(e){var t=_(e);return t?void e.setNodeSelection(t):!1},select:function(e){return _(e)},menuGroup:"block",menuRank:90,icon:{text:"⬚",style:"font-weight: bold; vertical-align: 20%"},key:"Esc"}),s("selectBlockLeft",{label:"Move the selection onto or out of the block to the left",run:function(e){var t=C(e,-1);return t&&e.scrollIntoView(),t},key:["Left","Mod-Left"]}),s("selectBlockRight",{label:"Move the selection onto or out of the block to the right",run:function(e){var t=C(e,1);return t&&e.scrollIntoView(),t},key:["Right","Mod-Right"]}),s("selectBlockUp",{label:"Move the selection onto or out of the block above",run:function(e){var t=T(e,-1);return t!==!1&&e.scrollIntoView(),t},key:"Up"}),s("selectBlockDown",{label:"Move the selection onto or out of the block below",run:function(e){var t=T(e,1);return t!==!1&&e.scrollIntoView(),t},key:"Down"})}),require.register("prosemirror/edit/css",function(e,t,n){"use strict";var o=t("../dom");o.insertCSS('\n\n.ProseMirror {\n  border: 1px solid silver;\n  position: relative;\n}\n\n.ProseMirror-content {\n  padding: 4px 8px 4px 14px;\n  white-space: pre-wrap;\n  line-height: 1.2;\n}\n\n.ProseMirror-drop-target {\n  position: absolute;\n  width: 1px;\n  background: #666;\n  display: none;\n}\n\n.ProseMirror-content ul.tight p, .ProseMirror-content ol.tight p {\n  margin: 0;\n}\n\n.ProseMirror-content ul, .ProseMirror-content ol {\n  padding-left: 30px;\n  cursor: default;\n}\n\n.ProseMirror-content blockquote {\n  padding-left: 1em;\n  border-left: 3px solid #eee;\n  margin-left: 0; margin-right: 0;\n}\n\n.ProseMirror-content pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n.ProseMirror-content p:first-child,\n.ProseMirror-content h1:first-child,\n.ProseMirror-content h2:first-child,\n.ProseMirror-content h3:first-child,\n.ProseMirror-content h4:first-child,\n.ProseMirror-content h5:first-child,\n.ProseMirror-content h6:first-child {\n  margin-top: .3em;\n}\n\n/* Add space around the hr to make clicking it easier */\n\n.ProseMirror-content hr {\n  position: relative;\n  height: 6px;\n  border: none;\n}\n\n.ProseMirror-content hr:after {\n  content: "";\n  position: absolute;\n  left: 10px;\n  right: 10px;\n  top: 2px;\n  border-top: 2px solid silver;\n}\n\n.ProseMirror-content img {\n  cursor: default;\n}\n\n/* Make sure li selections wrap around markers */\n\n.ProseMirror-content li {\n  position: relative;\n  pointer-events: none; /* Don\'t do weird stuff with marker clicks */\n}\n.ProseMirror-content li > * {\n  pointer-events: auto;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px; top: -2px; bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n')}),require.register("prosemirror/edit/domchange",function(e,t,n){"use strict";function o(e,t,n){for(var o=n||0;o<t.path.length;o++){var a=t.path[n];if(a<e.length-1)return!1;e=e.child(a)}return t.offset==e.maxOffset}function a(e,t){if(e.offset>0)return!1;for(var n=t||0;n<e.path.length;n++)if(e.path[t]>0)return!1;return!0}function r(e){for(var t=e.content,n=e.doc,r=e.selection,s=r.from,i=r.to,c=0;;c++){var l=n.child(i.path[c]),u=a(s,c+1),p=o(l,i,c+1);if(u||p||s.path[c]!=i.path[c]||l.isTextblock){var d=c==s.depth?s.offset:s.path[c];u&&d>0&&d--;var m=c==i.depth?i.offset:i.path[c]+1;p&&m<n.length-1&&m++;var f=h.fromDOM(e.schema,t,{topNode:n.copy(),from:d,to:t.childNodes.length-(n.length-m)});f=f.copy(n.slice(0,d).concat(f.children).concat(n.slice(m)));for(var g=c-1;g>=0;g--){var y=e.doc.path(s.path.slice(0,g));f=y.splice(s.path[g],s.path[g]+1,[f])}return f}n=l,t=v.findByPath(t,s.path[c],!1)}}function s(e){var t=r(e),n=f.findDiffStart(e.doc,t);if(n){var o=c(e.doc,t,n);return e.markRangeDirty(f.siblingRange(e.doc,n.a,o.a)),e.tr.replace(n.a,o.a,t,n.b,o.b).apply(),!0}return!1}function i(e,t,n){var o=g.samePathDepth(e,t),a=o==e.depth,r=o==t.depth,s=(r?t.offset:t.path[o])-(a?e.offset:e.path[o]),i=a?n.move(s):n.shorten(o,s);return r?i:i.extend(new f.Pos(t.path.slice(o),t.offset))}function c(e,t,n){var o=f.findDiffEnd(e,t);return o?o.a.cmp(n.a)<0?{a:n.a,b:i(o.a,n.a,o.b)}:o.b.cmp(n.b)<0?{a:i(o.b,n.b,o.a),b:n.b}:o:o}function l(e){var t=getSelection().getRangeAt(0),n=t.startContainer,o=t.endContainer;
if(n==o&&3==n.nodeType){var a=n.nodeValue,r=t.startOffset,s=t.endOffset;return e&&s>=e.length&&a.slice(s-e.length,s)==e&&(r=s-e.length),{inside:n,lead:r,trail:a.length-s}}for(var i=null,c=null,l=n.childNodes[t.startOffset-1]||d(n);l.lastChild;)l=l.lastChild;if(l&&3==l.nodeType){var a=l.nodeValue;i=a.length,e&&a.slice(a.length-e.length)==e&&(i-=e.length)}for(var u=o.childNodes[t.endOffset]||p(o);u.firstChild;)u=u.firstChild;return u&&3==u.nodeType&&(c=u.nodeValue.length),{before:l,sizeBefore:i,after:u,sizeAfter:c}}function u(e,t){if(e.inside){var n=e.inside.nodeValue;return n.slice(e.lead,n.length-e.trail)}var o=e.before,a=e.after,r="";if(!o)return t;3==o.nodeType&&(r=o.nodeValue.slice(e.sizeBefore));var s=m(o,a);if(null==s)return t;if(r+=s,a&&3==a.nodeType){var i=a.nodeValue;r+=i.slice(0,i.length-e.sizeAfter)}return r}function p(e){for(;;){var t=e.nextSibling;if(t){for(;t.firstChild;)t=t.firstChild;return t}if(!(e=e.parentElement))return null}}function d(e){for(;;){var t=e.previousSibling;if(t){for(;t.lastChild;)t=t.lastChild;return t}if(!(e=e.parentElement))return null}}function m(e,t){for(var n="",o=p(e);;){if(o==t)return n;if(!o)return null;3==o.nodeType&&(n+=o.nodeValue),o=o.firstChild||p(o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.applyDOMChange=s,e.textContext=l,e.textInContext=u;var f=t("../model"),h=t("../parse/dom"),g=t("../transform/tree"),v=t("./selection")}),require.register("prosemirror/edit/draw",function(e,t,n){"use strict";function o(e,t){return{onRender:function(e,t,n){return e.isInline||null==n||t.setAttribute("pm-path",n),p.hasOwnProperty(e.type.name)&&(t.contentEditable=!1),t},renderInlineFlat:function(n,o,r){t.advanceTo(new c.Pos(e,r));for(var s=new c.Pos(e,r+n.offset),i=t.nextChangeBefore(s),l=o,p=void 0,d=0;d<n.styles.length;d++)l=l.firstChild;1!=o.nodeType&&(o=u.elt("span",null,o),i||(p=o)),p||!i&&!t.current.length||(p=l==o?o=u.elt("span",null,l):l.parentNode.appendChild(u.elt("span",null,l))),o.setAttribute("pm-span",r+"-"+s.offset),n.isText||o.setAttribute("pm-span-atom","true");for(var m=0;i;){var f=i-r,h=a(p,f);t.current.length&&(h.className=t.current.join(" ")),h.setAttribute("pm-span-offset",m),m+=f,r+=f,t.advanceTo(new c.Pos(e,r)),(i=t.nextChangeBefore(s))||p.setAttribute("pm-span-offset",m)}return t.current.length&&(p.className=t.current.join(" ")),o},document:document,path:e}}function a(e,t){var n=e.firstChild,o=n.nodeValue,a=e.parentNode.insertBefore(u.elt("span",null,o.slice(0,t)),e);return n.nodeValue=o.slice(t),a}function r(e,t){e.content.textContent="",e.content.appendChild(l.toDOM(t,o([],e.ranges.activeRangeTracker())))}function s(e,t,n){for(var o=0;n>o;o++){var a=t;t=t.nextSibling,e.removeChild(a)}return t}function i(e,t,n,a){function r(e,n,a){for(var p=[],d=[],m=[],f=0,h=0;f<a.length&&h<n.width;f++){var g=a.child(f),v=t.get(g);p.push(v);var y=v?-1:n.children.indexOf(g,h);y>-1&&(m[f]=y,d[y]=f,h=y+1)}if(n.isTextblock){var b=0==n.length||n.lastChild.type==n.type.schema.nodes.hard_break,k=e.lastChild,S=k&&1==k.nodeType&&k.hasAttribute("pm-force-br");b&&!S?e.appendChild(u.elt("br",{"pm-force-br":"true"})):!b&&S&&e.removeChild(k)}for(var w=e.firstChild,x=0,E=n.isTextblock,f=0,_=0;f<n.length;f++){var M=n.child(f);E||c.push(f);var C=d[f],T=!0;null!=C?(w=s(e,w,C-x),x=C):!E&&x<a.length&&null==m[x]&&2!=p[x]&&M.sameMarkup(a.child(x))?r(w,M,a.child(x)):(e.insertBefore(l.renderNodeToDOM(M,o(c,i),E?_:f),w),T=!1),T&&(E?w.setAttribute("pm-span",_+"-"+(_+M.offset)):w.setAttribute("pm-path",f),w=w.nextSibling,x++),E?_+=M.offset:c.pop()}s(e,w,a.length-x)}var i=e.ranges.activeRangeTracker(),c=[];r(e.content,n,a)}Object.defineProperty(e,"__esModule",{value:!0}),e.draw=r,e.redraw=i;var c=t("../model"),l=t("../serialize/dom"),u=t("../dom"),p={html_block:!0,html_tag:!0,horizontal_rule:!0}}),require.register("prosemirror/edit/event",function(e,t,n){"use strict";function o(e){var t=e.prototype;for(var n in a)a.hasOwnProperty(n)&&(t[n]=a[n])}Object.defineProperty(e,"__esModule",{value:!0}),e.eventMixin=o;var a={on:function(e,t){var n=this._handlers||(this._handlers={}),o=n[e]||(n[e]=[]);o.push(t)},off:function(e,t){var n=this._handlers&&this._handlers[e];if(n)for(var o=0;o<n.length;++o)if(n[o]==t){n.splice(o,1);break}},signal:function(e){for(var t=this._handlers&&this._handlers[e],n=arguments.length,o=Array(n>1?n-1:0),a=1;n>a;a++)o[a-1]=arguments[a];if(t)for(var r=0;r<t.length;++r)t[r].apply(t,o)},signalHandleable:function(e){var t=this._handlers&&this._handlers[e];if(t){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;n>a;a++)o[a-1]=arguments[a];for(var r=0;r<t.length;++r){var s=t[r].apply(t,o);if(s!==!1)return s}}return!1},hasHandler:function(e){var t=this._handlers&&this._handlers[e];return t&&t.length>0}}}),require.register("prosemirror/edit/history",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return"replace"==e.name&&e.from.offset<e.to.offset&&s.Pos.samePath(e.from.path,e.to.path)&&0==e.param.nodes.length}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=t("../model"),i=t("../transform"),c=function v(e,t,n){o(this,v),this.step=e,this.version=t,this.id=n},l=function(){function e(t){o(this,e),this.branch=t,this.remap=new i.Remapping,this.version=t.version,this.mirrorBuffer=Object.create(null)}return r(e,[{key:"moveToVersion",value:function(e){for(;this.version>e;)this.addNextMap()}},{key:"addNextMap",value:function(){var e=this.branch.mirror[this.version],t=this.branch.maps.length-(this.branch.version-this.version)-1,n=this.remap.addToFront(this.branch.maps[t],this.mirrorBuffer[this.version]);return--this.version,null!=e&&(this.mirrorBuffer[e]=n),n}},{key:"movePastStep",value:function(e){var t=this.addNextMap();e&&this.remap.addToBack(e.map,t)}}]),e}(),u=100,p=150,d=function(){function e(t,n,a){o(this,e),this.branch=n,this.callback=a,this.remap=new l(n),this.doc=t,this.events=[],this.maps=[],this.version=this.startVersion=n.version,this.i=n.events.length,this.timeout=null,this.aborted=!1}return r(e,[{key:"work",value:function(){var e=this;if(!this.aborted)for(var t=Date.now()+u;;){if(0==this.i)return this.finish();for(var n=this.branch.events[--this.i],o=[],r=n.length-1;r>=0;r--){var s=n[r],l=s.step,d=s.version,m=s.id;this.remap.moveToVersion(d);var f=i.mapStep(l,this.remap.remap);if(f&&a(l)){for(var h=0,g=l.from;r>0;){var v=n[r-1];if(v.version!=d-1||!a(v.step)||g.cmp(v.step.to))break;h+=v.step.to.offset-v.step.from.offset,g=v.step.from,d--,r--,this.remap.addNextMap()}if(h>0){var y=f.from.move(-h);f=new i.Step("replace",y,f.to,y,{nodes:[],openLeft:0,openRight:0})}}var b=f&&f.apply(this.doc);b&&(this.doc=b.doc,this.maps.push(b.map.invert()),o.push(new c(f,this.version,m)),this.version--),this.remap.movePastStep(b)}if(o.length&&(o.reverse(),this.events.push(o)),Date.now()>t)return void(this.timeout=window.setTimeout(function(){return e.work()},p))}}},{key:"finish",value:function(){this.aborted||(this.events.reverse(),this.maps.reverse(),this.callback(this.maps.concat(this.branch.maps.slice(this.branch.maps.length-(this.branch.version-this.startVersion))),this.events))}},{key:"abort",value:function(){this.aborted=!0,window.clearTimeout(this.timeout)}}]),e}(),m=150,f=function(){function e(t){o(this,e),this.maxDepth=t,this.version=0,this.nextStepID=1,this.maps=[],this.mirror=Object.create(null),this.events=[],this.stepsSinceCompress=0,this.compressing=null,this.compressTimeout=null}return r(e,[{key:"clear",value:function(e){(e||!this.empty())&&(this.maps.length=this.events.length=this.stepsSinceCompress=0,this.mirror=Object.create(null),this.abortCompression())}},{key:"newEvent",value:function(){for(this.abortCompression(),this.events.push([]);this.events.length>this.maxDepth;)this.events.shift()}},{key:"addMap",value:function(e){return this.empty()?void 0:(this.maps.push(e),this.version++,this.stepsSinceCompress++,!0)}},{key:"empty",value:function(){return 0==this.events.length}},{key:"addStep",value:function(e,t,n){this.addMap(t),null==n&&(n=this.nextStepID++),this.events[this.events.length-1].push(new c(e,this.version,n))}},{key:"addTransform",value:function(e,t){this.abortCompression();for(var n=0;n<e.steps.length;n++){var o=e.steps[n].invert(e.docs[n],e.maps[n]);this.addStep(o,e.maps[n],t&&t[n])}}},{key:"popEvent",value:function(e,t){this.abortCompression();var n=this.events.pop();if(!n)return null;for(var o=new l(this),a=t,r=new i.Transform(e),s=[],c=n.length-1;c>=0;c--){var u=n[c],p=u.step;if(a&&u.version==o.version)this.version--,delete this.mirror[this.version],this.maps.pop(),r.step(p),s.push(u.id),--o.version;else{a=!1,o.moveToVersion(u.version),p=i.mapStep(p,o.remap);var d=p&&r.step(p);d&&(s.push(u.id),this.addMap(d.map)&&(this.mirror[this.version]=u.version)),c>0&&o.movePastStep(d)}}return this.empty()&&this.clear(!0),{transform:r,ids:s}}},{key:"getVersion",value:function(){return{id:this.nextStepID,version:this.version}}},{key:"findVersion",value:function(e){for(var t=this.events.length-1;t>=0;t--)for(var n=this.events[t],o=n.length-1;o>=0;o--){var a=n[o];if(a.id==e.id)return{event:t,step:o};if(a.id<e.id)return{event:t,step:o+1}}}},{key:"rebased",value:function(e,t,n){if(!this.empty()){this.abortCompression();var o=this.version-n.length;e:for(var a=this.events.length-1;a>=0;a--)for(var r=this.events[a],s=r.length-1;s>=0;s--){var i=r[s];if(i.version<=o)break e;var l=n[i.version-o-1];if(-1==l)r.splice(s--,1);else{var u=t.steps[l].invert(t.docs[l],t.maps[l]);r[s]=new c(u,o+e.length+l+1,i.id)}}this.maps.length>n.length?this.maps=this.maps.slice(0,this.maps.length-n.length).concat(e).concat(t.maps):this.maps=t.maps.slice(),this.version=o+e.length+t.maps.length,this.stepsSinceCompress+=e.length+t.steps.length-n.length}}},{key:"abortCompression",value:function(){this.compressing&&(this.compressing.abort(),this.compressing=null)}},{key:"needsCompression",value:function(){return this.stepsSinceCompress>m&&!this.compressing}},{key:"startCompression",value:function(e){var t=this;this.compressing=new d(e,this,function(e,n){t.maps=e,t.events=n,t.mirror=Object.create(null),t.compressing=null,t.stepsSinceCompress=0}),this.compressing.work()}}]),e}(),h=750,g=function(){function e(t){var n=this;o(this,e),this.pm=t,this.done=new f(t.options.historyDepth),this.undone=new f(t.options.historyDepth),this.lastAddedAt=0,this.ignoreTransform=!1,this.allowCollapsing=!0,t.on("transform",function(e,t){return n.recordTransform(e,t)})}return r(e,[{key:"recordTransform",value:function(e,t){if(!this.ignoreTransform){if(0==t.addToHistory)for(var n=0;n<e.maps.length;n++){var o=e.maps[n];this.done.addMap(o),this.undone.addMap(o)}else{this.undone.clear();var a=Date.now();a>this.lastAddedAt+this.pm.options.historyEventDelay&&this.done.newEvent(),this.done.addTransform(e),this.lastAddedAt=a}this.maybeScheduleCompression()}}},{key:"undo",value:function(){return this.shift(this.done,this.undone)}},{key:"redo",value:function(){return this.shift(this.undone,this.done)}},{key:"canUndo",value:function(){return this.done.events.length>0}},{key:"canRedo",value:function(){return this.undone.events.length>0}},{key:"shift",value:function(e,t){var n=e.popEvent(this.pm.doc,this.allowCollapsing);if(!n)return!1;var o=n.transform,a=n.ids;return this.ignoreTransform=!0,this.pm.apply(o),this.ignoreTransform=!1,o.steps.length?(t&&(t.newEvent(),t.addTransform(o,a)),this.lastAddedAt=0,!0):this.shift(e,t)}},{key:"getVersion",value:function(){return this.done.getVersion()}},{key:"backToVersion",value:function(e){var t=this.done.findVersion(e);if(!t)return!1;var n=this.done.events[t.event],o=this.done.events.slice(t.event+1).reduce(function(e,t){return e.concat(t)},n.slice(t.step));this.done.events.length=t.event+((n.length=t.step)?1:0),this.done.events.push(o),this.shift(this.done)}},{key:"rebased",value:function(e,t,n){this.done.rebased(e,t,n),this.undone.rebased(e,t,n),this.maybeScheduleCompression()}},{key:"maybeScheduleCompression",value:function(){this.maybeScheduleCompressionForBranch(this.done),this.maybeScheduleCompressionForBranch(this.undone)}},{key:"maybeScheduleCompressionForBranch",value:function(e){var t=this;window.clearTimeout(e.compressTimeout),e.needsCompression()&&(e.compressTimeout=window.setTimeout(function(){e.needsCompression()&&e.startCompression(t.pm.doc)},h))}}]),e}();e.History=g}),require.register("prosemirror/edit/index",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("./main");Object.defineProperty(e,"ProseMirror",{enumerable:!0,get:function(){return o.ProseMirror}});var a=t("./options");Object.defineProperty(e,"defineOption",{enumerable:!0,get:function(){return a.defineOption}});var r=t("./selection");Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return r.Range}});var s=t("./event");Object.defineProperty(e,"eventMixin",{enumerable:!0,get:function(){return s.eventMixin}});var i=t("./keys");Object.defineProperty(e,"Keymap",{enumerable:!0,get:function(){return i.Keymap}});var c=t("./range");Object.defineProperty(e,"MarkedRange",{enumerable:!0,get:function(){return c.MarkedRange}});var l=t("./commands");Object.defineProperty(e,"defineCommand",{enumerable:!0,get:function(){return l.defineCommand}}),Object.defineProperty(e,"defineParamHandler",{enumerable:!0,get:function(){return l.defineParamHandler}}),Object.defineProperty(e,"Command",{enumerable:!0,get:function(){return l.Command}})}),require.register("prosemirror/edit/input",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){var o=e.input.keySeq;if(o){if(h.isModifierKey(t))return!0;clearTimeout(b),b=setTimeout(function(){e.input.keySeq==o&&(e.input.keySeq=null)},50),t=o+" "+t}for(var a=function i(t){var n=!1;if(Array.isArray(t))for(var o=0;n===!1&&o<t.length;o++)n=i(t[o]);else n="string"==typeof t?e.execCommand(t):t(e);return n!==!1},r=void 0,s=0;!r&&s<e.input.keymaps.length;s++)r=h.lookupKey(t,e.input.keymaps[s].map,a,e);return r||(r=h.lookupKey(t,e.options.keymap,a,e)||h.lookupKey(t,g.captureKeys,a,e)),"multi"==r&&(e.input.keySeq=t),("handled"==r||"multi"==r)&&n.preventDefault(),o&&!r&&/\'$/.test(t)?(n.preventDefault(),!0):!!r}function r(e,t,n){if(t.empty&&!n)return!1;var o=e.input.storedStyles||l.spanStylesAt(e.doc,t.from),a=e.tr;a.replaceWith(t.from,t.to,e.schema.text(n,o)).apply(),e.scrollIntoView(),e.signal("textInput",n)}function s(e,t){var n=y.selectableNodeAbove(e,t.target,{left:t.clientX,top:t.clientY},!0);if(!n)return e.sel.pollForUpdate();var o=e.selection,a=o.node,r=o.from;if(a&&n.depth>=r.depth&&0==n.shorten(r.depth).cmp(r)){if(0==r.depth)return e.sel.pollForUpdate();n=r.shorten()}e.setNodeSelection(n),e.focus(),t.preventDefault()}function i(e){var t=e.input.composing,n=v.textInContext(t.context,t.endData),o=y.rangeFromDOMLoose(e);e.ensureOperation(),e.input.composing=null,n!=t.data&&r(e,t.range,n),o&&!o.eq(e.sel.range)&&e.setSelection(o)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.dispatchKey=a;var l=t("../model"),u=t("../parse/dom"),p=t("../dom"),d=t("../serialize/dom"),m=t("../serialize/text"),f=t("../parse"),h=t("./keys"),g=t("./capturekeys"),v=t("./domchange"),y=t("./selection"),b=null,k={},S=function(){function e(t){var n=this;o(this,e),this.pm=t,this.keySeq=null,this.composing=null,this.shiftKey=this.updatingComposition=!1,this.skipInput=0,this.draggingFrom=!1,this.keymaps=[],this.storedStyles=null,this.dropTarget=t.wrapper.appendChild(p.elt("div",{"class":"ProseMirror-drop-target"}));var a=function(e){var n=k[e];t.content.addEventListener(e,function(e){return n(t,e)})};for(var r in k)a(r);t.on("selectionChange",function(){return n.storedStyles=null})}return c(e,[{key:"maybeAbortComposition",value:function(){if(this.composing&&!this.updatingComposition){if(this.composing.finished)i(this.pm);else{this.composing=null,this.skipInput++;var e=getSelection();if(e.rangeCount){var t=e.getRangeAt(0);e.removeAllRanges(),e.addRange(t)}}return!0}}}]),e}();e.Input=S,k.keydown=function(e,t){if(16==t.keyCode&&(e.input.shiftKey=!0),!e.input.composing){var n=h.keyName(t);n&&a(e,n,t)||e.sel.pollForUpdate()}},k.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1)},k.keypress=function(e,t){if(!(e.input.composing||!t.charCode||t.ctrlKey&&!t.altKey||p.browser.mac&&t.metaKey)){var n=String.fromCharCode(t.charCode);if(!a(e,"'"+n+"'",t)){var o=e.selection;o.node&&null==o.node.contains&&(e.tr["delete"](o.from,o.to).apply(),o=e.selection),r(e,o,n),t.preventDefault()}}};var w=0;k.mousedown=function(e,t){if(t.ctrlKey)return s(e,t);e.sel.pollForUpdate();var n=Date.now(),o=500>n-w;if(w=n,!e.input.shiftKey&&!o){var a=t.clientX,r=t.clientY,i=function(){removeEventListener("mouseup",c),removeEventListener("mousemove",l)},c=function(){i();var n=y.selectableNodeAbove(e,t.target,{left:t.clientX,top:t.clientY});n&&(e.setNodeSelection(n),e.focus())},l=function(e){(Math.abs(a-e.clientX)>4||Math.abs(r-e.clientY)>4)&&i()};addEventListener("mouseup",c),addEventListener("mousemove",l)}},k.touchdown=function(e){e.sel.pollForUpdate()},k.mousemove=function(e,t){(t.which||t.button)&&e.sel.pollForUpdate()};var x=function _(e,t){o(this,_),this.finished=!1,this.context=v.textContext(t),this.data=t,this.endData=null;var n=e.selection;if(t){var a=n.head.path,r=e.doc.path(a).textContent,s=r.indexOf(t,n.head.offset-t.length);s>-1&&s<=n.head.offset+t.length&&(n=new y.TextSelection(new l.Pos(a,s),new l.Pos(a,s+t.length)))}this.range=n};k.compositionstart=function(e,t){if(!e.input.maybeAbortComposition()){e.flush(),e.input.composing=new x(e,t.data);var n=e.selection.head.shorten();e.markRangeDirty({from:n,to:n.move(1)})}},k.compositionupdate=function(e,t){var n=e.input.composing;n&&n.data!=t.data&&(n.data=t.data,e.input.updatingComposition=!0,r(e,n.range,n.data),e.input.updatingComposition=!1,n.range=new y.TextSelection(n.range.from,n.range.from.move(n.data.length)))},k.compositionend=function(e,t){var n=e.input.composing;n&&(e.input.composing.finished=!0,e.input.composing.endData=t.data,setTimeout(function(){e.input.composing==n&&i(e)},20))},k.input=function(e){return e.input.skipInput?--e.input.skipInput:e.input.composing?void(e.input.composing.finished&&i(e)):(v.applyDOMChange(e),void e.scrollIntoView())};var E=null;k.copy=k.cut=function(e,t){var n=e.selection,o=n.from,a=n.to,r=n.empty;if(!r){var s=e.selectedDoc;E={doc:e.doc,from:o,to:a,html:d.toHTML(s),text:m.toText(s)},t.clipboardData&&(t.preventDefault(),t.clipboardData.clearData(),t.clipboardData.setData("text/html",E.html),t.clipboardData.setData("text/plain",E.text),"cut"!=t.type||r||e.tr["delete"](o,a).apply())}},k.paste=function(e,t){if(t.clipboardData){var n=e.selection,o=t.clipboardData.getData("text/plain"),a=t.clipboardData.getData("text/html");if(a||o){t.preventDefault();var r=void 0,s=void 0,i=void 0;if(e.input.shiftKey&&o)!function(){var t=o.split(/[\r\n]+/),a=l.spanStylesAt(e.doc,n.from);r=e.schema.node("doc",null,t.map(function(t){return e.schema.node("paragraph",null,[e.schema.text(t,a)])}))}();else if(!E||E.html!=a&&E.text!=o)r=a?u.fromHTML(e.schema,a):f.convertFrom(e.schema,o,f.knownSource("markdown")?"markdown":"text");else{var c=E;r=c.doc,s=c.from,i=c.to}e.tr.replace(n.from,n.to,r,s||y.findSelectionAtStart(r).from,i||y.findSelectionAtEnd(r).to).apply(),e.scrollIntoView()}}},k.dragstart=function(e,t){if(t.dataTransfer){var n=e.selectedDoc;t.dataTransfer.setData("text/html",d.toHTML(n)),t.dataTransfer.setData("text/plain",m.toText(n)),e.input.draggingFrom=!0}},k.dragend=function(e){return window.setTimeout(function(){return e.input.dragginFrom=!1},50)},k.dragover=k.dragenter=function(e,t){t.preventDefault();var n=e.posAtCoords({left:t.clientX,top:t.clientY});if(n){var o=y.coordsAtPos(e,n),a=e.wrapper.getBoundingClientRect();o.top-=a.top,o.right-=a.left,o.bottom-=a.top,o.left-=a.left;var r=e.input.dropTarget;r.style.display="block",r.style.left=o.left-1+"px",r.style.top=o.top+"px",r.style.height=o.bottom-o.top+"px"}},k.dragleave=function(e){return e.input.dropTarget.style.display=""},k.drop=function(e,t){if(e.input.dropTarget.style.display="",t.dataTransfer){var n=void 0,o=void 0,a=void 0;if((n=t.dataTransfer.getData("text/html"))?a=u.fromHTML(e.schema,n,{document:document}):(o=t.dataTransfer.getData("text/plain"))&&(a=f.convertFrom(e.schema,o,f.knownSource("markdown")?"markdown":"text")),a){t.preventDefault();var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return;var s=e.tr;e.input.draggingFrom&&!t.ctrlKey&&(s.deleteSelection(),r=s.map(r).pos),s.replace(r,r,a,y.findSelectionAtStart(a).from,y.findSelectionAtEnd(a).to).apply(),e.setSelection(r,s.map(r).pos),e.focus()}}},k.focus=function(e){p.addClass(e.wrapper,"ProseMirror-focused"),e.signal("focus")},k.blur=function(e){p.rmClass(e.wrapper,"ProseMirror-focused"),e.signal("blur")}}),require.register("prosemirror/edit/keys",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var n=u[e.keyCode],o=n;return null==o||e.altGraphKey?!1:(e.altKey&&"Alt"!=n&&(o="Alt-"+o),e.ctrlKey&&"Ctrl"!=n&&(o="Ctrl-"+o),e.metaKey&&"Cmd"!=n&&(o="Cmd-"+o),!t&&e.shiftKey&&"Shift"!=n&&(o="Shift-"+o),o)}function r(e){var t="string"==typeof e?e:u[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function s(e){for(var t=e.split(/-(?!'?$)/),n=t[t.length-1],o=void 0,a=void 0,r=void 0,s=void 0,i=0;i<t.length-1;i++){var c=t[i];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))o=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);l?s=!0:a=!0}}return o&&(n="Alt-"+n),a&&(n="Ctrl-"+n),s&&(n="Cmd-"+n),r&&(n="Shift-"+n),n}function i(e,t,n,o){var a=!0;e:for(;a;){var r=e,s=t,c=n,l=o;a=!1;var u=s.options.call?s.options.call(r,l):s.bindings[r];if(u===!1)return"nothing";if("..."===u)return"multi";if(null!=u&&c(u))return"handled";var p=s.options.fallthrough;if(p){if(!Array.isArray(p)){e=r,t=p,n=c,o=l,a=!0,u=p=void 0;continue e}for(var d=0;d<p.length;d++){var m=i(r,p[d],c,l);if(m)return m}}}}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.keyName=a,e.isModifierKey=r,e.normalizeKeyName=s,e.lookupKey=i;var l="undefined"!=typeof navigator?/Mac/.test(navigator.platform):!1,u={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.names=u;for(var p=0;10>p;p++)u[p+48]=u[p+96]=String(p);for(var p=65;90>=p;p++)u[p]=String.fromCharCode(p);for(var p=1;12>=p;p++)u[p+111]=u[p+63235]="F"+p;var d=function(){function e(t,n){if(o(this,e),this.options=n||{},this.bindings=Object.create(null),t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&this.addBinding(a,t[a])}return c(e,[{key:"addBinding",value:function(e,t){for(var n=e.split(" ").map(s),o=0;o<n.length;o++){var a=n.slice(0,o+1).join(" "),r=o==n.length-1?t:"...",i=this.bindings[a];if(i){if(i!=r)throw new Error("Inconsistent bindings for "+a)}else this.bindings[a]=r}}},{key:"removeBinding",value:function(e){for(var t=e.split(" ").map(s),n=t.length-1;n>=0;n--){var o=t.slice(0,n).join(" "),a=this.bindings[o];if("..."==a&&!this.unusedMulti(o))break;a&&delete this.bindings[o]}}},{key:"unusedMulti",value:function(e){for(var t in this.bindings)if(t.length>e&&0==t.indexOf(e)&&" "==t.charAt(e.length))return!1;return!0}}]),e}();e.Keymap=d}),require.register("prosemirror/edit/main",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(e,t,n){for(var o=!0;o;){var a=e,r=t,s=n;o=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,r);if(void 0!==i){if("value"in i)return i.value;var c=i.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return void 0;e=l,t=r,n=s,o=!0,i=l=void 0}},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t("./css");var c=t("../model"),l=t("../transform"),u=t("../util/sortedinsert"),p=o(u),d=t("../util/map"),m=t("./options"),f=t("./selection"),h=t("../dom"),g=t("./draw"),v=t("./input"),y=t("./history"),b=t("./event"),k=t("../serialize/text");t("../parse/text");var S=t("../parse"),w=t("../serialize"),x=t("./commands"),E=t("./range"),_=t("./keys"),M=function(){function e(t){r(this,e),t=this.options=m.parseOptions(t),this.schema=t.schema,null==t.doc&&(t.doc=this.schema.node("doc",null,[this.schema.node("paragraph")])),this.content=h.elt("div",{"class":"ProseMirror-content"}),this.wrapper=h.elt("div",{"class":"ProseMirror"},this.content),this.wrapper.ProseMirror=this,t.place&&t.place.appendChild?t.place.appendChild(this.wrapper):t.place&&t.place(this.wrapper),this.setDocInner(t.docFormat?S.convertFrom(this.schema,t.doc,t.docFormat,{document:document}):t.doc),g.draw(this,this.doc),this.content.contentEditable=!0,t.label&&this.content.setAttribute("aria-label",t.label),this.mod=Object.create(null),this.operation=null,this.dirtyNodes=new d.Map,this.flushScheduled=!1,this.sel=new f.SelectionState(this),this.accurateSelection=!1,this.input=new v.Input(this),this.commands=x.initCommands(this.schema),this.commandKeys=Object.create(null),m.initOptions(this)}return i(e,[{key:"apply",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?C:arguments[1];if(e.doc==this.doc)return!1;if(e.docs[0]!=this.doc&&c.findDiffStart(e.docs[0],this.doc))throw new Error("Applying a transform that does not start with the current document");return this.updateDoc(e.doc,e,t.selection),this.signal("transform",e,t),t.scrollIntoView&&this.scrollIntoView(),e}},{key:"setContent",value:function(e,t){t&&(e=S.convertFrom(this.schema,e,t)),this.setDoc(e)}},{key:"getContent",value:function(e){return e?w.convertTo(this.doc,e):this.doc}},{key:"setDocInner",value:function(e){if(e.type!=this.schema.nodes.doc)throw new Error("Trying to set a document with a different schema");this.doc=e,this.ranges=new E.RangeStore(this),this.history=new y.History(this)}},{key:"setDoc",value:function(e,t){t||(t=f.findSelectionAtStart(e)),this.signal("beforeSetDoc",e,t),this.ensureOperation(),this.setDocInner(e),this.sel.set(t,!0),this.signal("setDoc",e,t)}},{key:"updateDoc",value:function(e,t,n){this.ensureOperation(),this.input.maybeAbortComposition(),this.ranges.transform(t),this.doc=e,this.sel.setAndSignal(n||this.sel.range.map(e,t)),this.signal("change")}},{key:"checkPos",value:function(e,t){if(!this.doc.isValidPos(e,t))throw new Error("Position "+e+" is not valid in current document")}},{key:"setSelection",value:function(e,t){var n=e;n instanceof f.Selection||(n=new f.TextSelection(e,t)),n instanceof f.TextSelection?(this.checkPos(n.head,!0),this.checkPos(n.anchor,!0)):(this.checkPos(n.from,!1),this.checkPos(n.to,!1)),this.ensureOperation(),this.input.maybeAbortComposition(),n.eq(this.sel.range)||this.sel.setAndSignal(n)}},{key:"setNodeSelection",value:function(e){this.checkPos(e,!1);var t=this.doc.path(e.path);if(e.offset>=t.maxOffset)throw new Error("Trying to set a node selection at the end of a node");var n=t.isTextblock?t.childAfter(e.offset).node:t.child(e.offset);this.input.maybeAbortComposition(),this.sel.setAndSignal(new f.NodeSelection(e,e.move(1),n))}},{key:"ensureOperation",value:function(){return this.operation||this.startOperation()}},{key:"startOperation",value:function(){var e=this;return this.sel.beforeStartOp(),this.operation=new T(this),this.flushScheduled||(h.requestAnimationFrame(function(){e.flushScheduled=!1,e.flush()}),this.flushScheduled=!0),this.operation}},{key:"flush",value:function(){if(document.body.contains(this.wrapper)&&this.operation){this.signal("flushing");var e=this.operation;if(e){this.operation=null,this.accurateSelection=!0;var t=e.doc!=this.doc||this.dirtyNodes.size,n=!1;this.input.composing||!t&&!e.composingAtStart||(g.redraw(this,this.dirtyNodes,this.doc,e.doc),this.dirtyNodes.clear(),n=!0),!n&&e.sel.eq(this.sel.range)||this.input.composing||this.sel.toDOM(e.focus),e.scrollIntoView!==!1&&f.scrollIntoView(this,e.scrollIntoView),t&&this.signal("draw"),this.signal("flush"),this.signal("flushed"),this.accurateSelection=!1}}}},{key:"setOption",value:function(e,t){m.setOption(this,e,t)}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addKeymap",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?50:arguments[1];p["default"](this.input.keymaps,{map:e,rank:t},function(e,t){return e.rank-t.rank})}},{key:"removeKeymap",value:function(e){for(var t=this.input.keymaps,n=0;n<t.length;++n)if(t[n].map==e||t[n].map.options.name==e)return t.splice(n,1),!0}},{key:"markRange",value:function(e,t,n){this.checkPos(e),this.checkPos(t);var o=new E.MarkedRange(e,t,n);return this.ranges.addRange(o),o}},{key:"removeRange",value:function(e){this.ranges.removeRange(e)}},{key:"setStyle",value:function(e,t,n){var o=this.selection;if(o.empty){var a=this.activeStyles();if(null==t&&(t=!c.containsStyle(a,e)),t&&!this.doc.path(o.head.path).type.canContainStyle(e))return;this.input.storedStyles=t?e.create(n).addToSet(a):c.removeStyle(a,e),this.signal("activeStyleChange")}else(null!=t?t:!c.rangeHasStyle(this.doc,o.from,o.to,e))?this.apply(this.tr.addStyle(o.from,o.to,e.create(n))):this.apply(this.tr.removeStyle(o.from,o.to,e))}},{key:"activeStyles",value:function(){return this.input.storedStyles||c.spanStylesAt(this.doc,this.selection.head)}},{key:"focus",value:function(){this.operation?this.operation.focus=!0:this.sel.toDOM(!0)}},{key:"hasFocus",value:function(){return this.sel.range instanceof f.NodeSelection?document.activeElement==this.content:f.hasFocus(this)}},{key:"posAtCoords",value:function(e){return f.posAtCoords(this,e)}},{key:"coordsAtPos",value:function(e){return this.checkPos(e),f.coordsAtPos(this,e)}},{key:"scrollIntoView",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];e&&this.checkPos(e),this.ensureOperation(),this.operation.scrollIntoView=e}},{key:"execCommand",value:function(e,t){var n=this.commands[e];return!(!n||n.exec(this,t)===!1)}},{key:"keyForCommand",value:function(e){var t=this.commandKeys[e];if(void 0!==t)return t;var n=this.commands[e];if(!n)return this.commandKeys[e]=null;var o=n.info.key||(h.browser.mac?n.info.macKey:n.info.pcKey);if(o){
o=_.normalizeKeyName(Array.isArray(o)?o[0]:o);var a=this.options.keymap.bindings[o];if(Array.isArray(a)?a.indexOf(e)>-1:a==e)return this.commandKeys[e]=o}for(var r in this.options.keymap.bindings){var s=this.options.keymap.bindings[r];if(Array.isArray(s)?s.indexOf(e)>-1:s==e)return this.commandKeys[e]=r}return this.commandKeys[e]=null}},{key:"markRangeDirty",value:function(e){this.ensureOperation();for(var t=this.dirtyNodes,n=e.from,o=e.to,a=0,r=this.doc;;a++){var s=a==n.depth,i=a==o.depth;if(s||i||n.path[a]!=o.path[a]){var c=s?n.offset:n.path[a],l=i?o.offset:o.path[a]+1;if(r.isTextblock)for(var u=0,p=0;l>u;p++){var d=r.child(p);u+=d.offset,u>c&&t.set(d,2)}else for(var p=c;l>p;p++)t.set(r.child(p),2);break}var d=r.child(n.path[a]);t.has(d)||t.set(d,1),r=d}}},{key:"selection",get:function(){return this.accurateSelection||this.ensureOperation(),this.sel.range}},{key:"selectedDoc",get:function(){var e=this.selection;return c.sliceBetween(this.doc,e.from,e.to)}},{key:"selectedText",get:function(){return k.toText(this.selectedDoc)}},{key:"tr",get:function(){return new A(this)}}]),e}();e.ProseMirror=M;var C={};b.eventMixin(M);var T=function D(e){r(this,D),this.doc=e.doc,this.sel=e.sel.range,this.scrollIntoView=!1,this.focus=!1,this.composingAtStart=!!e.input.composing},A=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e.doc),this.pm=e}return a(t,e),i(t,[{key:"apply",value:function(e){return this.pm.apply(this,e)}},{key:"replaceSelection",value:function(e,t){var n=this.selection,o=n.empty,a=n.from,r=n.to,s=n.node,i=void 0;if(e&&e.isInline&&t!==!1){var l=o?this.pm.input.storedStyles:c.spanStylesAt(this.doc,a);e=e.type.create(e.attrs,e.text,l)}if(s&&s.isTextblock&&e&&e.isInline)a=new c.Pos(a.toPath(),0),r=new c.Pos(a.path,s.maxOffset);else if(s)for(;a.depth&&0==a.offset&&(i=this.doc.path(a.path))&&a.offset==i.maxOffset-1&&!i.type.canBeEmpty&&(!e||!i.type.canContain(e));)a=a.shorten(),r=r.shorten(null,1);else if(e&&e.isBlock&&this.doc.path(a.path.slice(0,a.depth-1)).type.canContain(e)){this["delete"](a,r);var u=this.doc.path(a.path);return a.offset&&a.offset!=u.maxOffset&&this.split(a),this.insert(a.shorten(null,a.offset?1:0),e)}return e?this.replaceWith(a,r,e):this["delete"](a,r)}},{key:"deleteSelection",value:function(){return this.replaceSelection()}},{key:"typeText",value:function(e){return this.replaceSelection(this.pm.schema.text(e),!0)}},{key:"selection",get:function(){return this.steps.length?this.pm.selection.map(this):this.pm.selection}}]),t}(l.Transform)}),require.register("prosemirror/edit/options",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,o){p[e]=new u(t,n,o)}function r(e){var t=Object.create(null),n=e?[e].concat(e.use||[]):[];e:for(var o in p){for(var a=0;a<n.length;a++)if(o in n[a]){t[o]=n[a][o];continue e}t[o]=p[o].defaultValue}return t}function s(e){for(var t in p){var n=p[t];n.update&&n.updateOnInit&&n.update(e,e.options[t],null,!0)}}function i(e,t,n){var o=p[t];if(o.update===!1)throw new Error("Option '"+t+"' can not be changed");var a=e.options[t];e.options[t]=n,o.update&&o.update(e,n,a,!1)}Object.defineProperty(e,"__esModule",{value:!0}),e.defineOption=a,e.parseOptions=r,e.initOptions=s,e.setOption=i;var c=t("../model"),l=t("./commands"),u=function d(e,t,n){o(this,d),this.defaultValue=e,this.update=t,this.updateOnInit=n!==!1},p={__proto__:null,schema:new u(c.defaultSchema,!1,!1),doc:new u(null,function(e,t){e.setDoc(t)},!1),docFormat:new u(null),place:new u(null),keymap:new u(null,function(e,t){t||(e.options.keymap=l.defaultKeymap(e))}),historyDepth:new u(50),historyEventDelay:new u(500),commandParamHandler:new u("default"),label:new u(null)}}),require.register("prosemirror/edit/range",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=t("./event"),s=function(){function e(t,n,a){o(this,e),this.options=a||{},this.from=t,this.to=n}return a(e,[{key:"clear",value:function(){this.signal("removed",this.from),this.from=this.to=null}}]),e}();e.MarkedRange=s,r.eventMixin(s);var i=function(){function e(){o(this,e),this.sorted=[]}return a(e,[{key:"find",value:function(e){for(var t=0,n=this.sorted.length;;){if(t+10>n){for(var o=t;n>o;o++)if(this.sorted[o].at.cmp(e)>=0)return o;return n}var a=t+n>>1;this.sorted[a].at.cmp(e)>0?n=a:t=a}}},{key:"insert",value:function(e){this.sorted.splice(this.find(e.at),0,e)}},{key:"remove",value:function(e,t){for(var n=this.find(e),o=0;;o++){var a=n-o-1,r=n+o;if(a>=0&&this.sorted[a].range==t)return void this.sorted.splice(a,1);if(r<this.sorted.length&&this.sorted[r].range==t)return void this.sorted.splice(r,1)}}},{key:"resort",value:function(){for(var e=0;e<this.sorted.length;e++)for(var t=this.sorted[e],n=t.at="open"==t.type?t.range.from:t.range.to,o=e;o>0&&this.sorted[o-1].at.cmp(n)>0;)this.sorted[o]=this.sorted[o-1],this.sorted[--o]=t}}]),e}(),c=function(){function e(t){o(this,e),this.pm=t,this.ranges=[],this.sorted=new i}return a(e,[{key:"addRange",value:function(e){this.ranges.push(e),this.sorted.insert({type:"open",at:e.from,range:e}),this.sorted.insert({type:"close",at:e.to,range:e}),this.pm.markRangeDirty(e)}},{key:"removeRange",value:function(e){var t=this.ranges.indexOf(e);t>-1&&(this.ranges.splice(t,1),this.sorted.remove(e.from,e),this.sorted.remove(e.to,e),this.pm.markRangeDirty(e),e.clear())}},{key:"transform",value:function(e){for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t];n.from=e.map(n.from,n.options.inclusiveLeft?-1:1).pos,n.to=e.map(n.to,n.options.inclusiveRight?1:-1).pos;var o=n.from.cmp(n.to);n.options.clearWhenEmpty!==!1&&o>=0?(this.removeRange(n),t--):o>0&&(n.to=n.from)}this.sorted.resort()}},{key:"activeRangeTracker",value:function(){return new l(this.sorted.sorted)}}]),e}();e.RangeStore=c;var l=function(){function e(t){o(this,e),this.sorted=t,this.pos=0,this.current=[]}return a(e,[{key:"advanceTo",value:function(e){for(var t=void 0;this.pos<this.sorted.length&&(t=this.sorted[this.pos]).at.cmp(e)<=0;){var n=t.range.options.className;n&&("open"==t.type?this.current.push(n):this.current.splice(this.current.indexOf(n),1),this.pos++)}}},{key:"nextChangeBefore",value:function(e){for(;;){if(this.pos==this.sorted.length)return null;var t=this.sorted[this.pos];if(t.range.options.className)return t.at.cmp(e)>=0?null:t.at.offset;this.pos++}}}]),e}()}),require.register("prosemirror/edit/selection",function(e,t,n){"use strict";function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){e.classList.remove("ProseMirror-selectednode")}function s(e,t){t.classList.add("ProseMirror-selectednode")}function i(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}function c(e){for(var t=[];;){var n=e.getAttribute("pm-path");if(!n)return t;t.unshift(+n),e=e.parentNode}}function l(e,t,n,o){if(!o&&e.operation&&e.doc!=e.operation.doc)throw new Error("Fetching a position from an outdated DOM structure");for(var a=0,r=void 0;;){if(3==t.nodeType)a+=n;else{if(t.hasAttribute("pm-path")||t==e.content)break;(r=t.getAttribute("pm-span-offset"))&&(a+=+r)}var s=t.parentNode;n=Array.prototype.indexOf.call(s.childNodes,t)+(3!=t.nodeType&&n==t.childNodes.length?1:0),t=s}for(var i=0,l=n-1;l>=0;l--){var u=t.childNodes[l];if(3==u.nodeType)o&&(a+=u.nodeValue.length);else{if(r=u.getAttribute("pm-span")){i=f(r).to;break}if(r=u.getAttribute("pm-path")){i=+r+1,a=0;break}o&&(a+=u.textContent.length)}}return new j.Pos(c(t),i+a)}function u(e,t,n){return null==n&&(n=Array.prototype.indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),l(e,t,n)}function p(e){if(!y(e))return null;var t=getSelection();return new B(l(e,t.anchorNode,t.anchorOffset,!0),l(e,t.focusNode,t.focusOffset,!0))}function d(e,t,n){for(var o=n?e.lastChild:e.firstChild;o;o=n?o.previousSibling:o.nextSibling)if(1==o.nodeType){var a=o.getAttribute("pm-path");if(a){if(+a==t)return o}else{var r=d(o,t);if(r)return r}}}function m(e,t){for(var n=e,o=0;o<t.length;o++)if(n=d(n,t[o]),!n)throw new Error("Failed to resolve path "+t.join("/"));return n}function f(e){var t=/^(\d+)-(\d+)$/.exec(e),n=I(t,3),o=(n[0],n[1]),a=n[2];return{from:+o,to:+a}}function h(e,t,n){function o(e){for(var a=e.firstChild,r=0,s=void 0;a;a=a.nextSibling,r++)if(1==a.nodeType)if(s=a.getAttribute("pm-span")){var i=f(s),c=i.from,l=i.to;if(n?c==t:l>=t)return{node:a,offset:r,innerOffset:t-c}}else if(s=a.getAttribute("pm-path")){var u=t-+s;if(0==u||n&&1==u)return{node:a,offset:r,innerOffset:u}}else{var p=o(a);if(p)return p}}return o(e)}function g(e,t){for(;;){var n=e.firstChild;if(!n)return{node:e,offset:t};if(1!=n.nodeType)return{node:n,offset:t};if(n.hasAttribute("pm-span-offset")){for(var o=0;;){var a=n.nextSibling,r=void 0;if(!a||(r=+a.getAttribute("pm-span-offset"))>=t)break;n=a,o=r}t-=o}e=n}}function v(e,t){var n=m(e,t.path),o=h(n,t.offset),a=void 0;return o?o.node.hasAttribute("pm-span-atom")||!(a=g(o.node,o.innerOffset))?{node:o.node.parentNode,offset:o.offset+(o.innerOffset?1:0)}:a:{node:n,offset:0}}function y(e){var t=window.getSelection();return t.rangeCount&&F.contains(e.content,t.anchorNode)}function b(e,t){var n=document.elementFromPoint(t.left,t.top+1);if(!F.contains(e.content,n))return null;var o=void 0;return 1==n.childNodes.length&&3==n.firstChild.nodeType?(n=n.firstChild,o=E(n,t)):o=_(n,t),u(e,n,o)}function k(e,t,n){var o=document.createRange();return o.setEnd(e,n),o.setStart(e,t),o.getBoundingClientRect()}function S(e,t){var n=v(e.content,t),o=n.node,a=n.offset,r=void 0,s=void 0;if(3==o.nodeType)a<o.nodeValue.length&&(s=k(o,a,a+1),r="left"),s&&s.left!=s.right||!a||(s=k(o,a-1,a),r="right");else if(o.firstChild){if(a<o.childNodes.length){var i=o.childNodes[a];s=3==i.nodeType?k(i,0,i.nodeValue.length):i.getBoundingClientRect(),r="left"}if((!s||s.left==s.right)&&a){var i=o.childNodes[a-1];s=3==i.nodeType?k(i,0,i.nodeValue.length):i.getBoundingClientRect(),r="right"}}else s=o.getBoundingClientRect(),r="left";var c=s[r];return{top:s.top,bottom:s.bottom,left:c,right:c}}function w(e,t){t||(t=e.sel.range.head||e.sel.range.from);for(var n=S(e,t),o=e.content;;o=o.parentNode){var a=o==document.body,r=a?i():o.getBoundingClientRect(),s=0,c=0;if(n.top<r.top?c=-(r.top-n.top+V):n.bottom>r.bottom&&(c=n.bottom-r.bottom+V),n.left<r.left?s=-(r.left-n.left+V):n.right>r.right&&(s=n.right-r.right+V),s||c?a&&window.scrollBy(s,c):(c&&(o.scrollTop+=c),s&&(o.scrollLeft+=s)),a)break}}function x(e,t,n){for(var o=e.top,a=e.left,r=1e8,s=1e8,i=0,c=0;c<t.length;c++){var l=t[c];if(l&&l.top!=l.bottom){var u=a<l.left?l.left-a:a>l.right?a-l.right:0;if(!(u>s)){s>u&&(s=u,r=1e8);var p=o<l.top?l.top-o:o>l.bottom?o-l.bottom:0;r>p&&(r=p,i=a<(l.left+l.right)/2?c:c+1)}}}return n&&(s||r)?null:i}function E(e,t,n){for(var o=e.nodeValue.length,a=document.createRange(),r=[],s=0;o>s;s++)a.setEnd(e,s+1),a.setStart(e,s),r.push(a.getBoundingClientRect());return x(t,r,n)}function _(e,t){for(var n=[],o=e.firstChild;o;o=o.nextSibling)o.getBoundingClientRect?n.push(o.getBoundingClientRect()):n.push(null);return x(t,n)}function M(e,t,n,o,a){var r=e.path(t);if(r.isTextblock)return new B(new j.Pos(t,n));for(var s=n+(o>0?0:-1);o>0?s<r.maxOffset:s>=0;s+=o){var i=r.child(s);if(!a&&null==i.type.contains&&i.type.selectable)return new H(new j.Pos(t,s),new j.Pos(t,s+1),i);t.push(s);var c=M(e,t,0>o?i.maxOffset:0,o,a);if(c)return c;t.pop()}}function C(e,t,n,o){for(var a=t.path.slice(),r=t.offset;;){var s=M(e,a,r,n,o);if(s)return s;if(!a.length)break;r=a.pop()+(n>0?1:0)}}function T(e,t,n,o){void 0===n&&(n=1);var a=C(e,t,n,o)||C(e,t,-n,o);if(!a)throw new Error("Searching for selection in invalid document "+e);return a}function A(e,t,n){return void 0===t&&(t=[]),M(e,t.slice(),0,1,n)}function D(e,t,n){return void 0===t&&(t=[]),M(e,t.slice(),e.maxOffset,-1,n)}function P(e,t,n,o){for(;t&&t!=e.content;t=t.parentNode){if(t.hasAttribute("pm-path")){var a=c(t),r=e.doc.path(a);if(r.type.clicked){var s=r.type.clicked(r,a,t,n);if(s)return s}return(o||null==r.type.contains)&&r.type.selectable?j.Pos.from(a):null}if(t.hasAttribute("pm-span-atom")){var a=c(t.parentNode),i=e.doc.path(a),l=f(t.getAttribute("pm-span")),r=i.childAfter(l.from).node;return r.type.selectable?new j.Pos(a,l.from):null}}}function N(e,t,n){for(var o=m(e.content,t.path),a=S(e,t),r=o.firstChild;r;r=r.nextSibling)for(var s=r.getClientRects(),i=0;i<s.length;i++){var c=s[i];if(0>n?c.bottom<a.top:c.top>a.bottom)return!1}return!0}function R(e,t){var n=v(e.content,t),o=n.node,a=n.offset,r=document.createRange();r.setEnd(o,a),r.setStart(o,a);var s=getSelection();s.removeAllRanges(),s.addRange(r)}Object.defineProperty(e,"__esModule",{value:!0});var I=function(){function e(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(c){a=!0,r=c}finally{try{!o&&i["return"]&&i["return"]()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(e,t,n){for(var o=!0;o;){var a=e,r=t,s=n;o=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,r);if(void 0!==i){if("value"in i)return i.value;var c=i.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return void 0;e=l,t=r,n=s,o=!0,i=l=void 0}},L=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.posFromDOM=u,e.rangeFromDOMLoose=p,e.findByPath=d,e.resolvePath=m,e.hasFocus=y,e.posAtCoords=b,e.coordsAtPos=S,e.scrollIntoView=w,e.findSelectionFrom=C,e.findSelectionNear=T,e.findSelectionAtStart=A,e.findSelectionAtEnd=D,e.selectableNodeAbove=P,e.verticalMotionLeavesTextblock=N,e.setDOMSelectionToPos=R;var j=t("../model"),F=t("../dom"),U=function(){function e(t){var n=this;a(this,e),this.pm=t,this.range=A(t.doc),this.lastNonNodePos=null,this.pollState=null,this.pollTimeout=null,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastNode=null,t.content.addEventListener("focus",function(){return n.receivedFocus()})}return L(e,[{key:"setAndSignal",value:function(e,t){this.set(e,t),this.pm.signal("selectionChange")}},{key:"set",value:function(e,t){this.range=e,e.node||(this.lastNonNodePos=null),t!==!1&&(this.lastAnchorNode=null)}},{key:"setNodeAndSignal",value:function(e){this.setNode(e),this.pm.signal("selectionChange")}},{key:"pollForUpdate",value:function(){var e=this;if(!this.pm.input.composing){clearTimeout(this.pollTimeout),this.pollState="update";var t=0,n=function o(){e.pm.input.composing||(e.pm.operation?e.pollTimeout=setTimeout(o,20):e.readUpdate()||1!=++t?(e.pollState=null,e.pollToSync()):e.pollTimeout=setTimeout(o,50))};this.pollTimeout=setTimeout(n,20)}}},{key:"domChanged",value:function(){var e=getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastHeadNode||e.focusOffset!=this.lastHeadOffset}},{key:"storeDOMState",value:function(){var e=getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastHeadNode=e.focusNode,this.lastHeadOffset=e.focusOffset}},{key:"readUpdate",value:function(){if(this.pm.input.composing||!y(this.pm)||!this.domChanged())return!1;var e=getSelection(),t=this.pm.doc,n=l(this.pm,e.anchorNode,e.anchorOffset),o=l(this.pm,e.focusNode,e.focusOffset),a=T(t,o,this.range.head&&this.range.head.cmp(o)<0?-1:1);return a instanceof B&&t.path(n.path).isTextblock&&(a=new B(n,a.head)),this.setAndSignal(a),a instanceof H||a.head.cmp(o)||a.anchor.cmp(n)?this.toDOM():(this.clearNode(),this.storeDOMState()),!0}},{key:"pollToSync",value:function(){var e=this;if(!this.pollState){this.pollState="sync";var t=function n(){document.activeElement!=e.pm.content?e.pollState=null:(e.pm.operation||e.pm.input.composing||e.syncDOM(),e.pollTimeout=setTimeout(n,200))};this.pollTimeout=setTimeout(t,200)}}},{key:"syncDOM",value:function(){!this.pm.input.composing&&y(this.pm)&&this.domChanged()&&this.toDOM()}},{key:"toDOM",value:function(e){this.range instanceof H?this.nodeToDOM(e):this.rangeToDOM(e)}},{key:"nodeToDOM",value:function(e){window.getSelection().removeAllRanges(),e&&this.pm.content.focus();var t=this.range.from,n=this.range.node,o=void 0;o=n.isInline?h(m(this.pm.content,t.path),t.offset,!0).node:m(this.pm.content,t.toPath()),o!=this.lastNode&&(this.clearNode(),s(n,o),this.lastNode=o)}},{key:"clearNode",value:function(){return this.lastNode?(r(this.lastNode),this.lastNode=null,!0):void 0}},{key:"rangeToDOM",value:function(e){var t=window.getSelection();if(!this.clearNode()&&!y(this.pm)){if(!e)return;F.browser.gecko&&this.pm.content.focus()}if(this.domChanged()){var n=document.createRange(),o=this.pm.content,a=v(o,this.range.anchor),r=v(o,this.range.head);if(t.extend)n.setEnd(a.node,a.offset),n.collapse(!1);else{if(this.range.anchor.cmp(this.range.head)>0){var s=a;a=r,r=s}n.setEnd(r.node,r.offset),n.setStart(a.node,a.offset)}t.removeAllRanges(),t.addRange(n),t.extend&&t.extend(r.node,r.offset),this.storeDOMState()}}},{key:"receivedFocus",value:function(){this.pollState||this.pollToSync()}},{key:"beforeStartOp",value:function(){"update"==this.pollState&&this.readUpdate()?(clearTimeout(this.pollTimeout),this.pollState=null,this.pollToSync()):this.syncDOM()}}]),e}();e.SelectionState=U;var q=function z(){a(this,z)};e.Selection=q;var H=function(e){function t(e,n,o){a(this,t),O(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.from=e,this.to=n,this.node=o}return o(t,e),L(t,[{key:"eq",value:function(e){return e instanceof t&&!this.from.cmp(e.from)}},{key:"map",value:function(e,n){var o=n.map(this.from,1).pos,a=n.map(this.to,-1).pos;if(j.Pos.samePath(o.path,a.path)&&o.offset==a.offset-1){var r=e.path(o.path),s=r.isTextblock?r.childAfter(o.offset).node:r.child(o.offset);if(s.type.selectable)return new t(o,a,s)}return T(e,o)}},{key:"empty",get:function(){return!1}}]),t}(q);e.NodeSelection=H;var B=function(e){function t(e,n){a(this,t),O(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.anchor=e,this.head=n||e}return o(t,e),L(t,[{key:"eq",value:function(e){return e instanceof t&&!e.head.cmp(this.head)&&!e.anchor.cmp(this.anchor)}},{key:"map",value:function(e,n){var o=n.map(this.head).pos;if(!e.path(o.path).isTextblock)return T(e,o);var a=n.map(this.anchor).pos;return new t(e.path(a.path).isTextblock?a:o,o)}},{key:"inverted",get:function(){return this.anchor.cmp(this.head)>0}},{key:"from",get:function(){return this.inverted?this.head:this.anchor}},{key:"to",get:function(){return this.inverted?this.anchor:this.head}},{key:"empty",get:function(){return 0==this.anchor.cmp(this.head)}}]),t}(q);e.TextSelection=B;var V=5}),require.register("prosemirror/inputrules/autoinput",function(e,t,n){"use strict";function o(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],a=arguments.length<=4||void 0===arguments[4]?null:arguments[4],s=t.shorten(),i=s.offset>0&&e.doc.path(s.path).child(s.offset-1),c=i&&i.type.name==n&&(!a||a(i)),l=e.tr.wrap(t,t,n,o),u=l.map(t).pos;l["delete"](new r.Pos(u.path,0),u),c&&l.join(s),l.apply()}function a(e,t,n,o){e.tr.setBlockType(t,t,n,o)["delete"](new r.Pos(t.path,0),t).apply()}Object.defineProperty(e,"__esModule",{value:!0});var r=t("../model"),s=t("../edit"),i=t("./inputrules");s.defineOption("autoInput",!1,function(e,t,n){t&&!n?i.addInputRules(e,c):!t&&n&&i.removeInputRules(e,c)});var c=[new i.Rule("-",/--$/,"—"),new i.Rule('"',/\s(")$/,"“"),new i.Rule('"',/"$/,"”"),new i.Rule("'",/\s(')$/,"‘"),new i.Rule("'",/'$/,"’"),new i.Rule(" ",/^\s*> $/,function(e,t,n){o(e,n,"blockquote")}),new i.Rule(" ",/^(\d+)\. $/,function(e,t,n){var a=+t[1];o(e,n,"ordered_list",{order:a||null,tight:!0},function(e){return e.length+(e.attrs.order||1)==a})}),new i.Rule(" ",/^\s*([-+*]) $/,function(e,t,n){var a=t[1];o(e,n,"bullet_list",{bullet:a,tight:!0},function(e){return e.attrs.bullet==a})}),new i.Rule("`",/^```$/,function(e,t,n){a(e,n,"code_block",{params:""})}),new i.Rule(" ",/^(#{1,6}) $/,function(e,t,n){a(e,n,"heading",{level:t[1].length})})];e.rules=c}),require.register("prosemirror/inputrules/inputrules",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){e.mod.interpretInput||(e.mod.interpretInput=new p(e)),e.mod.interpretInput.addRules(t)}function r(e,t){var n=e.mod.interpretInput;n&&(n.removeRules(t),0==n.rules.length&&(n.unregister(),e.mod.interpretInput=null))}function s(e,t){for(var n=e.path(t.path),o=n.type.isCode,a="",r=0,s=0;r<t.offset;){var i=n.child(s++),c=i.offset;if(a+=r+c>t.offset?i.text.slice(0,t.offset-r):i.text,r+c>=t.offset){i.styles.some(function(e){return e.type.isCode})&&(o=!0);break}r+=c}return{textBefore:a,isCode:o}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.addInputRules=a,e.removeInputRules=r;var c=t("../model"),l=t("../edit"),u=function d(e,t,n){o(this,d),this.lastChar=e,this.match=t,this.handler=n};e.Rule=u;var p=function(){function e(t){var n=this;o(this,e),this.pm=t,this.rules=[],this.cancelVersion=null,t.on("selectionChange",this.onSelChange=function(){return n.cancelVersion=null}),t.on("textInput",this.onTextInput=this.onTextInput.bind(this)),t.addKeymap(new l.Keymap({Backspace:function(e){return n.backspace(e)}},{name:"inputRules"}),20)}return i(e,[{key:"unregister",value:function(){this.pm.off("selectionChange",this.onSelChange),this.pm.off("textInput",this.onTextInput),this.pm.removeKeymap("inputRules")}},{key:"addRules",value:function(e){this.rules=this.rules.concat(e)}},{key:"removeRules",value:function(e){for(var t=0;t<e.length;t++){var n=this.rules.indexOf(e[t]);n>-1&&this.rules.splice(n,1)}}},{key:"onTextInput",value:function(e){var t=this.pm.selection.head;if(t)for(var n=void 0,o=void 0,a=e[e.length-1],r=0;r<this.rules.length;r++){var i=this.rules[r],l=void 0;if(!i.lastChar||i.lastChar==a){if(null==n){var u=s(this.pm.doc,t);if(n=u.textBefore,o=u.isCode)return}if(l=i.match.exec(n)){var p=this.pm.history.getVersion();if("string"==typeof i.handler){var d=t.offset-(l[1]||l[0]).length,m=new c.Pos(t.path,d),f=c.spanStylesAt(this.pm.doc,t);this.pm.tr["delete"](m,t).insert(m,this.pm.schema.text(i.handler,f)).apply()}else i.handler(this.pm,l,t);return void(this.cancelVersion=p)}}}}},{key:"backspace",value:function(){return this.cancelVersion?(this.pm.history.backToVersion(this.cancelVersion),void(this.cancelVersion=null)):!1}}]),e}()}),require.register("prosemirror/menu/icons",function(e,t,n){"use strict";function o(e,t){var n=document.createElement("div");if(n.className="ProseMirror-icon",t.path){i[e]||a(e,t);var o=n.appendChild(document.createElementNS(c,"svg"));o.style.width=t.width/t.height+"em";var r=o.appendChild(document.createElementNS(c,"use"));r.setAttributeNS(l,"href","#pm-icon-"+e)}else n.textContent=t.text,t.css&&(n.style.cssText=t.css);return n}function a(e,t){s||(s=document.createElementNS(c,"svg"),s.style.display="none",document.body.insertBefore(s,document.body.firstChild));var n=document.createElementNS(c,"symbol");n.id="pm-icon-"+e,n.setAttribute("viewBox","0 0 "+t.width+" "+t.height);var o=n.appendChild(document.createElementNS(c,"path"));o.setAttribute("d",t.path),s.appendChild(n),i[e]=!0}Object.defineProperty(e,"__esModule",{value:!0}),e.getIcon=o;var r=t("../dom"),s=null,i=Object.create(null),c="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xlink";r.insertCSS("\n.ProseMirror-icon {\n  display: inline-block;\n  line-height: .8;\n  vertical-align: middle;\n  padding: 2px 8px;\n  cursor: pointer;\n}\n\n.ProseMirror-icon-active {\n  background: #666;\n  border-radius: 4px;\n}\n\n.ProseMirror-icon svg {\n  fill: currentColor;\n  height: 1em;\n}\n")}),require.register("prosemirror/menu/menu",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=e.keyForCommand(t.name);return n?t.label+" ("+n+")":t.label}function s(e,t){var n=i(t.pm,e);e.active(t.pm)&&(n.className+=" ProseMirror-icon-active");var o=b.elt("span",{"class":"ProseMirror-menuicon",title:r(t.pm,e)},n);return o.addEventListener("mousedown",function(n){n.preventDefault(),n.stopPropagation(),e.params.length?1==e.params.length&&"select"==e.params[0].type?l(t.pm,e,o):t.enter(f(e)):(e.exec(t.pm),t.reset())}),o}function i(e,t){for(;;){var n=t.info.icon;if(!n)break;if(!n.from)return x.getIcon(t.name,n);if(t=e.commands[n.from],!t)break}return b.elt("span",null,"?")}function c(e,t){var n=e.params[0],o=n["default"]?n["default"].call?n["default"](t.pm):n["default"]:null,a=b.elt("div",{"class":"ProseMirror-select ProseMirror-select-command-"+e.name,title:e.label},o?o.display?o.display(o):o.label:n.defaultLabel||"Select...");return a.addEventListener("mousedown",function(n){n.preventDefault(),n.stopPropagation(),l(t.pm,e,a)}),a}function l(e,t,n){function o(){l||(l=!0,document.body.removeEventListener("mousedown",o),document.body.removeEventListener("keydown",o),e.wrapper.removeChild(s))}var a=t.params[0],r=a.options.call?a.options(e):a.options,s=b.elt("div",{"class":"ProseMirror-select-menu"},r.map(function(n){var a=b.elt("div",null,n.display?n.display(n):n.label);return a.addEventListener("mousedown",function(a){a.preventDefault(),t.exec(e,[n.value]),o()}),a})),i=n.getBoundingClientRect(),c=e.wrapper.getBoundingClientRect();s.style.left=i.left-c.left-2+"px",s.style.top=i.top-c.top-2+"px";var l=!1;document.body.addEventListener("mousedown",o),document.body.addEventListener("keydown",o),e.wrapper.appendChild(s)}function u(e,t){if("icon"==e.display)return s(e,t);if("select"==e.display)return c(e,t);if(e.display)return e.display(t);throw new Error("Command "+e.name+" can not be shown in a menu")}function p(e,t){var n=t.info.prefillParams&&t.info.prefillParams(e),o=t.params.map(function(t,o){var a=void 0,r="field_"+o,s=n?n[o]:t["default"]||"";if("text"==t.type)a=b.elt("input",{name:r,type:"text",placeholder:t.name,value:s,autocomplete:"off"});else{if("select"!=t.type)throw new Error("Unsupported parameter type: "+t.type);a=b.elt("select",{name:r},(t.options.call?t.options(e):t.options).map(function(e){return b.elt("option",{value:e.value,selected:e==s},e.label)}))}return b.elt("div",null,a)});return b.elt("form",null,o)}function d(e,t,n){var o=!1,a=t.params.map(function(t,a){var r=n.elements["field_"+a].value;return r?r:null!=t["default"]?t["default"].call?t["default"](e):t["default"]:void(o=!0)});return o?null:a}function m(e,t,n){var o=p(e,t),a=!1,r=function(e){a||(a=!0,n(e))},s=function(){r(d(e,t,o))};return o.addEventListener("submit",function(e){e.preventDefault(),s()}),o.addEventListener("keydown",function(e){27==e.keyCode?r(null):13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),s())}),setTimeout(function(){var e=o.querySelector("input, textarea");e&&e.focus()},20),o}function f(e){return{display:function(t){return m(t.pm,e,function(n){t.pm.focus(),n?(e.exec(t.pm,n),t.reset()):t.leave()})}}}function h(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];return n.map(function(t){var n=[];for(var o in e.commands){var a=e.commands[o];a.info.menuGroup&&a.info.menuGroup==t&&w["default"](n,a,function(e,t){return(e.info.menuRank||50)-(t.info.menuRank||50)})}return n})}function g(e,t,n){var o=new y.Tooltip(e,"center");o.open(m(e,t,function(t){e.focus(),o.close(),n(t)}))}Object.defineProperty(e,"__esModule",{value:!0});var v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.showSelectMenu=l,e.readParams=f,e.commandGroups=h;var y=t("./tooltip"),b=t("../dom"),k=t("../edit"),S=t("../util/sortedinsert"),w=o(S),x=t("./icons"),E=function(){function e(t,n){a(this,e),this.display=n,this.stack=[],this.pm=t}return v(e,[{key:"show",value:function(e,t){this.stack.length=0,this.enter(e,t)}},{key:"reset",value:function(){this.stack.length=0,this.display.reset()}},{key:"enter",value:function(e,t){var n=this,o=[],a=function s(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)s(e[t]);o.push(M)}else(!e.select||e.select(n.pm))&&o.push(e)};a(e);for(var r=0;r<o.length;r++)o[r]!=M||0!=r&&r!=o.length-1&&o[r+1]!=M||o.splice(r--,1);return o.length?(this.stack.push(o),void this.draw(t)):this.display.clear()}},{key:"draw",value:function(e){var t=this,n=this.stack[this.stack.length-1],o=b.elt("div",{"class":"ProseMirror-menu"},n.map(function(e){return u(e,t)}));this.stack.length>1?this.display.enter(o,function(){return t.leave()},e):this.display.show(o,e)}},{key:"leave",value:function(){this.stack.pop(),this.stack.length?this.draw():this.display.reset()}},{key:"active",get:function(){return this.stack.length>1}}]),e}();e.Menu=E;var _=function(){function e(t,n){a(this,e),this.tooltip=t,this.resetFunc=n}return v(e,[{key:"clear",value:function(){this.tooltip.close()}},{key:"reset",value:function(){this.resetFunc?this.resetFunc():this.clear()}},{key:"show",value:function(e,t){this.tooltip.open(e,t)}},{key:"enter",value:function(e,t,n){var o=b.elt("div",{"class":"ProseMirror-tooltip-back",title:"Back"});o.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t()}),this.show(b.elt("div",{"class":"ProseMirror-tooltip-back-wrapper"},e,o),n)}}]),e}();e.TooltipDisplay=_;var M={display:function(){return b.elt("div",{"class":"ProseMirror-menuseparator"})}};k.defineParamHandler("default",g),k.defineParamHandler("tooltip",g),b.insertCSS('\n\n.ProseMirror-menu {\n  margin: 0 -4px;\n  line-height: 1;\n  white-space: pre;\n}\n.ProseMirror-tooltip .ProseMirror-menu {\n  width: -webkit-fit-content;\n  width: fit-content;\n}\n\n.ProseMirror-tooltip-back-wrapper {\n  padding-left: 12px;\n}\n.ProseMirror-tooltip-back {\n  position: absolute;\n  top: 5px; left: 5px;\n  cursor: pointer;\n}\n.ProseMirror-tooltip-back:after {\n  content: "«";\n}\n\n.ProseMirror-menuicon {\n  margin: 0 7px;\n}\n\n.ProseMirror-menuseparator {\n  display: inline-block;\n}\n.ProseMirror-menuseparator:after {\n  content: "︙";\n  opacity: 0.5;\n  padding: 0 4px;\n  vertical-align: baseline;\n}\n\n.ProseMirror-select, .ProseMirror-select-menu {\n  border: 1px solid #777;\n  border-radius: 3px;\n  font-size: 90%;\n}\n\n.ProseMirror-select {\n  padding: 1px 12px 1px 4px;\n  display: inline-block;\n  vertical-align: middle;\n  position: relative;\n  cursor: pointer;\n  margin: 0 8px;\n}\n\n.ProseMirror-select-command-textblockType {\n  min-width: 3.2em;\n}\n\n.ProseMirror-select:after {\n  content: "▿";\n  color: #777;\n  position: absolute;\n  right: 4px;\n}\n\n.ProseMirror-select-menu {\n  position: absolute;\n  background: #444;\n  color: white;\n  padding: 2px 2px;\n  z-index: 15;\n}\n.ProseMirror-select-menu div {\n  cursor: pointer;\n  padding: 0 1em 0 2px;\n}\n.ProseMirror-select-menu div:hover {\n  background: #777;\n}\n\n');
}),require.register("prosemirror/menu/menubar",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){for(var t=e.parentNode;t;t=t.parentNode)if(t.scrollHeight>t.clientHeight)return t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=t("../edit"),i=t("../dom"),c=t("./update"),l=t("./menu");s.defineOption("menuBar",!1,function(e,t){e.mod.menuBar&&e.mod.menuBar.detach(),e.mod.menuBar=t?new p(e,t):null});var u=function(){function e(t,n){o(this,e),this.container=t,this.resetFunc=n}return r(e,[{key:"clear",value:function(){this.container.textContent=""}},{key:"reset",value:function(){this.resetFunc()}},{key:"show",value:function(e){this.clear(),this.container.appendChild(e)}},{key:"enter",value:function(e,t){var n=this.container.firstChild;n&&(n.style.position="absolute",n.style.opacity="0.5");var o=i.elt("div",{"class":"ProseMirror-menubar-back"});o.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t()});var a=i.elt("div",{"class":"ProseMirror-menubar-sliding"},o,e);this.container.appendChild(a),a.getBoundingClientRect(),a.style.left="0",a.addEventListener("transitionend",function(){n&&n.parentNode&&n.parentNode.removeChild(n)})}}]),e}(),p=function(){function e(t,n){var a=this;o(this,e),this.pm=t,this.menuElt=i.elt("div",{"class":"ProseMirror-menubar-inner"}),this.wrapper=i.elt("div",{"class":"ProseMirror-menubar"},i.elt("div",{"class":"ProseMirror-menu",style:"visibility: hiffdden; z-index: 100"},i.elt("span",{"class":"ProseMirror-menuicon"},i.elt("div",{"class":"ProseMirror-icon"},"x"))),this.menuElt),t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),this.update=new c.MenuUpdate(t,"selectionChange change activeStyleChange",function(){return a.prepareUpdate()}),this.menu=new l.Menu(t,new u(this.menuElt,function(){return a.resetMenu()})),this.menuItems=n&&n.items||l.commandGroups(t,"inline","block","history"),this.update.force(),this.floating=!1,n&&n["float"]&&(this.updateFloat(),this.scrollFunc=function(){document.body.contains(a.pm.wrapper)?a.updateFloat():window.removeEventListener("scroll",a.scrollFunc)},window.addEventListener("scroll",this.scrollFunc))}return r(e,[{key:"detach",value:function(){this.update.detach(),this.wrapper.parentNode.removeChild(this.wrapper),this.scrollFunc&&window.removeEventListener("scroll",this.scrollFunc)}},{key:"prepareUpdate",value:function(){var e=this,t=this.prepareScrollCursor();return function(){e.menu.active||e.resetMenu(),t&&t()}}},{key:"resetMenu",value:function(){this.menu.show(this.menuItems)}},{key:"updateFloat",value:function(){var e=this.pm.wrapper.getBoundingClientRect();if(this.floating)if(e.top>=0||e.bottom<this.menuElt.offsetHeight+10)this.floating=!1,this.menuElt.style.position=this.menuElt.style.left=this.menuElt.style.width="",this.menuElt.style.display="";else{var t=(this.pm.wrapper.offsetWidth-this.pm.wrapper.clientWidth)/2;this.menuElt.style.left=e.left+t+"px",this.menuElt.style.display=e.top>window.innerHeight?"none":""}else if(e.top<0&&e.bottom>=this.menuElt.offsetHeight+10){this.floating=!0;var n=this.menuElt.getBoundingClientRect();this.menuElt.style.left=n.left+"px",this.menuElt.style.width=n.width+"px",this.menuElt.style.position="fixed"}}},{key:"prepareScrollCursor",value:function(){var e=this;if(!this.floating)return null;var t=this.pm.selection.head;if(!t)return null;var n=this.pm.coordsAtPos(t),o=this.menuElt.getBoundingClientRect();if(n.top<o.bottom&&n.bottom>o.top){var r=function(){var t=a(e.pm.wrapper);return t?{v:function(){return t.scrollTop-=o.bottom-n.top}}:void 0}();if("object"==typeof r)return r.v}}}]),e}();i.insertCSS('\n.ProseMirror-menubar {\n  position: relative;\n  margin-bottom: 3px;\n  border-top-left-radius: inherit;\n  border-top-right-radius: inherit;\n}\n\n.ProseMirror-menubar-inner {\n  color: #666;\n  padding: 1px 6px;\n  top: 0; left: 0; right: 0;\n  position: absolute;\n  border-bottom: 1px solid silver;\n  background: white;\n  z-index: 10;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  border-top-left-radius: inherit;\n  border-top-right-radius: inherit;\n}\n\n.ProseMirror-menubar .ProseMirror-icon-active {\n  background: #eee;\n}\n\n.ProseMirror-menubar input[type="text"],\n.ProseMirror-menubar textarea {\n  background: #eee;\n  color: black;\n  border: none;\n  outline: none;\n  width: 100%;\n  box-sizing: -moz-border-box;\n  box-sizing: border-box;\n}\n\n.ProseMirror-menubar input[type="text"] {\n  padding: 0 4px;\n}\n\n.ProseMirror-menubar form {\n  position: relative;\n  padding: 2px 4px;\n}\n\n.ProseMirror-menubar .ProseMirror-blocktype {\n  border: 1px solid #ccc;\n  min-width: 4em;\n}\n.ProseMirror-menubar .ProseMirror-blocktype:after {\n  color: #ccc;\n}\n\n.ProseMirror-menubar-sliding {\n  -webkit-transition: left 0.2s ease-out;\n  -moz-transition: left 0.2s ease-out;\n  transition: left 0.2s ease-out;\n  position: relative;\n  left: 100%;\n  width: 100%;\n  box-sizing: -moz-border-box;\n  box-sizing: border-box;\n  padding-left: 16px;\n  background: white;\n}\n\n.ProseMirror-menubar-back {\n  position: absolute;\n  height: 100%;\n  margin-top: -1px;\n  padding-bottom: 2px;\n  width: 10px;\n  left: 0;\n  border-right: 1px solid silver;\n  cursor: pointer;\n}\n.ProseMirror-menubar-back:after {\n  content: "«";\n}\n\n')}),require.register("prosemirror/menu/tooltip",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=t("../dom"),s="ProseMirror-tooltip",i=function(){function e(t,n){var a=this;o(this,e),this.pm=t,this.dir=n||"above",this.pointer=t.wrapper.appendChild(r.elt("div",{"class":s+"-pointer-"+this.dir+" "+s+"-pointer"})),this.pointerWidth=this.pointerHeight=null,this.dom=t.wrapper.appendChild(r.elt("div",{"class":s})),this.dom.addEventListener("transitionend",function(){"0"==a.dom.style.opacity&&(a.dom.style.display=a.pointer.style.display="")}),this.isOpen=!1,this.lastLeft=this.lastRight=null}return a(e,[{key:"detach",value:function(){this.dom.parentNode.removeChild(this.dom),this.pointer.parentNode.removeChild(this.pointer)}},{key:"getSize",value:function(e){var t=this.pm.wrapper.appendChild(r.elt("div",{"class":s,style:"display: block; position: absolute"},e)),n={width:t.offsetWidth,height:t.offsetHeight};return t.parentNode.removeChild(t),n}},{key:"open",value:function(e,t){for(var n=this.lastLeft=t?t.left:this.lastLeft,o=this.lastTop=t?t.top:this.lastTop,a=this.getSize(e),r=this.pm.wrapper.getBoundingClientRect(),s=this.dom.firstChild,i=void 0;s;s=i)i=s.nextSibling,s!=this.pointer&&this.dom.removeChild(s);this.dom.appendChild(e),this.dom.style.display=this.pointer.style.display="block",null==this.pointerWidth&&(this.pointerWidth=this.pointer.offsetWidth-1,this.pointerHeight=this.pointer.offsetHeight-1),this.dom.style.width=a.width+"px",this.dom.style.height=a.height+"px";var c=5;if("above"==this.dir||"below"==this.dir){var l=Math.max(0,Math.min(n-a.width/2,window.innerWidth-a.width));if(this.dom.style.left=l-r.left+"px",this.pointer.style.left=n-r.left-this.pointerWidth/2+"px","above"==this.dir){var u=o-r.top-c-this.pointerHeight-a.height;this.dom.style.top=u+"px",this.pointer.style.top=u+a.height+"px"}else{var u=o-r.top+c;this.pointer.style.top=u+"px",this.dom.style.top=u+this.pointerHeight+"px"}}else if("left"==this.dir||"right"==this.dir)if(this.dom.style.top=o-r.top-a.height/2+"px",this.pointer.style.top=o-this.pointerHeight/2-r.top+"px","left"==this.dir){var p=n-r.left-c-this.pointerWidth;this.dom.style.left=p-a.width+"px",this.pointer.style.left=p+"px"}else{var p=n-r.left+c;this.dom.style.left=p+this.pointerWidth+"px",this.pointer.style.left=p+"px"}else if("center"==this.dir){var d=Math.max(r.top,0),m=Math.min(r.bottom,window.innerHeight),f=(m-d-a.height)/2;this.dom.style.left=(r.width-a.width)/2+"px",this.dom.style.top=d-r.top+f+"px"}getComputedStyle(this.dom).opacity,getComputedStyle(this.pointer).opacity,this.dom.style.opacity=this.pointer.style.opacity=1,this.isOpen=!0}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.dom.style.opacity=this.pointer.style.opacity=0)}}]),e}();e.Tooltip=i,r.insertCSS('\n\n.ProseMirror-tooltip {\n  position: absolute;\n  display: none;\n  box-sizing: border-box;\n  -moz-box-sizing: border- box;\n  overflow: hidden;\n\n  -webkit-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  border-radius: 5px;\n  padding: 3px 7px;\n  margin: 0;\n  background: #444;\n  border-color: #777;\n  color: white;\n\n  z-index: 5;\n}\n\n.ProseMirror-tooltip-pointer {\n  content: "";\n  position: absolute;\n  display: none;\n  width: 0; height: 0;\n\n  -webkit-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  z-index: 5;\n}\n\n.ProseMirror-tooltip-pointer-above {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid #444;\n}\n\n.ProseMirror-tooltip-pointer-below {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #444;\n}\n\n.ProseMirror-tooltip-pointer-right {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid #444;\n}\n\n.ProseMirror-tooltip-pointer-left {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid #444;\n}\n\n.ProseMirror-tooltip input[type="text"],\n.ProseMirror-tooltip textarea {\n  background: #666;\n  color: white;\n  border: none;\n  outline: none;\n}\n\n.ProseMirror-tooltip input[type="text"] {\n  padding: 0 4px;\n}\n\n')}),require.register("prosemirror/menu/tooltipmenu",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){for(var e=window.getSelection().getRangeAt(0).getClientRects(),t=e[0],n=t.left,o=t.right,a=t.top,r=1;n==o&&e.length>r;){var s=e[r++];n=s.left,o=s.right,a=s.top}for(;r<e.length;r++)e[r].top<e[0].bottom-1&&(r==e.length-1||Math.abs(e[r+1].left-e[r].left)>1)&&(n=Math.min(n,e[r].left),o=Math.max(o,e[r].right),a=Math.min(a,e[r].top));return{top:a,left:(n+o)/2}}function r(e){var t=e.content.querySelector(".ProseMirror-selectednode");if(!t)return{left:0,top:0};var n=t.getBoundingClientRect();return{left:Math.min((n.left+n.right)/2,n.left+20),top:n.top}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=t("../edit"),c=t("../model"),l=t("../dom"),u=t("./update"),p=t("./tooltip"),d=t("./menu"),m="ProseMirror-tooltipmenu";i.defineOption("tooltipMenu",!1,function(e,t){e.mod.tooltipMenu&&e.mod.tooltipMenu.detach(),e.mod.tooltipMenu=t?new f(e,t):null});var f=function(){function e(t,n){var a=this;o(this,e),this.pm=t,this.inlineItems=n&&n.inlineItems||d.commandGroups(t,"inline"),this.blockItems=n&&n.blockItems||d.commandGroups(t,"block"),this.showLinks=n?n.showLinks!==!1:!0,this.emptyBlockMenu=n&&n.emptyBlockMenu,this.update=new u.MenuUpdate(t,"change selectionChange blur",function(){return a.prepareUpdate()}),this.tooltip=new p.Tooltip(t,"above"),this.menu=new d.Menu(t,new d.TooltipDisplay(this.tooltip,function(){return a.update.force()}))}return s(e,[{key:"detach",value:function(){this.update.detach(),this.tooltip.detach()}},{key:"prepareUpdate",value:function(){var e=this;if(this.menu.active)return null;var t=this.pm.selection,n=t.empty,o=t.node,s=t.head,i=void 0;if(!this.pm.hasFocus())return function(){return e.tooltip.close()};if(o&&o.isBlock){var c=function(){var t=r(e.pm);return{v:function(){return e.menu.show(e.blockItems,t)}}}();if("object"==typeof c)return c.v}else if(n)if(this.emptyBlockMenu&&0==this.pm.doc.path(s.path).length){var l=function(){var t=e.pm.coordsAtPos(s);return{v:function(){return e.menu.show(e.blockItems,t)}}}();if("object"==typeof l)return l.v}else{if(!this.showLinks||!(i=this.linkUnderCursor()))return function(){return e.tooltip.close()};var u=function(){var t=e.pm.coordsAtPos(s);return{v:function(){return e.showLink(i,t)}}}();if("object"==typeof u)return u.v}else{var p=function(){var t=o?r(e.pm):a();return{v:function(){return e.menu.show(e.inlineItems,t)}}}();if("object"==typeof p)return p.v}}},{key:"linkUnderCursor",value:function(){var e=this.pm.selection.head;if(!e)return null;var t=c.spanStylesAt(this.pm.doc,e);return t.reduce(function(e,t){return e||"link"==t.type.name&&t},null)}},{key:"showLink",value:function(e,t){var n=l.elt("div",{"class":m+"-linktext"},l.elt("a",{href:e.attrs.href,title:e.attrs.title},e.attrs.href));this.tooltip.open(n,t)}}]),e}();l.insertCSS("\n\n.ProseMirror-tooltipmenu-linktext a {\n  color: white;\n  text-decoration: none;\n  padding: 0 5px;\n}\n\n.ProseMirror-tooltipmenu-linktext a:hover {\n  text-decoration: underline;\n}\n\n")}),require.register("prosemirror/menu/update",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=200,s=200,i=function(){function e(t,n,a){var r=this;o(this,e),this.pm=t,this.prepare=a,this.mustUpdate=!1,this.updateInfo=null,this.timeout=null,this.lastFlush=0,this.events=n.split(" "),this.onEvent=this.onEvent.bind(this),this.force=this.force.bind(this),this.events.forEach(function(e){return t.on(e,r.onEvent)}),t.on("flush",this.onFlush=this.onFlush.bind(this)),t.on("flushed",this.onFlushed=this.onFlushed.bind(this))}return a(e,[{key:"detach",value:function(){var e=this;clearTimeout(this.timeout),this.events.forEach(function(t){return e.pm.off(t,e.onEvent)}),this.pm.off("flush",this.onFlush),this.pm.off("flushed",this.onFlushed)}},{key:"onFlush",value:function(){var e=Date.now();this.mustUpdate&&e-this.lastFlush>=r&&(this.lastFlush=e,clearTimeout(this.timeout),this.mustUpdate=!1,this.update=this.prepare())}},{key:"onFlushed",value:function(){this.update&&(this.update(),this.update=null)}},{key:"onEvent",value:function(){this.mustUpdate=!0,clearTimeout(this.timeout),this.timeout=setTimeout(this.force,s)}},{key:"force",value:function(){this.mustUpdate=!1,this.updateInfo=null,this.lastFlush=Date.now(),clearTimeout(this.timeout);var e=this.prepare();e&&e()}}]),e}();e.MenuUpdate=i}),require.register("prosemirror/model/defaultschema",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var a=e,r=t,s=n;o=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,r);if(void 0!==i){if("value"in i)return i.value;var c=i.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return void 0;e=l,t=r,n=s,o=!0,i=l=void 0}},i=t("./schema"),c=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"kind",get:function(){return"."}}]),t}(i.Block);e.Doc=c;var l=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),t}(i.Block);e.BlockQuote=l;var u=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"contains",get:function(){return"list_item"}}]),t}(i.Block);e.OrderedList=u,u.attributes={order:new i.Attribute({"default":"1"})};var p=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"contains",get:function(){return"list_item"}}]),t}(i.Block);e.BulletList=p;var d=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"kind",get:function(){return"."}}]),t}(i.Block);e.ListItem=d;var m=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"contains",get:function(){return null}}]),t}(i.Block);e.HorizontalRule=m;var f=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),t}(i.Textblock);e.Heading=f,f.attributes={level:new i.Attribute({"default":"1"})};var h=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,[{key:"containsStyles",get:function(){return!1}},{key:"isCode",get:function(){return!0}}],[{key:"contains",get:function(){return"text"}}]),t}(i.Textblock);e.CodeBlock=h;var g=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,[{key:"defaultTextblock",get:function(){return!0}}]),t}(i.Textblock);e.Paragraph=g;var v=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),t}(i.Inline);e.Image=v,v.attributes={src:new i.Attribute,alt:new i.Attribute({"default":""}),title:new i.Attribute({"default":""})};var y=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,[{key:"selectable",get:function(){return!1}}]),t}(i.Inline);e.HardBreak=y;var b=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"rank",get:function(){return 51}}]),t}(i.StyleType);e.EmStyle=b;var k=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"rank",get:function(){return 52}}]),t}(i.StyleType);e.StrongStyle=k;var S=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,null,[{key:"rank",get:function(){return 53}}]),t}(i.StyleType);e.LinkStyle=S,S.attributes={href:new i.Attribute,title:new i.Attribute({"default":""})};var w=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),r(t,[{key:"isCode",get:function(){return!0}}],[{key:"rank",get:function(){return 101}}]),t}(i.StyleType);e.CodeStyle=w;var x=new i.SchemaSpec({doc:c,blockquote:l,ordered_list:u,bullet_list:p,list_item:d,horizontal_rule:m,paragraph:g,heading:f,code_block:h,text:i.Text,image:v,hard_break:y},{em:b,strong:k,link:S,code:w}),E=new i.Schema(x);e.defaultSchema=E}),require.register("prosemirror/model/diff",function(e,t,n){"use strict";function o(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],a=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=0,c=0;;c++){if(c==e.length||c==t.length){if(e.length==t.length)return null;break}var l=e.child(c),u=t.child(c);if(l!=u){if(!l.sameMarkup(u))break;if(e.isTextblock){if(!s.sameStyles(l.styles,u.styles))break;if(l.isText&&l.text!=u.text){for(var p=0;l.text[p]==u.text[p];p++)i++;break}i+=l.offset}else{var d=o(l,u,n.concat(c),a.concat(c));if(d)return d;i++}}else i+=e.isTextblock?l.offset:1}return{a:new r.Pos(n,i),b:new r.Pos(a,i)}}function a(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],o=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=e.length,c=t.length,l=0;;i--,c--){if(0==i||0==c){if(i==c)return null;break}var u=e.child(i-1),p=t.child(c-1);if(u!=p){if(!u.sameMarkup(p))break;if(e.isTextblock){if(!s.sameStyles(u.styles,p.styles))break;if(u.isText&&u.text!=p.text){for(var d=0,m=Math.min(u.text.length,p.text.length);m>d&&u.text[u.text.length-d-1]==p.text[p.text.length-d-1];)d++,l++;break}l+=u.offset}else{var f=a(u,p,n.concat(i-1),o.concat(c-1));if(f)return f;l++}}else l+=e.isTextblock?u.offset:1}return{a:new r.Pos(n,e.maxOffset-l),b:new r.Pos(o,t.maxOffset-l)}}Object.defineProperty(e,"__esModule",{value:!0}),e.findDiffStart=o,e.findDiffEnd=a;var r=t("./pos"),s=t("./style")}),require.register("prosemirror/model/index",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("./node");Object.defineProperty(e,"compareMarkup",{enumerable:!0,get:function(){return o.compareMarkup}});var a=t("./style");Object.defineProperty(e,"removeStyle",{enumerable:!0,get:function(){return a.removeStyle}}),Object.defineProperty(e,"sameStyles",{enumerable:!0,get:function(){return a.sameStyles}}),Object.defineProperty(e,"containsStyle",{enumerable:!0,get:function(){return a.containsStyle}}),Object.defineProperty(e,"spanStylesAt",{enumerable:!0,get:function(){return a.spanStylesAt}}),Object.defineProperty(e,"rangeHasStyle",{enumerable:!0,get:function(){return a.rangeHasStyle}});var r=t("./schema");Object.defineProperty(e,"SchemaSpec",{enumerable:!0,get:function(){return r.SchemaSpec}}),Object.defineProperty(e,"Schema",{enumerable:!0,get:function(){return r.Schema}}),Object.defineProperty(e,"SchemaError",{enumerable:!0,get:function(){return r.SchemaError}}),Object.defineProperty(e,"NodeType",{enumerable:!0,get:function(){return r.NodeType}}),Object.defineProperty(e,"Block",{enumerable:!0,get:function(){return r.Block}}),Object.defineProperty(e,"Textblock",{enumerable:!0,get:function(){return r.Textblock}}),Object.defineProperty(e,"Inline",{enumerable:!0,get:function(){return r.Inline}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return r.Text}}),Object.defineProperty(e,"StyleType",{enumerable:!0,get:function(){return r.StyleType}}),Object.defineProperty(e,"Attribute",{enumerable:!0,get:function(){return r.Attribute}});var s=t("./defaultschema");Object.defineProperty(e,"defaultSchema",{enumerable:!0,get:function(){return s.defaultSchema}}),Object.defineProperty(e,"Doc",{enumerable:!0,get:function(){return s.Doc}}),Object.defineProperty(e,"BlockQuote",{enumerable:!0,get:function(){return s.BlockQuote}}),Object.defineProperty(e,"OrderedList",{enumerable:!0,get:function(){return s.OrderedList}}),Object.defineProperty(e,"BulletList",{enumerable:!0,get:function(){return s.BulletList}}),Object.defineProperty(e,"ListItem",{enumerable:!0,get:function(){return s.ListItem}}),Object.defineProperty(e,"HorizontalRule",{enumerable:!0,get:function(){return s.HorizontalRule}}),Object.defineProperty(e,"Paragraph",{enumerable:!0,get:function(){return s.Paragraph}}),Object.defineProperty(e,"Heading",{enumerable:!0,get:function(){return s.Heading}}),Object.defineProperty(e,"CodeBlock",{enumerable:!0,get:function(){return s.CodeBlock}}),Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return s.Image}}),Object.defineProperty(e,"HardBreak",{enumerable:!0,get:function(){return s.HardBreak}}),Object.defineProperty(e,"CodeStyle",{enumerable:!0,get:function(){return s.CodeStyle}}),Object.defineProperty(e,"EmStyle",{enumerable:!0,get:function(){return s.EmStyle}}),Object.defineProperty(e,"StrongStyle",{enumerable:!0,get:function(){return s.StrongStyle}}),Object.defineProperty(e,"LinkStyle",{enumerable:!0,get:function(){return s.LinkStyle}});var i=t("./pos");Object.defineProperty(e,"Pos",{enumerable:!0,get:function(){return i.Pos}});var c=t("./slice");Object.defineProperty(e,"sliceBefore",{enumerable:!0,get:function(){return c.sliceBefore}}),Object.defineProperty(e,"sliceAfter",{enumerable:!0,get:function(){return c.sliceAfter}}),Object.defineProperty(e,"sliceBetween",{enumerable:!0,get:function(){return c.sliceBetween}}),Object.defineProperty(e,"childrenBefore",{enumerable:!0,get:function(){return c.childrenBefore}}),Object.defineProperty(e,"childrenAfter",{enumerable:!0,get:function(){return c.childrenAfter}}),Object.defineProperty(e,"childrenBetween",{enumerable:!0,get:function(){return c.childrenBetween}}),Object.defineProperty(e,"siblingRange",{enumerable:!0,get:function(){return c.siblingRange}});var l=t("./diff");Object.defineProperty(e,"findDiffStart",{enumerable:!0,get:function(){return l.findDiffStart}}),Object.defineProperty(e,"findDiffEnd",{enumerable:!0,get:function(){return l.findDiffEnd}})}),require.register("prosemirror/model/node",function(e,t,n){"use strict";function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){if(e)for(var t in e)return!1;return!0}function s(e,t,n,o){if(e!=t)return!1;if(r(n))return r(o);if(r(o))return!1;for(var a in n)if(o[a]!==n[a])return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0});var i=function(e,t,n){for(var o=!0;o;){var a=e,r=t,s=n;o=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,r);if(void 0!==i){if("value"in i)return i.value;var c=i.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return void 0;e=l,t=r,n=s,o=!0,i=l=void 0}},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.compareMarkup=s;var l=t("./style"),u=[],p=function(){function e(t,n){a(this,e),this.type=t,this.attrs=n}return c(e,[{key:"sameMarkup",value:function(e){return s(this.type,e.type,this.attrs,e.attrs)}},{key:"child",value:function(e){throw new Error("Trying to index non-block node "+this)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs)return e.attrs=this.attrs,e;return e}},{key:"length",get:function(){return 0}},{key:"isBlock",get:function(){return!1}},{key:"isTextblock",get:function(){return!1}},{key:"isInline",get:function(){return!1}},{key:"isText",get:function(){return!1}}]),e}();e.Node=p;var d=function(e){function t(e,n,o,r){if(a(this,t),r)throw new Error("Constructing a block node with styles");i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.content=o||u}return o(t,e),c(t,[{key:"toString",value:function(){return this.type.name+"("+this.content.join(", ")+")"}},{key:"copy",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return new this.constructor(this.type,this.attrs,e)}},{key:"slice",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.length:arguments[1];return this.content.slice(e,t)}},{key:"splice",value:function(e,t,n){return new this.constructor(this.type,this.attrs,this.content.slice(0,e).concat(n).concat(this.content.slice(t)))}},{key:"replace",value:function(e,t){var n=this.content.slice();return n[e]=t,this.copy(n)}},{key:"replaceDeep",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(n==e.length)return t;var o=e[n];return this.replace(o,this.child(o).replaceDeep(e,t,n+1))}},{key:"append",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(!e.length)return this;if(!this.length)return this.copy(e);var o=this.length-1,a=this.content.slice(0,o),r=this.content[o],s=e[0];t>0&&n>0&&r.sameMarkup(s)?a.push(r.append(s.content,t-1,n-1)):a.push(r.close(t-1,"end"),s.close(n-1,"start"));for(var i=1;i<e.length;i++)a.push(e[i]);return this.copy(a)}},{key:"close",value:function(e,t){if(0==e&&0==this.length&&!this.type.canBeEmpty)return this.copy(this.type.defaultContent());if(0>e)return this;var n="start"==t?0:this.maxOffset-1,o=this.child(n),a=o.close(e-1,t);return a==o?this:this.replace(n,a)}},{key:"child",value:function(e){if(0>e||e>=this.length)throw new Error("Index "+e+" out of range in "+this);return this.content[e]}},{key:"path",value:function(e){for(var t=0,n=this;t<e.length;n=n.content[e[t]],t++);return n}},{key:"isValidPos",value:function(e,t){for(var n=0,o=this;;n++){if(n==e.path.length)return t&&!o.isTextblock?!1:e.offset<=o.maxOffset;var a=e.path[n];if(a>=o.length||o.isTextblock)return!1;o=o.child(a)}}},{key:"pathNodes",value:function(e){for(var t=[],n=0,o=this;t.push(o),n!=e.length;n++)o=o.child(e[n]);return t}},{key:"toJSON",value:function(){var e=i(Object.getPrototypeOf(t.prototype),"toJSON",this).call(this);return e.content=this.content.map(function(e){return e.toJSON()}),e}},{key:"nodesBetween",value:function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],a=arguments.length<=4||void 0===arguments[4]?null:arguments[4];if(n(this,o,e,t,a)!==!1){var r=void 0,s=t&&t.depth>o.length,i=s?t.path[o.length]:t?t.offset:this.length;if(e)if(e.depth==o.length)r=e.offset;else{r=e.path[o.length]+1;var c=null;s&&i==r-1&&(c=t,s=!1),this.enterNode(r-1,e,c,o,n)}else r=0;for(var l=r;i>l;l++)this.enterNode(l,null,null,o,n);s&&this.enterNode(i,null,t,o,n)}}},{key:"enterNode",value:function(e,t,n,o,a){o.push(e),this.child(e).nodesBetween(t,n,a,o,this),o.pop()}},{key:"inlineNodesBetween",value:function(e,t,n){this.nodesBetween(e,t,function(e,t,o,a,r,s){e.isInline&&n(e,o?o.offset:s,a?a.offset:s+e.offset,t,r)})}},{key:"maxOffset",get:function(){return this.length}},{key:"textContent",get:function(){for(var e="",t=0;t<this.length;t++)e+=this.child(t).textContent;return e}},{key:"firstChild",get:function(){return this.content[0]||null}},{key:"lastChild",get:function(){return this.content[this.length-1]||null}},{key:"length",get:function(){return this.content.length}},{key:"children",get:function(){return this.content}},{key:"isBlock",get:function(){return!0}}]),t}(p);e.BlockNode=d;var m=function(e){function t(e,n,o){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,o);for(var r=0,s=0;s<this.content.length;s++)r+=this.content[s].offset;this._maxOffset=r}return o(t,e),c(t,[{key:"slice",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.maxOffset:arguments[1],n=[];if(e==t)return n;for(var o=0,a=0;;o++){var r=this.child(o),s=r.offset,i=a+s;if(a+s>e&&n.push(a>=e&&t>=i?r:r.slice(Math.max(0,e-a),Math.min(s,t-a))),i>=t)return n;a=i}}},{key:"append",value:function(e){if(!e.length)return this;
if(!this.length)return this.copy(e);var t=this.content.concat(e),n=this.length-1,o=void 0;return(o=t[n].maybeMerge(t[n+1]))&&t.splice(n,2,o),this.copy(t)}},{key:"close",value:function(){return this}},{key:"nodesBetween",value:function(e,t,n,o,a){if(n(this,o,e,t,a)!==!1){var r=e?e.offset:0,s=t?t.offset:this.maxOffset;if(r!=s)for(var i=0,c=0;c<this.length;c++){var l=this.child(c),u=i+l.offset;if(u>=r&&n(l,o,r>i?e:null,u>s?t:null,this,i),u>=s)break;i=u}}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,innerOffset:0};for(var t=0;t<this.length;t++){var n=this.child(t);if(e-=n.offset,0>=e)return{node:n,index:t,innerOffset:e+n.offset}}}},{key:"childAfter",value:function(e){for(var t=0;t<this.length;t++){var n=this.child(t),o=n.offset;if(o>e)return{node:n,index:t,innerOffset:e};e-=o}return{node:null,index:0,innerOffset:0}}},{key:"isTextblock",get:function(){return!0}},{key:"maxOffset",get:function(){return this._maxOffset}}]),t}(d);e.TextblockNode=m;var f=function(e){function t(e,n,o,r){if(a(this,t),o)throw new Error("Can't create a span node with content");i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.styles=r||u}return o(t,e),c(t,[{key:"styled",value:function(e){return new this.constructor(this.type,this.attrs,this.text,e)}},{key:"maybeMerge",value:function(e){return null}},{key:"toJSON",value:function(){var e=i(Object.getPrototypeOf(t.prototype),"toJSON",this).call(this);return this.styles.length&&(e.styles=this.styles.map(function(e){return e.toJSON()})),e}},{key:"toString",value:function(){return this.type.name}},{key:"offset",get:function(){return 1}},{key:"textContent",get:function(){return""}},{key:"isInline",get:function(){return!0}}]),t}(p);e.InlineNode=f;var h=function(e){function t(e,n,o,r){if(a(this,t),"string"!=typeof o||!o)throw new Error("Text node content must be a non-empty string");i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,null,r),this.text=o}return o(t,e),c(t,[{key:"maybeMerge",value:function(e){return e.type==this.type&&l.sameStyles(this.styles,e.styles)?new t(this.type,this.attrs,this.text+e.text,this.styles):void 0}},{key:"slice",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?this.offset:arguments[1];return new t(this.type,this.attrs,this.text.slice(e,n),this.styles)}},{key:"toString",value:function(){for(var e=JSON.stringify(this.text),t=0;t<this.styles.length;t++)e=this.styles[t].type.name+"("+e+")";return e}},{key:"toJSON",value:function(){var e=i(Object.getPrototypeOf(t.prototype),"toJSON",this).call(this);return e.text=this.text,e}},{key:"offset",get:function(){return this.text.length}},{key:"textContent",get:function(){return this.text}},{key:"isText",get:function(){return!0}}]),t}(f);e.TextNode=h}),require.register("prosemirror/model/pos",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t,n){o(this,e),this.path=t,this.offset=n}return a(e,[{key:"toString",value:function(){return this.path.join("/")+":"+this.offset}},{key:"cmp",value:function(t){return t==this?0:e.cmp(this.path,this.offset,t.path,t.offset)}},{key:"shorten",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return t>=this.depth?this:e.shorten(this.path,t,n)}},{key:"move",value:function(t){return new e(this.path,this.offset+t)}},{key:"toPath",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.path.concat(this.offset+e)}},{key:"extend",value:function(t){for(var n=this.path.slice(),o=this.offset,a=0;a<t.path.length;a++)n.push(t.path[a]+o),o=0;return new e(n,t.offset+o)}},{key:"toJSON",value:function(){return this}},{key:"depth",get:function(){return this.path.length}}],[{key:"cmp",value:function(e,t,n,o){for(var a=e.length,r=n.length,s=0,i=Math.min(a,r);i>s;s++){var c=e[s]-n[s];if(0!=c)return c}return a>r?o<=e[s]?1:-1:r>a?t<=n[s]?-1:1:t-o}},{key:"samePath",value:function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"shorten",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return null==n&&(n=t.length-1),new e(t.slice(0,n),t[n]+o)}},{key:"from",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(!t.length)throw new Error("Can't create a pos from an empty array");return new e(t.slice(0,t.length-1),t[t.length-1]+n)}},{key:"fromJSON",value:function(t){return new e(t.path,t.offset)}}]),e}();e.Pos=r}),require.register("prosemirror/model/schema",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t,n,o){function a(e,t){if(e in n.kinds){if(n.kinds[e]==t)return;v.raise("Inconsistent superkinds for kind "+e+": "+t+" and "+n.kinds[e])}n.subKind(e,t)&&v.raise("Conflicting kind hierarchy through "+e+" and "+t),n.kinds[e]=t}for(var r=e;;r=Object.getPrototypeOf(r)){var s=null!=o&&r==e?o:r.kind;if(null!=s){var i=/^(.*?)(\.)?$/.exec(s),c=p(i,3),l=(c[0],c[1]),u=c[2];if(l&&(a(t,l),t=l),u)return void a(t,null)}}}function s(e,t){var n=Object.create(null);for(var o in e)n[o]=t?t(e[o]):e[o];return n}function i(e){return e instanceof Function?{type:e}:e}function c(e,t){var n=s(e);for(var o in t){var a=i(t[o]);if(null==a)delete n[o];else if(a.type)n[o]=a;else{var r=n[o]=s(n[o]);for(var c in a)r[c]=a[c]}}return n}function l(e){var t=Object.create(null);for(var n in e){var o=e[n];if(null==o["default"])return null;t[n]=o["default"]}return t}function u(e,t,n,o){var a=Object.create(null);for(var r in e){var s=t&&t[r];if(null==s){var i=e[r];null!=i["default"]?s=i["default"]:i.compute?s=i.compute(n,o):v.raise("No value supplied for attribute "+r)}a[r]=s}return a}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function e(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(c){a=!0,r=c}finally{try{!o&&i["return"]&&i["return"]()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=function(e,t,n){for(var o=!0;o;){var a=e,r=t,s=n;o=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,r);if(void 0!==i){if("value"in i)return i.value;var c=i.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return void 0;e=l,t=r,n=s,o=!0,i=l=void 0}},f=t("./node"),h=t("./style"),g=t("../util/error"),v=function(e){function t(){o(this,t),m(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),t}(g.ProseMirrorError);e.SchemaError=v;var y=function(){function e(t,n,a,r){o(this,e),this.name=t,this.contains=n,this.attrs=a,this.schema=r,this.defaultAttrs=null}return d(e,[{key:"canContain",value:function(e){return this.canContainType(e.type)}},{key:"canContainType",value:function(e){return this.schema.subKind(e.name,this.contains)}},{key:"canContainChildren",value:function(e,t){if(!t&&!this.schema.subKind(e.type.contains,this.contains))return!1;for(var n=0;n<e.length;n++)if(!this.canContain(e.child(n)))return!1;return!0}},{key:"findConnection",value:function(e){if(this.canContainType(e))return[];for(var t=Object.create(null),n=[{from:this,via:[]}];n.length;){var o=n.shift();for(var a in this.schema.nodes){var r=this.schema.nodeType(a);if(!(r.contains in t)&&o.from.canContainType(r)){var s=o.via.concat(r);if(r.canContainType(e))return s;n.push({from:r,via:s}),t[r.contains]=!0}}}}},{key:"buildAttrs",value:function(e,t){return!e&&this.defaultAttrs?this.defaultAttrs:u(this.attrs,e,this,t)}},{key:"create",value:function(e,t,n){return new this.instance(this,this.buildAttrs(e,t),t,n)}},{key:"createAutoFill",value:function(e,t,n){return t&&0!=t.length||this.canBeEmpty||(t=this.defaultContent()),this.create(e,t,n)}},{key:"locked",get:function(){return!1}},{key:"isTextblock",get:function(){return!1}},{key:"selectable",get:function(){return!0}},{key:"canBeEmpty",get:function(){return!0}}],[{key:"compile",value:function(e,t){var n=Object.create(null);for(var o in e){var a=e[o],s=a.type||v.raise("Missing node type for "+o);r(s,o,t,a.kind);var i="contains"in a?a.contains:s.contains;n[o]=new s(o,i,a.attributes||s.attributes,t)}for(var c in n){var i=n[c].contains;!i||i in t.kinds||v.raise("Node type "+c+" is specified to contain non-existing kind "+i)}n.doc||v.raise("Every schema needs a 'doc' type"),n.text||v.raise("Every schema needs a 'text' type");for(var u in e)e[u].defaultAttrs=l(e[u].attrs);return n}},{key:"register",value:function(e,t){(this.prototype[e]||(this.prototype[e]=[])).push(t)}},{key:"kind",get:function(){return"."}}]),e}();e.NodeType=y,y.attributes={};var b=function(e){function t(){o(this,t),m(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),d(t,[{key:"defaultContent",value:function(){var e=this.schema.defaultTextblockType().create(),t=this.findConnection(e.type);t||v.raise("Can't create default content for "+this.name);for(var n=t.length-1;n>=0;n--)e=t[n].create(null,[e]);return[e]}},{key:"instance",get:function(){return f.BlockNode}},{key:"isBlock",get:function(){return!0}},{key:"canBeEmpty",get:function(){return null==this.contains}}],[{key:"contains",get:function(){return"block"}},{key:"kind",get:function(){return"block."}}]),t}(y);e.Block=b;var k=function(e){function t(){o(this,t),m(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),d(t,[{key:"canContain",value:function(e){var n=this;return m(Object.getPrototypeOf(t.prototype),"canContain",this).call(this,e)&&e.styles.every(function(e){return n.canContainStyle(e)})}},{key:"canContainStyle",value:function(e){var t=this.containsStyles;if(t===!0)return!0;if(t)for(var n=0;n<t.length;n++)if(t[n]==e.name)return!0;return!1}},{key:"instance",get:function(){return f.TextblockNode}},{key:"containsStyles",get:function(){return!0}},{key:"isTextblock",get:function(){return!0}},{key:"canBeEmpty",get:function(){return!0}}],[{key:"contains",get:function(){return"inline"}}]),t}(b);e.Textblock=k;var S=function(e){function t(){o(this,t),m(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),d(t,[{key:"instance",get:function(){return f.InlineNode}}],[{key:"contains",get:function(){return null}},{key:"kind",get:function(){return"inline."}}]),t}(y);e.Inline=S;var w=function(e){function t(){o(this,t),m(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),d(t,[{key:"instance",get:function(){return f.TextNode}},{key:"selectable",get:function(){return!1}}]),t}(S);e.Text=w;var x=function C(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,C),this["default"]=e["default"],this.compute=e.compute};e.Attribute=x;var E=function(){function e(t,n,a,r){o(this,e),this.name=t,this.attrs=n,this.rank=a,this.schema=r;var s=l(this.attrs);this.instance=s&&new h.StyleMarker(this,s)}return d(e,[{key:"create",value:function(e){return!e&&this.instance?this.instance:new h.StyleMarker(this,u(this.attrs,e,this))}}],[{key:"getOrder",value:function(e){var t=[];for(var n in e)t.push({name:n,rank:e[n].type.rank});t.sort(function(e,t){return e.rank-t.rank});for(var o=Object.create(null),a=0;a<t.length;a++)o[t[a].name]=a;return o}},{key:"compile",value:function(e,t){var n=this.getOrder(e),o=Object.create(null);for(var a in e){var r=e[a],s=r.attributes||r.type.attributes;o[a]=new r.type(a,s,n[a],t)}return o}},{key:"register",value:function(e,t){(this.prototype[e]||(this.prototype[e]=[])).push(t)}},{key:"rank",get:function(){return 50}}]),e}();e.StyleType=E,E.attributes={};var _=function(){function e(t,n){o(this,e),this.nodes=t?s(t,i):Object.create(null),this.styles=n?s(n,i):Object.create(null)}return d(e,[{key:"updateNodes",value:function(t){return new e(c(this.nodes,t),this.styles)}},{key:"addAttribute",value:function(t,n,o){var a=s(this.nodes);for(var r in a)if("string"==typeof t?t==r:"function"==typeof t?t(r,a[r]):t?t==a[r]:!0){var i=a[r]=s(a[r]);i.attributes||(i.attributes=s(i.type.attributes)),i.attributes[n]=o}return new e(a,this.styles)}},{key:"updateStyles",value:function(t){return new e(this.nodes,c(this.styles,t))}}]),e}();e.SchemaSpec=_;var M=function(){function e(t,n){o(this,e),t instanceof _||(t=new _(t,n)),this.spec=t,this.kinds=Object.create(null),this.nodes=y.compile(t.nodes,this),this.styles=E.compile(t.styles,this),this.cached=Object.create(null),this.node=this.node.bind(this),this.text=this.text.bind(this),this.nodeFromJSON=this.nodeFromJSON.bind(this),this.styleFromJSON=this.styleFromJSON.bind(this)}return d(e,[{key:"node",value:function(e,t,n,o){return"string"==typeof e?e=this.nodeType(e):e instanceof y?e.schema!=this&&v.raise("Node type from different schema used ("+e.name+")"):v.raise("Invalid node type: "+e),e.create(t,n,o)}},{key:"text",value:function(e,t){return this.nodes.text.create(null,e,t)}},{key:"defaultTextblockType",value:function(){var e=this.cached.defaultTextblockType;if(void 0!==e)return e;for(var t in this.nodes)if(this.nodes[t].defaultTextblock)return this.cached.defaultTextblockType=this.nodes[t];return this.cached.defaultTextblockType=null}},{key:"style",value:function(e,t){var n=this.styles[e]||v.raise("No style named "+e);return n.create(t)}},{key:"nodeFromJSON",value:function(e){var t=this.nodeType(e.type);return t.create(e.attrs,e.text||e.content&&e.content.map(this.nodeFromJSON),e.styles&&e.styles.map(this.styleFromJSON))}},{key:"styleFromJSON",value:function(e){return"string"==typeof e?this.style(e):this.style(e._,e)}},{key:"nodeType",value:function(e){return this.nodes[e]||v.raise("Unknown node type: "+e)}},{key:"subKind",value:function(e,t){for(;;){if(e==t)return!0;if(e=this.kinds[e],!e)return!1}}}]),e}();e.Schema=M}),require.register("prosemirror/model/slice",function(e,t,n){"use strict";function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(n==t.depth)return e.slice(0,t.offset);var o=t.path[n];return e.slice(0,o).concat(a(e.child(o),t,n+1))}function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return e.copy(o(e,t,n))}function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(n==t.depth)return e.slice(t.offset);var o=t.path[n],a=e.slice(o+1);return a.unshift(s(e.child(o),t,n+1)),a}function s(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return e.copy(r(e,t,n))}function i(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?0:arguments[3],r=o==t.depth,i=o==n.depth;if(r&&i)return e.slice(t.offset,n.offset);if(!r&&!i&&t.path[o]==n.path[o])return[c(e.child(t.path[o]),t,n,!1,o+1)];var l=[],u=void 0;r?u=t.offset:(u=t.path[o]+1,l.push(s(e.child(u-1),t,o+1)));for(var p=i?n.offset:n.path[o],d=e.slice(u,p),m=0;m<d.length;m++)l.push(d[m]);return i||l.push(a(e.child(p),n,o+1)),l}function c(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],a=arguments.length<=4||void 0===arguments[4]?0:arguments[4];if(a<t.depth&&a<n.depth&&t.path[a]==n.path[a]){var r=c(e.child(t.path[a]),t,n,o,a+1);if(!o)return e.copy([r]);if("doc"!=e.type.name)return r;for(var s=e.type.findConnection(r.type),l=s.length-1;l>=0;l--)r=e.type.schema.node(s[l],null,[r]);return e.copy([r])}return e.copy(i(e,t,n,a))}function l(e,t,n){for(var o=0,a=e;;o++){if(a.isTextblock){var r=t.path.slice(0,o-1),s=t.path[o-1];return{from:new u.Pos(r,s),to:new u.Pos(r,s+1)}}var i=o==t.path.length,c=o==n.path.length,l=i?t.offset:t.path[o],p=c?n.offset:n.path[o];if(i||c||l!=p){var r=t.path.slice(0,o);return{from:new u.Pos(r,l),to:new u.Pos(r,p+(c?0:1))}}a=a.child(l)}}Object.defineProperty(e,"__esModule",{value:!0}),e.childrenBefore=o,e.sliceBefore=a,e.childrenAfter=r,e.sliceAfter=s,e.childrenBetween=i,e.sliceBetween=c,e.siblingRange=l;var u=t("./pos")}),require.register("prosemirror/model/style",function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<e.length;n++)if(e[n].type==t)return[].concat(o(e.slice(0,n)),o(e.slice(n+1)));return e}function s(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}function i(e,t){for(var n=0;n<e.length;n++)if(e[n].type==t)return e[n];return!1}function c(e,t){var n=e.path(t.path);if(!n.isTextblock)return d;var o=n.childBefore(t.offset).node||n.firstChild;return o?o.styles:d}function l(e,t,n,o){var a=!1;return e.inlineNodesBetween(t,n,function(e){i(e.styles,o)&&(a=!0)}),a}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.removeStyle=r,e.sameStyles=s,e.containsStyle=i,e.spanStylesAt=c,e.rangeHasStyle=l;var p=function(){function e(t,n){a(this,e),this.type=t,this.attrs=n}return u(e,[{key:"toJSON",value:function(){if(this.type.instance)return this.type.name;var e={_:this.type.name};for(var t in this.attrs)e[t]=this.attrs[t];return e}},{key:"addToSet",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.type==this.type)return this.eq(n)?e:[].concat(o(e.slice(0,t)),[this],o(e.slice(t+1)));if(n.type.rank>this.type.rank)return[].concat(o(e.slice(0,t)),[this],o(e.slice(t)))}return e.concat(this)}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return[].concat(o(e.slice(0,t)),o(e.slice(t+1)));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){if(this.type!=e.type)return!1;for(var t in this.attrs)if(e.attrs[t]!=this.attrs[t])return!1;return!0}}]),e}();e.StyleMarker=p;var d=[]}),require.register("prosemirror/parse/dom",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){n||(n={});var o=new f(e,n.topNode||e.node("doc")),a=n.from?t.childNodes[n.from]:t.firstChild,r=null!=n.to&&t.childNodes[n.to]||null;o.addAll(a,r,!0);for(var s=void 0;o.stack.length;)s=o.leave();return s}function r(e,t,n){var o=(n&&n.document||window.document).createElement("div");return o.innerHTML=t,a(e,o,n)}function s(e){return e.cached.parseDOMNodes||(e.cached.parseDOMNodes=i(e))}function i(e){function t(e){var t=e.parseDOM;t&&t.forEach(function(t){var o=t.tag||"_";(n[o]||(n[o]=[])).push({type:e,rank:null==t.rank?50:t.rank,parse:t.parse})})}var n=Object.create(null);n._=[];for(var o in e.nodes)t(e.nodes[o]);for(var a in e.styles)t(e.styles[a]);for(var r in n)n[r].sort(function(e,t){return e.rank-t.rank});return n}function c(e,t,n,o){t.enterFrom(e,n,o),t.addAll(e.firstChild,null,!0),t.leave()}function l(e,t,n){var o=t.styles;t.styles=(n.instance||n).addToSet(o),t.addAll(e.firstChild,null),t.styles=o}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.fromDOM=a,e.fromHTML=r;var p=t("../model"),d=t("./index");d.defineSource("dom",a),d.defineSource("html",r);var m={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},f=function(){function e(t,n){o(this,e),this.schema=t,this.stack=[],this.styles=[],this.closing=!1,this.enter(n.type,n.attrs),this.nodeInfo=s(t)}return u(e,[{key:"parseAttrs",value:function(e,t,n){for(var o in t.attrs){var a=t.attrs[o];if(a.parseDOM&&(!n||!Object.prototype.hasOwnProperty.call(n,o))){var r=a.parseDOM(e,this.options,a,t);null!=r&&(n||(n={}),n[o]=r)}}return n}},{key:"addDOM",value:function(e){if(3==e.nodeType){var t=e.nodeValue,n=this.top,o=void 0;(/\S/.test(t)||n.type.isTextblock)&&(t=t.replace(/\s+/g," "),/^\s/.test(t)&&(o=n.content[n.content.length-1])&&"text"==o.type.name&&/\s$/.test(o.text)&&(t=t.slice(1)),t&&this.insert(this.schema.text(t,this.styles)))}else if(1!=e.nodeType);else if(!this.parseNodeType(e)){this.addAll(e.firstChild,null);var a=e.nodeName.toLowerCase();m.hasOwnProperty(a)&&this.top.type==this.schema.defaultTextblockType()&&(this.closing=!0)}}},{key:"tryParsers",value:function(e,t){if(e)for(var n=0;n<e.length;n++){var o=e[n];if(o.parse(t,this,o.type,null,this.options)!==!1)return!0}}},{key:"parseNodeType",value:function(e){return this.tryParsers(this.nodeInfo[e.nodeName.toLowerCase()],e)||this.tryParsers(this.nodeInfo._,e)}},{key:"addAll",value:function(e,t,n){for(var o=n&&this.stack.slice(),a=e;a!=t;a=a.nextSibling)this.addDOM(a),n&&m.hasOwnProperty(a.nodeName.toLowerCase())&&this.sync(o)}},{key:"doClose",value:function(){if(this.closing&&!(this.stack.length<2)){var e=this.leave();this.enter(e.type,e.attrs),this.closing=!1}}},{key:"insert",value:function(e){if(this.top.type.canContain(e))this.doClose();else for(var t=this.stack.length-1;t>=0;t--){var n=this.stack[t].type.findConnection(e.type);if(n){if(t==this.stack.length-1)this.doClose();else for(;this.stack.length>t+1;)this.leave();for(var o=0;o<n.length;o++)this.enter(n[o]);this.styles.length&&(this.styles=[]);break}}return this.top.content.push(e),e}},{key:"insertFrom",value:function(e,t,n,o,a){return this.insert(t.createAutoFill(this.parseAttrs(e,t,n),o,a))}},{key:"enter",value:function(e,t){this.styles.length&&(this.styles=[]),this.stack.push({type:e,attrs:t,content:[]})}},{key:"enterFrom",value:function(e,t,n){this.enter(t,this.parseAttrs(e,t,n))}},{key:"leave",value:function(){var e=this.stack.pop(),t=e.type.createAutoFill(e.attrs,e.content);return this.stack.length&&this.insert(t),t}},{key:"sync",value:function(e){for(;this.stack.length>e.length;)this.leave();for(;;){var t=this.stack.length-1,n=this.stack[t],o=e[t];if(p.compareMarkup(n.type,o.type,n.attrs,o.attrs))break;this.leave()}for(;e.length>this.stack.length;){var a=e[this.stack.length];this.enter(a.type,a.attrs)}this.styles.length&&(this.styles=[]),this.closing=!1}},{key:"top",get:function(){return this.stack[this.stack.length-1]}}]),e}();p.Paragraph.register("parseDOM",{tag:"p",parse:c}),p.BlockQuote.register("parseDOM",{tag:"blockquote",parse:c});for(var h=function(e){p.Heading.register("parseDOM",{tag:"h"+e,parse:function(t,n,o){return c(t,n,o,{level:e})}})},g=1;6>=g;g++)h(g);p.HorizontalRule.register("parseDOM",{tag:"hr",parse:c}),p.CodeBlock.register("parseDOM",{tag:"pre",parse:function(e,t,n){var o=e.firstChild&&/^code$/i.test(e.firstChild.nodeName)&&e.firstChild.getAttribute("class");if(o&&/fence/.test(o)){for(var a=[],r=/(?:^|\s)lang-(\S+)/g,s=void 0;s=r.test(o);)a.push(s[1]);o=a.join(" ")}else o=null;var i=e.textContent;t.insertFrom(e,n,{params:o},i?[t.schema.text(i)]:[])}}),p.BulletList.register("parseDOM",{tag:"ul",parse:c}),p.OrderedList.register("parseDOM",{tag:"ol",parse:function(e,t,n){var o={order:e.getAttribute("start")||1};c(e,t,n,o)}}),p.ListItem.register("parseDOM",{tag:"li",parse:c}),p.HardBreak.register("parseDOM",{tag:"br",parse:function(e,t,n){e.hasAttribute("pm-force-br")||t.insertFrom(e,n,null,null,t.styles)}}),p.Image.register("parseDOM",{tag:"img",parse:function(e,t,n){t.insertFrom(e,n,{src:e.getAttribute("src"),title:e.getAttribute("title")||null,alt:e.getAttribute("alt")||null})}}),p.LinkStyle.register("parseDOM",{tag:"a",parse:function(e,t,n){var o=e.getAttribute("href");return o?void l(e,t,n.create({href:o,title:e.getAttribute("title")})):!1}}),p.EmStyle.register("parseDOM",{tag:"i",parse:l}),p.EmStyle.register("parseDOM",{tag:"em",parse:l}),p.StrongStyle.register("parseDOM",{tag:"b",parse:l}),p.StrongStyle.register("parseDOM",{tag:"strong",parse:l}),p.CodeStyle.register("parseDOM",{tag:"code",parse:l})}),require.register("prosemirror/parse/index",function(e,t,n){"use strict";function o(e,t,n,o){var a=s[n];if(!a)throw new Error("Source format "+n+" not defined");return a(e,t,o)}function a(e){return!!s[e]}function r(e,t){s[e]=t}Object.defineProperty(e,"__esModule",{value:!0}),e.convertFrom=o,e.knownSource=a,e.defineSource=r;var s=Object.create(null);r("json",function(e,t){return e.nodeFromJSON(t)})}),require.register("prosemirror/parse/markdown",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=m["default"]("commonmark").parse(t,{}),o=new g(e,n),a=void 0;o.parseTokens(n);do a=o.closeNode();while(o.stack.length);return a}function s(e){return e.cached.markdownTokens||(e.cached.markdownTokens=c(e))}function i(e,t,n){if("block"==n.type)e[n.token+"_open"]=function(e,o){var a="function"==typeof n.attrs?n.attrs(e,o):n.attrs;e.openNode(t,a)},e[n.token+"_close"]=function(e){return e.closeNode()};else if("inline"==n.type)e[n.token+"_open"]=function(e,o){var a=n.attrs instanceof Function?n.attrs(e,o):n.attrs;e.openInline(t.create(a))},e[n.token+"_close"]=function(e){return e.closeInline(t)};else{if(!n.parse)throw new Error("Unrecognized markdown parsing spec: "+n);e[n.token]=n.parse.bind(t)}}function c(e){function t(e){var t=e.parseMarkdown;t&&t.forEach(function(t){return i(n,e,t)})}var n=Object.create(null);n.text=function(e,t){return e.addText(t.content)},n.inline=function(e,t){return e.parseTokens(t.children)},n.softbreak=function(e){return e.addText("\n")};for(var o in e.nodes)t(e.nodes[o]);for(var a in e.styles)t(e.styles[a]);return n}function l(e){return"\n"==e.charAt(e.length-1)?e.slice(0,e.length-1):e}function u(e,t){e.openNode(this),e.addText(l(t.content)),e.closeNode()}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.fromMarkdown=r;var d=t("markdown-it"),m=o(d),f=t("../model"),h=t("./index");h.defineSource("markdown",r);var g=function(){function e(t,n){a(this,e),this.schema=t,this.stack=[{type:t.nodes.doc,content:[]}],this.tokens=n,this.styles=[],this.tokenTypes=s(t)}return p(e,[{key:"top",value:function(){return this.stack[this.stack.length-1]}},{key:"push",value:function(e){this.stack.length&&this.top().content.push(e)}},{key:"addText",value:function(e){var t=this.top().content,n=t[t.length-1],o=this.schema.text(e,this.styles),a=void 0;n&&(a=n.maybeMerge(o))?t[t.length-1]=a:t.push(o)}},{key:"openInline",value:function(e){this.styles=e.addToSet(this.styles)}},{key:"closeInline",value:function(e){this.styles=f.removeStyle(this.styles,e)}},{key:"parseTokens",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.tokenTypes[n.type](this,n)}}},{key:"addInline",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=e.create(n,t,this.styles);return this.push(o),o}},{key:"addNode",value:function(e,t,n){var o=e.createAutoFill(t,n);return this.push(o),o}},{key:"openNode",value:function(e,t){this.stack.push({type:e,attrs:t,content:[]})}},{key:"closeNode",value:function(){this.styles.length&&(this.styles=[]);var e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}},{key:"getAttr",value:function(e,t){if(e.attrs)for(var n=0;n<e.attrs.length;n++)if(e.attrs[n][0]==t)return e.attrs[n][1]}}]),e}();f.BlockQuote.register("parseMarkdown",{type:"block",token:"blockquote"}),f.Paragraph.register("parseMarkdown",{type:"block",token:"paragraph"}),f.ListItem.register("parseMarkdown",{type:"block",token:"list_item"}),f.BulletList.register("parseMarkdown",{type:"block",token:"bullet_list"}),f.OrderedList.register("parseMarkdown",{type:"block",token:"ordered_list",attrs:function(e,t){return{order:Number(e.getAttr(t,"order")||1)}}}),f.Heading.register("parseMarkdown",{type:"block",token:"heading",attrs:function(e,t){return{level:t.tag.slice(1)}}}),f.CodeBlock.register("parseMarkdown",{token:"code_block",parse:u}),f.CodeBlock.register("parseMarkdown",{token:"fence",parse:u}),f.HorizontalRule.register("parseMarkdown",{token:"hr",parse:function(e,t){e.addNode(this,{markup:t.markup})}}),f.Image.register("parseMarkdown",{token:"image",parse:function(e,t){e.addInline(this,null,{src:e.getAttr(t,"src"),title:e.getAttr(t,"title")||null,alt:t.children[0]&&t.children[0].content||null})}}),f.HardBreak.register("parseMarkdown",{token:"hardbreak",parse:function(e){e.addInline(this)}}),f.EmStyle.register("parseMarkdown",{type:"inline",token:"em"}),f.StrongStyle.register("parseMarkdown",{type:"inline",token:"strong"}),f.LinkStyle.register("parseMarkdown",{type:"inline",token:"link",attrs:function(e,t){return{href:e.getAttr(t,"href"),title:e.getAttr(t,"title")||null}}}),f.CodeStyle.register("parseMarkdown",{token:"code_inline",parse:function(e,t){e.openInline(this.create()),e.addText(t.content),e.closeInline(this)}})}),require.register("prosemirror/parse/text",function(e,t,n){"use strict";function o(e,t){for(var n=t.trim().split(/\n{2,}/),o=[],a=0;a<n.length;a++){for(var r=[],s=n[a].split("\n"),i=0;i<s.length;i++)i&&r.push(e.node("hard_break")),s[i]&&r.push(e.text(s[i]));o.push(e.node("paragraph",null,r))}return o.length||o.push(e.node("paragraph")),e.node("doc",null,o)}Object.defineProperty(e,"__esModule",{value:!0}),e.fromText=o;var a=t("./index");a.defineSource("text",o)}),require.register("prosemirror/serialize/dom",function(e,t,n){"use strict";function o(e,t){var n=b.createElement(e);if(t)for(var o in t)"style"==o?n.style.cssText=t[o]:t[o]&&n.setAttribute(o,t[o]);for(var a=arguments.length,r=Array(a>2?a-2:0),s=2;a>s;s++)r[s-2]=arguments[s];for(var i=0;i<r.length;i++)n.appendChild("string"==typeof r[i]?b.createTextNode(r[i]):r[i]);return n}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return b=t.document||window.document,l(e.children,t)}function r(e,t){var n=(t&&t.document||window.document).createElement("div");return n.appendChild(a(e,t)),n.innerHTML}function s(e,t,n){var o=u(e,t,n);return t.renderInlineFlat&&e.isInline&&(o=f(e,o,t),o=t.renderInlineFlat(e,o,n)||o),o}function i(e,t,n){var a=o(n||e.type.name);return e.isTextblock?t.renderInlineFlat?h(e,a,t):d(e.children,a,t):p(e.children,a,t),a}function c(e){return function(t,n){return i(t,n,e)}}function l(e,t){var n=b.createDocumentFragment();return p(e,n,t),n}function u(e,t,n){var o=e.type.serializeDOM(e,t);for(var a in e.type.attrs){var r=e.type.attrs[a];r.serializeDOM&&r.serializeDOM(o,e.attrs[a],t,e);
}return t.onRender&&e.isBlock&&(o=t.onRender(e,o,n)||o),o}function p(e,t,n){for(var o=0;o<e.length;o++)n.path&&n.path.push(o),t.appendChild(u(e[o],n,o)),n.path&&n.path.pop()}function d(e,t,n){for(var o=t,a=[],r=0;r<e.length;r++){for(var s=e[r],i=s.styles,c=0;c<Math.min(a.length,i.length)&&i[c].eq(a[c]);++c);for(;c<a.length;)a.pop(),o=o.parentNode;for(;a.length<i.length;){var l=i[a.length];a.push(l),o=o.appendChild(m(l,n))}o.appendChild(u(s,n,r))}}function m(e,t){var n=e.type.serializeDOM(e,t);for(var o in e.type.attrs){var a=e.type.attrs[o];a.serializeDOM&&a.serializeDOM(n,e.attrs[o],t)}return n}function f(e,t,n){for(var o=e.styles,a=o.length-1;a>=0;a--){var r=m(o[a],n);r.appendChild(t),t=r}return t}function h(e,t,n){for(var a=0,r=0;r<e.length;r++){var s=e.child(r),i=f(s,u(s,n,r),n);i=n.renderInlineFlat(s,i,a)||i,t.appendChild(i),a+=s.offset}e.type.isCode||e.length&&"BR"!=t.lastChild.nodeName?"false"==t.lastChild.contentEditable&&t.appendChild(b.createTextNode("")):t.appendChild(o("br")).setAttribute("pm-force-br","true")}function g(e,t){e.prototype.serializeDOM=t}Object.defineProperty(e,"__esModule",{value:!0}),e.toDOM=a,e.toHTML=r,e.renderNodeToDOM=s;var v=t("../model"),y=t("./index"),b=null;y.defineTarget("dom",a),y.defineTarget("html",r),g(v.BlockQuote,c("blockquote")),v.BlockQuote.prototype.clicked=function(e,t,n,o){var a=n.firstChild.getBoundingClientRect();return o.left<a.left-2?v.Pos.from(t):void 0},g(v.BulletList,c("ul")),g(v.OrderedList,function(e,t){var n=i(e,t,"ol");return e.attrs.order>1&&n.setAttribute("start",e.attrs.order),n}),v.OrderedList.prototype.clicked=v.BulletList.prototype.clicked=function(e,t,n,o){for(var a=0;a<n.childNodes.length;a++){var r=n.childNodes[a];if(r.hasAttribute("pm-path")){var s=r.getBoundingClientRect();if(o.left>s.left-2)return null;if(s.top<=o.top&&s.bottom>=o.top)return new v.Pos(t,a)}}},g(v.ListItem,c("li")),g(v.HorizontalRule,function(){return o("hr")}),g(v.Paragraph,c("p")),g(v.Heading,function(e,t){return i(e,t,"h"+e.attrs.level)}),g(v.CodeBlock,function(e,t){var n=i(e,t,"code");return null!=e.attrs.params&&(n.className="fence "+e.attrs.params.replace(/(^|\s+)/g,"$&lang-")),o("pre",null,n)}),g(v.Text,function(e){return b.createTextNode(e.text)}),g(v.Image,function(e){return o("img",{src:e.attrs.src,alt:e.attrs.alt,title:e.attrs.title,contentEditable:!1})}),g(v.HardBreak,function(){return o("br")}),g(v.EmStyle,function(){return o("em")}),g(v.StrongStyle,function(){return o("strong")}),g(v.CodeStyle,function(){return o("code")}),g(v.LinkStyle,function(e){return o("a",{href:e.attrs.href,title:e.attrs.title})})}),require.register("prosemirror/serialize/index",function(e,t,n){"use strict";function o(e,t,n){var o=s[t];if(!o)throw new Error("Target format "+t+" not defined");return o(e,n)}function a(e){return!!s[e]}function r(e,t){s[e]=t}Object.defineProperty(e,"__esModule",{value:!0}),e.convertTo=o,e.knownTarget=a,e.defineTarget=r;var s=Object.create(null);r("json",function(e){return e.toJSON()})}),require.register("prosemirror/serialize/markdown",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=new f;return t.renderNodes(e.children),t.out}function r(e,t){return e=e.replace(/[`*\\~+\[\]]/g,"\\$&"),t&&(e=e.replace(/^[:#-]/,"\\$&")),e}function s(e){var t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]}function i(e,t){for(var n="",o=0;t>o;o++)n+=e;return n}function c(e,t){e.prototype.serializeMarkdown=t}function l(e,t){var n=t?e.type.openMarkdownStyle:e.type.closeMarkdownStyle;return"string"==typeof n?n:n(e)}function u(e,t,n){e.prototype.openMarkdownStyle=t,e.prototype.closeMarkdownStyle=n}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.toMarkdown=a;var d=t("../model"),m=t("./index");m.defineTarget("markdown",a);var f=function(){function e(){o(this,e),this.delim=this.out="",this.closed=!1,this.inTightList=!1}return p(e,[{key:"closeBlock",value:function(e){this.closed=e}},{key:"flushClose",value:function(e){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==e&&(e=2),e>1){var t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(var o=1;e>o;o++)this.out+=t+"\n"}this.closed=!1}}},{key:"wrapBlock",value:function(e,t,n,o){var a=this.delim;this.write(t||e),this.delim+=e,o(),this.delim=a,this.closeBlock(n)}},{key:"atBlank",value:function(){return/(^|\n)$/.test(this.out)}},{key:"write",value:function(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}},{key:"text",value:function(e,t){for(var n=e.split("\n"),o=0;o<n.length;o++){var a=this.atBlank()||this.closed;this.write(),this.out+=t!==!1?r(n[o],a):n[o],o!=n.length-1&&(this.out+="\n")}}},{key:"ensureNewLine",value:function(){this.atBlank()||(this.out+="\n")}},{key:"render",value:function(e){e.type.serializeMarkdown(this,e)}},{key:"renderNodes",value:function(e){for(var t=0;t<e.length;t++)this.render(e[t])}},{key:"renderInline",value:function(e){for(var t=[],n=0;n<=e.length;n++){var o=e[n],a=o?o.styles.slice():[];!t.length||"code"!=t[t.length-1].type||a.length&&"code"==a[a.length-1].type||(this.text("`",!1),t.pop());for(var r=0;r<t.length;r++){for(var s=t[r],i=!1,c=0;c<a.length;c++)if(a[c].eq(t[r])){a.splice(c,1),i=!0;break}i||(this.text(l(s,!1),!1),t.splice(r--,1))}for(var r=0;r<a.length;r++){var s=a[r];t.push(s),this.text(l(s,!0),!1)}o&&this.render(o)}}},{key:"renderList",value:function(e,t,n){var o=this;this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var a=this.inTightList;this.inTightList=e.attrs.tight;for(var r=function(a){a&&e.attrs.tight&&o.flushClose(1);var r=e.child(a);o.wrapBlock(t,n(a),e,function(){return o.render(r)})},s=0;s<e.length;s++)r(s);this.inTightList=a}}]),e}();c(d.BlockQuote,function(e,t){e.wrapBlock("> ",null,t,function(){return e.renderNodes(t.children)})}),c(d.CodeBlock,function(e,t){null==t.attrs.params?e.wrapBlock("    ",null,t,function(){return e.text(t.textContent,!1)}):(e.write("```"+t.attrs.params+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t))}),c(d.Heading,function(e,t){e.write(i("#",t.attrs.level)+" "),e.renderInline(t.children),e.closeBlock(t)}),c(d.HorizontalRule,function(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)}),c(d.BulletList,function(e,t){e.renderList(t,"  ",function(){return(t.attrs.bullet||"*")+" "})}),c(d.OrderedList,function(e,t){var n=Number(t.attrs.order||1),o=String(n+t.length-1).length,a=i(" ",o+2);e.renderList(t,a,function(e){var t=String(n+e);return i(" ",o-t.length)+t+". "})}),c(d.ListItem,function(e,t){return e.renderNodes(t.children)}),c(d.Paragraph,function(e,t){e.renderInline(t.children),e.closeBlock(t)}),c(d.Image,function(e,t){e.write("!["+r(t.attrs.alt||"")+"]("+r(t.attrs.src)+(t.attrs.title?" "+s(t.attrs.title):"")+")")}),c(d.HardBreak,function(e){return e.write("\\\n")}),c(d.Text,function(e,t){return e.text(t.text)}),u(d.EmStyle,"*","*"),u(d.StrongStyle,"**","**"),u(d.LinkStyle,"[",function(e){return"]("+r(e.attrs.href)+(e.attrs.title?" "+s(e.attrs.title):"")+")"}),u(d.CodeStyle,"`","`")}),require.register("prosemirror/serialize/text",function(e,t,n){"use strict";function o(e){return e.type.serializeText(e).trim()}Object.defineProperty(e,"__esModule",{value:!0}),e.toText=o;var a=t("../model"),r=t("./index");a.Block.prototype.serializeText=function(e){for(var t="",n=0;n<e.length;n++){var o=e.child(n);t+=o.type.serializeText(o)}return t},a.Textblock.prototype.serializeText=function(e){var t=a.Block.prototype.serializeText(e);return t&&t+"\n\n"},a.Inline.prototype.serializeText=function(){return""},a.HardBreak.prototype.serializeText=function(){return"\n"},a.Text.prototype.serializeText=function(e){return e.text},r.defineTarget("text",o)}),require.register("prosemirror/transform/ancestor",function(e,t,n){"use strict";function o(e,t){for(var n=[e.path(t.from.path)],o=!1;;){for(var a=-1,r=function(e,o){n.every(function(t){return e.type.canContainChildren(t)})&&(a=o),e=e.child(t.from.path[o]),s=e},s=e,i=0;i<t.from.path.length;i++)r(s,i);if(a>-1)return{path:t.from.path.slice(0,a),unwrap:o};if(o||!n[0].isBlock)return null;n=n[0].slice(t.from.offset,t.to.offset),o=!0}}function a(e,t,n){var a=i.siblingRange(e,t,n||t),r=o(e,a);return r?{found:r,range:a}:void 0}function r(e,t,n,o){var a=i.siblingRange(e,t,n||t);if(a.from.offset==a.to.offset)return null;var r=e.path(a.from.path),s=r.type.findConnection(o),c=o.findConnection(r.child(a.from.offset).type);return s&&c?{range:a,around:s,inside:c}:void 0}function s(e,t,n,o,a){var r=!1;return a||(a={}),e.nodesBetween(t,n||t,function(e){return e.isTextblock?(i.compareMarkup(e.type,o,e.attrs,a)||(r=!0),!1):void 0}),r}Object.defineProperty(e,"__esModule",{value:!0}),e.canLift=a,e.canWrap=r,e.alreadyHasBlockType=s;var i=t("../model"),c=t("./transform"),l=t("./step"),u=t("./tree"),p=t("./map");l.defineStep("ancestor",{apply:function(e,t){var n=t.from,o=t.to;if(!u.isFlatRange(n,o))return null;for(var a=n.path,r=n.offset,s=o.offset,l=t.param,d=l.depth,m=void 0===d?0:d,f=l.types,h=void 0===f?[]:f,g=l.attrs,v=void 0===g?[]:g,y=e.path(n.path),b=0;m>b;b++){if(r>0||s<e.path(a).maxOffset||0==a.length)return null;r=a[a.length-1],s=r+1,a=a.slice(0,a.length-1)}if(0==m&&0==h.length)return null;var k=e.path(a),S=k.length,w=void 0;if(k.type.locked)return null;if(h.length){var x=function(){var e=h[h.length-1],t=y.slice(n.offset,o.offset);if(!k.type.canContainType(h[0])||!t.every(function(t){return e.canContain(t)})||!y.length&&!e.canBeEmpty||e.locked)return{v:null};for(var a=null,i=h.length-1;i>=0;i--)a=h[i].create(v[i],a?[a]:t);w=k.splice(r,s,[a])}();if("object"==typeof x)return x.v}else{if(!k.type.canContainChildren(y,!0)||!y.length&&0==r&&s==k.length&&!k.type.canBeEmpty)return null;w=k.splice(r,s,y.children)}for(var E=e.replaceDeep(a,w),_=a.slice(),b=0;b<h.length;b++)_.push(b?0:r);var M=new i.Pos(_,h.length?0:r),C=null,T=h.length?1:o.offset-n.offset;if(m!=h.length||m>1||h.length>1){var A=new i.Pos(a,r),D=new i.Pos(a,s),P=new i.Pos(a,r+T),N=new i.Pos(_,M.offset+(o.offset-n.offset));C=[new p.ReplacedRange(A,n,A,M),new p.ReplacedRange(o,D,N,P,D,P)]}var R=[new p.MovedRange(n,o.offset-n.offset,M)];return s-r!=T&&R.push(new p.MovedRange(new i.Pos(a,s),S-s,new i.Pos(a,r+T))),new c.TransformResult(E,new p.PosMap(R,C))},invert:function(e,t,n){var o=[],a=[];if(e.param.depth)for(var r=0;r<e.param.depth;r++){var s=t.path(e.from.path.slice(0,e.from.path.length-r));o.unshift(s.type),a.unshift(s.attrs)}var i=n.map(e.from).pos,c=e.from.cmp(e.to)?n.map(e.to,-1).pos:i;return new l.Step("ancestor",i,c,null,{depth:e.param.types?e.param.types.length:0,types:o,attrs:a})},paramToJSON:function(e){return{depth:e.depth,types:e.types&&e.types.map(function(e){return e.name}),attrs:e.attrs}},paramFromJSON:function(e,t){return{depth:t.depth,wrappers:t.types&&t.types.map(function(t){return e.nodeType(t)}),attrs:t.attrs}}}),c.Transform.prototype.lift=function(e){var t=arguments.length<=1||void 0===arguments[1]?e:arguments[1];return function(){var n=a(this.doc,e,t);if(!n)return this;for(var o=n.found,r=n.range,s=r.from.path.length-o.path.length,c=o.unwrap&&this.doc.path(r.from.path),l=0,u=r.to;;l++){if(u.offset<this.doc.path(u.path).length){this.split(u,s);break}if(l==s-1)break;u=u.shorten(null,1)}for(var l=0,u=r.from;;l++){if(u.offset>0){this.split(u,s-l);for(var p=r.from.path.length-s,d=u.path.slice(0,p).concat(u.path[p]+1);d.length<r.from.path.length;)d.push(0);r={from:new i.Pos(d,0),to:new i.Pos(d,r.to.offset-r.from.offset)};break}if(l==s-1)break;u=u.shorten()}if(o.unwrap){for(var m=r.to.offset-1;m>r.from.offset;m--)this.join(new i.Pos(r.from.path,m));for(var f=0,m=r.from.offset;m<r.to.offset;m++)f+=c.child(m).length;var d=r.from.path.concat(r.from.offset);r={from:new i.Pos(d,0),to:new i.Pos(d,f)},++s}return this.step("ancestor",r.from,r.to,null,{depth:s}),this}.apply(this,arguments)},c.Transform.prototype.wrap=function(e,t,n,o){var a=r(this.doc,e,t,n);if(!a)return this;var s=a.range,c=a.around,l=a.inside,u=c.concat(n).concat(l),p=c.map(function(){return null}).concat(o).concat(l.map(function(){return null}));if(this.step("ancestor",s.from,s.to,null,{types:u,attrs:p}),l.length){for(var d=s.from.path.slice(),m=0;m<c.length+l.length+1;m++)d.push(m?0:s.from.offset);for(var m=s.to.offset-1-s.from.offset;m>0;m--)this.split(new i.Pos(d,m),l.length)}return this},c.Transform.prototype.setBlockType=function(e,t,n,o){var a=this;return this.doc.nodesBetween(e,t||e,function(e,t){return e.isTextblock&&!i.compareMarkup(n,e.type,o,e.attrs)?(t=t.slice(),a.clearMarkup(new i.Pos(t,0),new i.Pos(t,e.maxOffset),n),a.step("ancestor",new i.Pos(t,0),new i.Pos(t,a.doc.path(t).maxOffset),null,{depth:1,types:[n],attrs:[o]}),!1):void 0}),this},c.Transform.prototype.setNodeType=function(e,t,n){var o=this.doc.path(e.path).child(e.offset),a=e.toPath();return this.step("ancestor",new i.Pos(a,0),new i.Pos(a,o.maxOffset),null,{depth:1,types:[t],attrs:[n]}),this}}),require.register("prosemirror/transform/index",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t("./style"),t("./split"),t("./replace");var o=t("./transform");Object.defineProperty(e,"TransformResult",{enumerable:!0,get:function(){return o.TransformResult}}),Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return o.Transform}});var a=t("./step");Object.defineProperty(e,"Step",{enumerable:!0,get:function(){return a.Step}});var r=t("./ancestor");Object.defineProperty(e,"canLift",{enumerable:!0,get:function(){return r.canLift}}),Object.defineProperty(e,"canWrap",{enumerable:!0,get:function(){return r.canWrap}}),Object.defineProperty(e,"alreadyHasBlockType",{enumerable:!0,get:function(){return r.alreadyHasBlockType}});var s=t("./join");Object.defineProperty(e,"joinPoint",{enumerable:!0,get:function(){return s.joinPoint}}),Object.defineProperty(e,"joinableBlocks",{enumerable:!0,get:function(){return s.joinableBlocks}});var i=t("./map");Object.defineProperty(e,"PosMap",{enumerable:!0,get:function(){return i.PosMap}}),Object.defineProperty(e,"MapResult",{enumerable:!0,get:function(){return i.MapResult}}),Object.defineProperty(e,"mapStep",{enumerable:!0,get:function(){return i.mapStep}}),Object.defineProperty(e,"Remapping",{enumerable:!0,get:function(){return i.Remapping}})}),require.register("prosemirror/transform/join",function(e,t,n){"use strict";function o(e,t){if(0==t.offset)return!1;var n=e.path(t.path);if(n.isTextblock||t.offset==n.length)return!1;var o=n.child(t.offset-1).type;return!o.isTextblock&&o.contains&&o==n.child(t.offset).type}function a(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?-1:arguments[2];;){if(o(e,t))return t;if(0==t.depth)return null;t=t.shorten(null,0>n?0:1)}}Object.defineProperty(e,"__esModule",{value:!0}),e.joinableBlocks=o,e.joinPoint=a;var r=t("../model"),s=t("./transform"),i=t("./step"),c=t("./map");i.defineStep("join",{apply:function(e,t){var n=e.path(t.from.path),o=e.path(t.to.path);if(t.from.offset<n.maxOffset||t.to.offset>0||!n.type.canContainChildren(o,!0))return null;var a=t.from.path,i=t.to.path,l=a.length-1,u=a[l]+1;if(a.length!=i.length||0==a.length||u!=i[l])return null;for(var p=0;l>p;p++)if(a[p]!=i[p])return null;var d=a.slice(0,l),m=e.path(d),f=m.length;if(m.type.locked)return null;var h=n.append(o.children),g=e.replaceDeep(d,m.splice(u-1,u+1,[h])),v=new c.PosMap([new c.MovedRange(t.to,o.maxOffset,t.from),new c.MovedRange(new r.Pos(d,u+1),f-u-1,new r.Pos(d,u))],[new c.ReplacedRange(t.from,t.to,t.from,t.from,t.to.shorten())]);return new s.TransformResult(g,v)},invert:function(e,t){return new i.Step("split",null,null,e.from,t.path(e.to.path).copy())}}),s.Transform.prototype.join=function(e){var t=this.doc.path(e.path);return 0==e.offset||e.offset==t.length||t.isTextblock?this:(this.step("join",new r.Pos(e.path.concat(e.offset-1),t.child(e.offset-1).maxOffset),new r.Pos(e.path.concat(e.offset),0)),this)}}),require.register("prosemirror/transform/map",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(t.path.length>e.path.length){for(var n=[t.path[e.path.length]-e.offset],o=e.path.length+1;o<t.path.length;o++)n.push(t.path[o]);return new l.Pos(n,t.offset)}return new l.Pos([],t.offset-e.offset)}function r(e,t,n,o){void 0===n&&(n=1);for(var r=0;r<e.replaced.length;r++){var s=e.replaced[r],i=o?s.after:s.before,c=void 0,u=void 0;if((c=t.cmp(i.from))>=0&&(u=t.cmp(i.to))<=0){var p=o?s.before:s.after;return new h(0>n?p.from:p.to,!(!c||!u),{rangeID:r,offset:a(i.ref,t)})}}for(var r=0;r<e.moved.length;r++){var s=e.moved[r],d=o?s.dest:s.start;if(t.cmp(d)>=0&&l.Pos.cmp(t.path,t.offset,d.path,d.offset+s.size)<=0){var m=o?s.start:s.dest,f=d.depth;if(t.depth>f){var g=m.offset+(t.path[f]-d.offset);return new h(new l.Pos(m.path.concat(g).concat(t.path.slice(f+1)),t.offset))}return new h(new l.Pos(m.path,m.offset+(t.offset-d.offset)))}}return new h(t)}function s(e,t){return e.cmp(t)>0?e:t}function i(e,t){var n=!0,o=null,a=null,r=null;if(e.from){var i=t.map(e.from,1);o=i.pos,i.deleted||(n=!1)}if(e.to)if(0==e.to.cmp(e.from))a=o;else{var i=t.map(e.to,-1);a=s(i.pos,o),i.deleted||(n=!1)}if(e.pos)if(o&&0==e.pos.cmp(e.from))r=o;else if(a&&0==e.pos.cmp(e.to))r=a;else{var i=t.map(e.pos,1);r=i.pos,i.deleted||(n=!1)}return n?void 0:new u.Step(e.name,o,a,r,e.param)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.mapStep=i;var l=t("../model"),u=t("./step"),p=function(){function e(t,n){var a=arguments.length<=2||void 0===arguments[2]?null:arguments[2];o(this,e),this.start=t,this.size=n,this.dest=a}return c(e,[{key:"toString",value:function(){return"[moved "+this.start+"+"+this.size+" to "+this.dest+"]"}},{key:"end",get:function(){return new l.Pos(this.start.path,this.start.offset+this.size)}}]),e}();e.MovedRange=p;var d=function k(e,t,n){o(this,k),this.from=e,this.to=t,this.ref=n},m=function(){function e(t,n,a,r){var s=arguments.length<=4||void 0===arguments[4]?t:arguments[4],i=arguments.length<=5||void 0===arguments[5]?a:arguments[5];return function(){o(this,e),this.before=new d(t,n,s),this.after=new d(a,r,i)}.apply(this,arguments)}return c(e,[{key:"toString",value:function(){return"[replaced "+this.before.from+"-"+this.before.to+" with "+this.after.from+"-"+this.after.to+"]"}}]),e}();e.ReplacedRange=m;var f=[],h=function S(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];o(this,S),this.pos=e,this.deleted=t,this.recover=n};e.MapResult=h;var g=function(){function e(t,n){o(this,e),this.moved=t||f,this.replaced=n||f}return c(e,[{key:"recover",value:function(e){return this.replaced[e.rangeID].after.ref.extend(e.offset)}},{key:"map",value:function(e,t){return r(this,e,t,!1)}},{key:"invert",value:function(){return new v(this)}},{key:"toString",value:function(){return this.moved.concat(this.replaced).join(" ")}}]),e}();e.PosMap=g;var v=function(){function e(t){o(this,e),this.inner=t}return c(e,[{key:"recover",value:function(e){return this.inner.replaced[e.rangeID].before.ref.extend(e.offset)}},{key:"map",value:function(e,t){return r(this.inner,e,t,!0)}},{key:"invert",value:function(){return this.inner}},{key:"toString",value:function(){return"-"+this.inner}}]),e}(),y=new g;e.nullMap=y;var b=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],a=arguments.length<=2||void 0===arguments[2]?Object.create(null):arguments[2];o(this,e),this.head=t,this.tail=n,this.mirror=a}return c(e,[{key:"addToFront",value:function(e,t){this.head.push(e);var n=-this.head.length;return null!=t&&(this.mirror[n]=t),n}},{key:"addToBack",value:function(e,t){this.tail.push(e);var n=this.tail.length-1;return null!=t&&(this.mirror[t]=n),n}},{key:"get",value:function(e){return 0>e?this.head[-e-1]:this.tail[e]}},{key:"map",value:function t(e,n){for(var o=!1,a=-this.head.length;a<this.tail.length;a++){var t=this.get(a),r=t.map(e,n);if(r.recover){var s=this.mirror[a];if(null!=s){a=s,e=this.get(s).recover(r.recover);continue}}r.deleted&&(o=!0),e=r.pos}return new h(e,o)}}]),e}();e.Remapping=b}),require.register("prosemirror/transform/replace",function(e,t,n){"use strict";function o(e,t,n,o){for(var a=[],r=t.path.slice(0,o),s=o;;s++){var i=s==t.depth?0:1,l=s==t.depth?t.offset:t.path[s],u=e.maxOffset-l,d=n.maxOffset-u,m=t.shorten(s,i),f=new c.Pos(r,d+i);if(m.cmp(f)&&a.push(new p.MovedRange(m,u-i,f)),!i)return a;e=e.child(l),n=n.child(d),r=r.concat(d)}}function a(e,t,n,r,s){var i=arguments.length<=5||void 0===arguments[5]?0:arguments[5];if(i!=r.length){var l=r[i],u=a(e.child(l),t,n,r,s,i+1);return u?{doc:e.replace(l,u.doc),moved:u.moved}:null}var p=function(){var a=c.sliceBefore(e,t,i),r=c.sliceAfter(e,n,i),l=void 0;return s.nodes.every(function(e){return a.type.canContain(e)})?(l=s.nodes.length?a.append(s.nodes,t.depth-i,s.openLeft).append(r.children,s.openRight,n.depth-i):a.append(r.children,t.depth-i,n.depth-i),l.length||l.type.canBeEmpty||(l=l.copy(l.type.defaultContent())),{v:{doc:l,moved:o(e,n,l,i)}}):{v:null}}();return"object"==typeof p?p.v:void 0}function r(e,t){for(var n=e[t]=e[t].splice(0,1,[]),o=t-1;o>=0;o--)n=e[o]=e[o].replace(0,n)}function s(e,t,n,o){for(var a=c.sliceBetween(t,n,o,!1),s=[],i=a,l=0;l<=n.path.length;l++,i=i.firstChild)s.push(i);var u=d.samePathDepth(n,o),p=e.length-1,m=s.length-1,f=null,h=s[m];for(h.isTextblock&&h.length&&e[p].isTextblock&&(f=e[p--].copy(h.children),--m,r(s,m));;){for(var i=s[m],g=i.type,v=null,y=u>=m,l=p;l>=0;l--){var b=e[l];if(y?b.type.canContainChildren(i):b.type==g){v=l;break}}if(null!=v)if(f)for(;p>=v;)f=e[p].copy(p==v?[f].concat(i.children):[f]),p--;else f=e[v].copy(i.children),p=v-1;if(null!=v||0==i.length){if(y)break;m&&r(s,m-1)}m--}var k={nodes:f?f.children:[],openLeft:n.depth-m,openRight:o.depth-m};return{repl:k,depth:p+1}}function i(e,t,n,o){for(var a=d.samePathDepth(n,o),r=o.shorten(null,1);r.path.length>a&&1==t.path(r.path).length;)r=r.shorten(null,1);e.split(r,r.path.length-a);for(var s=o,i=new c.Pos(s.path,t.path(s.path).maxOffset),l=t.path(s.path.slice(0,a)),u=l.pathNodes(n.path.slice(a)),p=l.pathNodes(s.path.slice(a));u.length&&p.length&&u[0].sameMarkup(p[0]);)u.shift(),p.shift();(p.length||u.length)&&e.step("ancestor",s,i,null,{depth:p.length,types:u.map(function(e){return e.type}),attrs:u.map(function(e){return e.attrs})});for(var m=a;m<n.path.length;m++)e.join(n.shorten(m,1))}Object.defineProperty(e,"__esModule",{value:!0}),e.replace=a;var c=t("../model"),l=t("./transform"),u=t("./step"),p=t("./map"),d=t("./tree"),m={nodes:[],openLeft:0,openRight:0};u.defineStep("replace",{apply:function(e,t){var n=t.pos,o=n.path;if(t.from.depth<o.length||t.to.depth<o.length)return null;for(var r=0;r<o.length;r++)if(t.from.path[r]!=o[r]||t.to.path[r]!=o[r])return null;var s=a(e,t.from,t.to,n.path,t.param||m);if(!s)return null;var i=s.doc,c=s.moved,u=c.length?c[c.length-1].dest:t.to,d=new p.ReplacedRange(t.from,t.to,t.from,u,n,n);return new l.TransformResult(i,new p.PosMap(c,[d]))},invert:function(e,t,n){var o=e.pos.depth;return new u.Step("replace",e.from,n.map(e.to).pos,e.from.shorten(o),{nodes:c.childrenBetween(t.path(e.pos.path),e.from,e.to,o),openLeft:e.from.depth-o,openRight:e.to.depth-o})},paramToJSON:function(e){return e&&{nodes:e.nodes&&e.nodes.map(function(e){return e.toJSON()}),openLeft:e.openLeft,openRight:e.openRight}},paramFromJSON:function(e,t){return t&&{nodes:t.nodes&&t.nodes.map(e.nodeFromJSON),openLeft:t.openLeft,openRight:t.openRight}}}),l.Transform.prototype["delete"]=function(e,t){return e.cmp(t)&&this.replace(e,t),this},l.Transform.prototype.replace=function(e,t,n,o,a){var r=void 0,l=void 0,u=this.doc,p=d.samePathDepth(e,t);if(n){var f=s(u.pathNodes(e.path),n,o,a);for(r=f.repl,l=f.depth;l>p;)r.nodes.length&&(r={nodes:[u.path(e.path.slice(0,l)).copy(r.nodes)],openLeft:r.openLeft+1,openRight:r.openRight+1}),l--}else r=m,l=p;var h=e.shorten(l),g=u,v=t;if(r.nodes.length||d.replaceHasEffect(u,e,t)){var y=this.step("replace",e,t,h,r);g=y.doc,v=y.map.map(t).pos}if(!u.path(t.path).isTextblock)return this;if(!(r.nodes.length?n.path(a.path).isTextblock:u.path(e.path).isTextblock))return this;var b=u.path(h.path).pathNodes(t.path.slice(l)).slice(1),k=void 0;if(r.nodes.length){var S=r.nodes;k=[];for(var w=0;w<r.openRight;w++){var x=S[S.length-1];k.push(x),S=x.children}}else k=u.path(h.path).pathNodes(e.path.slice(l)).slice(1);if(k.length&&(b.length!=k.length||!b.every(function(e,t){return e.sameMarkup(k[t])}))){for(var E=v.shorten(h.depth),_=E.path,M=E.offset,C=void 0,T=g.path(_),w=0;;w++){if(w==k.length){C=new c.Pos(_,M);break}_.push(M-1),T=T.child(M-1),M=T.maxOffset}i(this,g,C,v)}return this},l.Transform.prototype.replaceWith=function(e,t,n){return Array.isArray(n)||(n=[n]),c.Pos.samePath(e.path,t.path)?(this.step("replace",e,t,e,{nodes:n,openLeft:0,openRight:0}),this):this},l.Transform.prototype.insert=function(e,t){return this.replaceWith(e,e,t)},l.Transform.prototype.insertInline=function(e,t){Array.isArray(t)||(t=[t]);var n=c.spanStylesAt(this.doc,e);return t=t.map(function(e){return e.styled(n)}),this.insert(e,t)},l.Transform.prototype.insertText=function(e,t){return this.insertInline(e,this.doc.type.schema.text(t))}}),require.register("prosemirror/transform/split",function(e,t,n){"use strict";var o=t("../model"),a=t("./transform"),r=t("./step"),s=t("./map");r.defineStep("split",{apply:function(e,t){var n=t.pos;if(0==n.depth)return null;var r=n.shorten(),i=r.path,c=r.offset,l=e.path(i),u=l.child(c),p=u.maxOffset,d=t.param||u,m=d.type,f=d.attrs,h=n.offset;if(0==h&&!u.type.canBeEmpty||u.type.locked||h==u.maxOffset&&!m.canBeEmpty)return null;var g=l.splice(c,c+1,[u.copy(u.slice(0,h)),m.create(f,u.slice(h))]),v=e.replaceDeep(i,g),y=new o.Pos(i.concat(c+1),0),b=new s.PosMap([new s.MovedRange(n,p-n.offset,y),new s.MovedRange(new o.Pos(i,c+1),g.length-2-c,new o.Pos(i,c+2))],[new s.ReplacedRange(n,n,n,y,n,n.shorten(null,1))]);return new a.TransformResult(v,b)},invert:function(e,t,n){return new r.Step("join",e.pos,n.map(e.pos).pos)},paramToJSON:function(e){return e&&{type:e.type.name,attrs:e.attrs}},paramFromJSON:function(e,t){return t&&{type:e.nodeType(t.type),attrs:t.attrs}}}),a.Transform.prototype.split=function(e,t,n,o){if(void 0===t&&(t=1),0==t)return this;for(var a=0;;a++){if(this.step("split",null,null,e,n&&{type:n,attrs:o}),a==t-1)return this;n=null,e=e.shorten(null,1)}},a.Transform.prototype.splitIfNeeded=function(e){for(var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=0;t>n;n++){var o=e.shorten(e.depth-n);o.offset&&o.offset<this.doc.path(o.path).maxOffset&&this.step("split",null,null,o)}return this}}),require.register("prosemirror/transform/step",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){c[e]=t}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.defineStep=a;var s=t("../model"),i=function(){function e(t,n,a,r){var s=arguments.length<=4||void 0===arguments[4]?null:arguments[4];if(o(this,e),!(t in c))throw new Error("Unknown step type: "+t);this.name=t,this.from=n,this.to=a,this.pos=r,this.param=s}return r(e,[{key:"apply",value:function(e){return c[this.name].apply(e,this)}},{key:"invert",value:function(e,t){return c[this.name].invert(this,e,t)}},{key:"toJSON",value:function(){var e=c[this.name];return{name:this.name,from:this.from,to:this.to,pos:this.pos,param:e.paramToJSON?e.paramToJSON(this.param):this.param}}}],[{key:"fromJSON",value:function(t,n){var o=c[n.name];return new e(n.name,n.from&&s.Pos.fromJSON(n.from),n.to&&s.Pos.fromJSON(n.to),n.pos&&s.Pos.fromJSON(n.pos),o.paramFromJSON?o.paramFromJSON(t,n.param):n.param)}}]),e}();e.Step=i;var c=Object.create(null)}),require.register("prosemirror/transform/style",function(e,t,n){"use strict";var o=t("../model"),a=t("./transform"),r=t("./step"),s=t("./tree");r.defineStep("addStyle",{apply:function(e,t){return new a.TransformResult(s.copyStructure(e,t.from,t.to,function(e,n,o){return e.type.canContainStyle(t.param)?s.copyInline(e,n,o,function(e){return e.styled(t.param.addToSet(e.styles))}):e}))},invert:function(e,t,n){return new r.Step("removeStyle",e.from,n.map(e.to).pos,null,e.param)},paramToJSON:function(e){return e.toJSON()},paramFromJSON:function(e,t){return e.styleFromJSON(t)}}),a.Transform.prototype.addStyle=function(e,t,n){var a=this,s=[],i=[],c=null,l=null;return this.doc.inlineNodesBetween(e,t,function(e,t,a,u,p){if(n.isInSet(e.styles)||!p.type.canContainStyle(n.type))l=c=null;else{u=u.slice();var d=o.containsStyle(e.styles,n.type);d?c&&c.param.eq(d)?c.to=new o.Pos(u,a):(c=new r.Step("removeStyle",new o.Pos(u,t),new o.Pos(u,a),null,d),s.push(c)):c&&(c=null),l?l.to=new o.Pos(u,a):(l=new r.Step("addStyle",new o.Pos(u,t),new o.Pos(u,a),null,n),i.push(l))}}),s.forEach(function(e){return a.step(e)}),i.forEach(function(e){return a.step(e)}),this},r.defineStep("removeStyle",{apply:function(e,t){return new a.TransformResult(s.copyStructure(e,t.from,t.to,function(e,n,o){return s.copyInline(e,n,o,function(e){return e.styled(t.param.removeFromSet(e.styles))})}))},invert:function(e,t,n){return new r.Step("addStyle",e.from,n.map(e.to).pos,null,e.param)},paramToJSON:function(e){return e.toJSON()},paramFromJSON:function(e,t){return e.styleFromJSON(t)}}),a.Transform.prototype.removeStyle=function(e,t){var n=this,a=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=[],s=0;return this.doc.inlineNodesBetween(e,t,function(e,t,n,i){s++;var c=null;if(a instanceof o.StyleType){var l=o.containsStyle(e.styles,a);l&&(c=[l])}else a?a.isInSet(e.styles)&&(c=[a]):c=e.styles;if(c&&c.length){i=i.slice();for(var u=0;u<c.length;u++){for(var p=c[u],l=void 0,d=0;d<r.length;d++){var m=r[d];m.step==s-1&&p.eq(r[d].style)&&(l=m)}l?(l.to=new o.Pos(i,n),l.step=s):r.push({style:p,from:new o.Pos(i,t),to:new o.Pos(i,n),step:s})}}}),r.forEach(function(e){return n.step("removeStyle",e.from,e.to,null,e.style)}),this},a.Transform.prototype.clearMarkup=function(e,t,n){var a=this,s=[];this.doc.inlineNodesBetween(e,t,function(e,t,i,c){if(n?!n.canContainType(e.type):!e.isText){c=c.slice();var l=new o.Pos(c,t);return void s.push(new r.Step("replace",l,new o.Pos(c,i),l))}for(var u=0;u<e.styles.length;u++){var p=e.styles[u];n&&n.canContainStyle(p.type)||(c=c.slice(),a.step("removeStyle",new o.Pos(c,t),new o.Pos(c,i),null,p))}});for(var i=s.length-1;i>=0;i--)this.step(s[i]);return this}}),require.register("prosemirror/transform/transform",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=t("./step"),s=t("./map"),i=function l(e){var t=arguments.length<=1||void 0===arguments[1]?s.nullMap:arguments[1];o(this,l),this.doc=e,this.map=t};e.TransformResult=i;var c=function(){function e(t){o(this,e),this.docs=[t],this.steps=[],this.maps=[]}return a(e,[{key:"step",value:function(e,t,n,o,a){"string"==typeof e&&(e=new r.Step(e,t,n,o,a));
var s=e.apply(this.doc);return s&&(this.steps.push(e),this.maps.push(s.map),this.docs.push(s.doc)),s}},{key:"map",value:function(e,t){for(var n=!1,o=0;o<this.maps.length;o++){var a=this.maps[o].map(e,t);e=a.pos,a.deleted&&(n=!0)}return new s.MapResult(e,n)}},{key:"doc",get:function(){return this.docs[this.docs.length-1]}},{key:"before",get:function(){return this.docs[0]}}]),e}();e.Transform=c}),require.register("prosemirror/transform/tree",function(e,t,n){"use strict";function o(e,t,n,a){var r=arguments.length<=4||void 0===arguments[4]?0:arguments[4];if(e.isTextblock)return a(e,t,n);if(!e.length)return e;var s=t?t.path[r]:0,i=n?n.path[r]:e.length-1,c=e.slice(0,s);if(s==i)c.push(o(e.child(s),t,n,a,r+1));else{c.push(o(e.child(s),t,null,a,r+1));for(var l=s+1;i>l;l++)c.push(o(e.child(l),null,null,a,r+1));c.push(o(e.child(i),null,n,a,r+1))}for(var l=i+1;l<e.length;l++)c.push(e.child(l));return e.copy(c)}function a(e,t,n,o){for(var a=t?t.offset:0,r=n?n.offset:e.maxOffset,s=e.slice(0,a).concat(e.slice(a,r).map(o)).concat(e.slice(r)),i=s.length-2;i>=0;i--){var c=s[i].maybeMerge(s[i+1]);c&&s.splice(i,2,c)}return e.copy(s)}function r(e,t){if(e.path.length!=t.path.length)return!1;for(var n=0;n<e.path.length;n++)if(e.path[n]!=t.path[n])return!1;return e.offset<=t.offset}function s(e,t,n){if(!n||0==t||t==e.length)return!1;var o=e.child(t-1),a=e.child(t);return o.sameMarkup(a)}function i(e,t,n){for(var o=0,a=e;;o++){var r=o==t.depth,i=o==n.depth;if(r||i||t.path[o]!=n.path[o]){var c=void 0,l=void 0;if(r)c=t.offset;else{c=t.path[o]+1;for(var u=o+1,p=a.child(c-1);u<=t.path.length;u++)if(u==t.path.length){if(t.offset<p.maxOffset)return!0}else{if(t.path[u]+1<p.maxOffset)return!0;p=p.child(t.path[u])}}if(i)l=n.offset;else{l=n.path[o];for(var u=o+1;u<=n.path.length;u++)if((u==n.path.length?n.offset:n.path[u])>0)return!0}return c!=l?!0:s(a,c,Math.min(t.depth,n.depth)-o)}a=a.child(t.path[o])}}function c(e,t){for(var n=0;;n++)if(n==e.path.length||n==t.path.length||e.path[n]!=t.path[n])return n}Object.defineProperty(e,"__esModule",{value:!0}),e.copyStructure=o,e.copyInline=a,e.isFlatRange=r,e.replaceHasEffect=i,e.samePathDepth=c}),require.register("prosemirror/util/error",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t=/^function (\w+)/.exec(e.toString());return t&&t[1]}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t,n){for(var o=!0;o;){var a=e,r=t,s=n;o=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,r);if(void 0!==i){if("value"in i)return i.value;var c=i.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return void 0;e=l,t=r,n=s,o=!0,i=l=void 0}},c=function(e){function t(e){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.message!=e&&(this.message=e,Error.captureStackTrace?Error.captureStackTrace(this,this.name):this.stack=new Error(e).stack)}return a(t,e),s(t,[{key:"name",get:function(){return this.constructor.name||r(this.constructor)||"ProseMirrorError"}}],[{key:"raise",value:function(e){throw new this(e)}}]),t}(Error);e.ProseMirrorError=c}),require.register("prosemirror/util/map",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=window.Map||function(){function e(){o(this,e),this.content=[]}return a(e,[{key:"set",value:function(e,t){var n=this.find(e);n>-1?this.content[n+1]=t:this.content.push(e,t)}},{key:"get",value:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]}},{key:"has",value:function(e){return this.find(e)>-1}},{key:"find",value:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t}},{key:"clear",value:function(){this.content.length=0}},{key:"size",get:function(){return this.content.length/2}}]),e}();e.Map=r}),require.register("prosemirror/util/sortedinsert",function(e,t,n){"use strict";function o(e,t,n){for(var o=0;o<e.length&&!(n(e[o],t)>0);o++);e.splice(o,0,t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o,n.exports=e["default"]}),require.register("router",function(e,t,n){var o,a,r,s,i={}.hasOwnProperty,c=function(e,t){function n(){this.constructor=e}for(var o in t)i.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=t("./libs/panel_router"),o=t("./stores/account_store"),a=t("./stores/message_store"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.patterns={"account.config":{pattern:"account/:accountID/config/:tab",fluxAction:"showConfigAccount"},"account.new":{pattern:"account/new",fluxAction:"showCreateAccount"},"account.mailbox.messages":{pattern:"account/:accountID/mailbox/:mailboxID/sort/:sort/:type/:flag/before/:before/after/:after",fluxAction:"showMessageList"},search:{pattern:"account/:accountID/search/:search",fluxAction:"showSearchResult"},message:{pattern:"message/:messageID",fluxAction:"showMessage"},conversation:{pattern:"conversation/:conversationID/:messageID/",fluxAction:"showConversation"},compose:{pattern:"compose",fluxAction:"showComposeNewMessage"},"compose.reply":{pattern:"reply/:messageID",fluxAction:"showComposeMessage"},"compose.reply-all":{pattern:"reply-all/:messageID",fluxAction:"showComposeMessage"},"compose.forward":{pattern:"forward/:messageID",fluxAction:"showComposeMessage"},edit:{pattern:"edit/:messageID",fluxAction:"showComposeMessage"},"default":{pattern:"",fluxAction:""}},t.prototype.routes={"":"default"},t.prototype._getDefaultParameters=function(e,t){var n,a,r,s,i,c,l;switch(e){case"account.mailbox.messages":a=null!=(c=o.getDefault())?c.get("id"):void 0,i=null!=t.accountID?o.getDefaultMailbox(t.accountID):o.getDefaultMailbox(a),r=null!=i?i.get("id"):void 0,s={},s.accountID=a,s.mailboxID=r,s.pageAfter="-",s.sort="-date",s.after="-",s.before="-",s.type="nofilter",s.flag="-";break;case"account.config":n=null!=(l=o.getDefault())?l.get("id"):void 0,s={accountID:n,tab:"account"};break;case"search":s={accountID:"all",search:"-"};break;default:s=null}return s},t}(r)}),require.register("stores/account_store",function(e,n,o){var a,r,s,i,c,l,u,p={}.hasOwnProperty,d=function(e,t){function n(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=n("../libs/flux/store/store"),s=n("../constants/app_constants").ActionTypes,r=n("../utils/translators/account_translator"),u=n("../libs/cached_transform"),c=["id","accountID","label","tree","weight"],i=["lastSync","nbTotal","nbUnread","nbRecent"],a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}var o,a,l,p,f,h,g,v,y,b,k,S,w,x,E,_,M,C;return d(n,e),l=Immutable.Map(),a=Immutable.Sequence(window.accounts).sort(function(e,t){return e.label>t.label?1:e.label<t.label?-1:0}).mapKeys(function(e,t){return t.id}).map(function(e){return l.set(e.id,e.totalUnread),r.toImmutable(e)}).toOrderedMap(),b=Immutable.Map(),E=null,_=null,S=!1,k=!1,M=Immutable.Map(),v={},w=null,g=null,x=function(){var e,t,n;return(e=null!=E?E.get("id"):void 0)&&(E=a.get(e),t=null!=_?_.get("id"):void 0)?_=null!=E&&null!=(n=E.get("mailboxes"))?n.get(t):void 0:void 0},h=function(){return M=Immutable.Map()},p=function(e,t){return M=M.set(e,t)},f=function(e){var t;return(null!=(t=e.mailboxes)?t.length:void 0)>0?void 0:C({name:"AccountConfigError",field:"nomailboxes",causeFields:["nomailboxes"]})},C=function(e){var n,o,a,r,s,i;if("AccountConfigError"===e.name){for(n={message:t("config error "+e.field),originalError:e.originalError,originalErrorStack:e.originalErrorStack},o={},i=e.causeFields,r=0,s=i.length;s>r;r++)a=i[r],o[a]=n;return M=Immutable.Map(o)}return M=Immutable.Map({unknown:e})},o=function(e,t,n){var o,r,s,l,u;if(o=a.get(e),!o)return!0;l=o.get("mailboxes"),s=l.get(t)||Immutable.Map(),u=b.get(t)||Immutable.Map(),s.get("weight")&&(n.weight=s.get("weight"));for(r in c)s.get(r)!==n[r]&&(s=s.set(r,n[r]));for(r in i)u.get(r)!==n[r]&&(u=u.set(r,n[r]));return u!==b.get(t)&&b.set(t,u),s!==l.get(t)&&(l=l.set(t,s),o=o.set("mailboxes",l),a=a.set(e,o)),x()},y=function(e,t){var n,o;return n=e.get("weight"),o=t.get("weight"),o>n?1:n>o?-1:e.get("label"<t.get("label"))?1:e.get("label">t.get("label"))?-1:0},n.prototype._applyMailboxDiff=function(e,t){var n,o,a,r,s,i;for(n in t)a=t[n],a.nbTotal+a.nbUnread&&(o=b.get(n)||Immutable.Map(),b.set(n,o.merge({nbTotal:o.get("nbTotal")+a.nbTotal,nbUnread:o.get("nbUnread")+a.nbUnread})));return r=(null!=(i=t[e])?i.nbUnread:void 0)||0,r&&(s=l.get(e)+r,l=l.set(e,s)),clearTimeout(g),g=setTimeout(function(e){return function(){return e.emit("change")}}(this),1)},n.prototype._setCurrentAccount=function(e){return E=e},n.prototype._setCurrentMailbox=function(e){return _=e},n.prototype._onAccountUpdated=function(e){var t;return t=r.toImmutable(e),a=a.set(t.get("id"),t),this._setCurrentAccount(t)},n.prototype.__bindHandlers=function(e){return e(s.ADD_ACCOUNT_REQUEST,function(e){var t;return t=e.inputValues,S=!0,this.emit("change")}),e(s.ADD_ACCOUNT_SUCCESS,function(e){var t;return t=e.account,S=!1,f(t),this._onAccountUpdated(t),this.emit("change")}),e(s.ADD_ACCOUNT_FAILURE,function(e){var t;return t=e.error,S=!1,C(t),this.emit("change")}),e(s.CHECK_ACCOUNT_REQUEST,function(){return k=!0,this.emit("change")}),e(s.CHECK_ACCOUNT_SUCCESS,function(){return k=!1,this.emit("change")}),e(s.CHECK_ACCOUNT_FAILURE,function(e){var t;return t=e.error,k=!1,C(t),this.emit("change")}),e(s.SELECT_ACCOUNT,function(e){var t,n;return null!=e.accountID?this._setCurrentAccount(a.get(e.accountID)||null):this._setCurrentAccount(null),null!=e.mailboxID?(t=(null!=E&&null!=(n=E.get("mailboxes"))?n.get(e.mailboxID):void 0)||null,this._setCurrentMailbox(t)):(h(),this._setCurrentMailbox(null)),this.emit("change")}),e(s.EDIT_ACCOUNT_REQUEST,function(e){var t;return t=e.inputValues,S=!0,this.emit("change")}),e(s.EDIT_ACCOUNT_SUCCESS,function(e){var t;return t=e.rawAccount,S=!1,h(),f(t),this._onAccountUpdated(t),this.emit("change")}),e(s.EDIT_ACCOUNT_FAILURE,function(e){var t;return t=e.error,S=!1,C(t),this.emit("change")}),e(s.MAILBOX_CREATE,function(e){return this._onAccountUpdated(e),this.emit("change")}),e(s.MAILBOX_UPDATE,function(e){return this._onAccountUpdated(e),this.emit("change")}),e(s.MAILBOX_DELETE,function(e){return this._onAccountUpdated(e),this.emit("change")}),e(s.REMOVE_ACCOUNT,function(e){return a=a["delete"](e),this._setCurrentAccount(this.getDefault()),this.emit("change")}),e(s.RECEIVE_MAILBOX_UPDATE,function(e){return o(e.accountID,e.id,e),this.emit("change")}),e(s.RECEIVE_REFRESH_NOTIF,function(e){return l.set(e.accountID,e.totalUnread),this.emit("change")}),e(s.REFRESH_REQUEST,function(e){var t;return t=e.mailboxID,null==v[t]&&(v[t]=0),v[t]++,this.emit("change")}),e(s.REFRESH_FAILURE,function(e){var t,n;return n=e.mailboxID,t=e.error,v[n]--,w=t,this.emit("change")}),e(s.REFRESH_SUCCESS,function(e){var t,n;return t=e.mailboxID,n=e.updated,v[t]--,null!=n&&o(n.accountID,n.id,n),this.emit("change")})},n.prototype.getAll=function(){return a},n.prototype.getAllMailboxes=function(){return u(n,"all-mailboxes",a,function(){return a.flatMap(function(e){return e.get("mailboxes")})})},n.prototype.getMailboxCounters=function(){return b},n.prototype.getByID=function(e){return a.get(e)},n.prototype.getByLabel=function(e){return a.find(function(t){return t.get("label")===e})},n.prototype.getDefault=function(){return a.first()||null},n.prototype.getDefaultMailbox=function(e){var t,n,o,r,s;return(t=a.get(e)||this.getDefault())?(s=t.get("mailboxes"),r=s.filter(function(e){return"inbox"===e.get("label").toLowerCase()}),0!==r.count()?r.first():(o=t.get("favorites"),n=null!=o?o[0]:void 0,n?s.get(n):s.first())):null},n.prototype.hasConversationEnabled=function(e){return e!==(null!=E?E.get("trashMailbox"):void 0)&&e!==(null!=E?E.get("draftMailbox"):void 0)&&e!==(null!=E?E.get("junkMailbox"):void 0)},n.prototype.getSelected=function(){return E},n.prototype.getSelectedOrDefault=function(){return this.getSelected()||this.getDefault()},n.prototype.getSelectedMailboxes=function(e){var t;return null==E?Immutable.OrderedMap.empty():(t=E.get("mailboxes"),e&&(t=t.sort(y)),t)},n.prototype.selectedIsDifferentThan=function(e,t){var n;return n=(null!=E?E.get("id"):void 0)!==e||(null!=_?_.get("id"):void 0)!==t},n.prototype.getSelectedMailbox=function(e){var t;return t=this.getSelectedMailboxes(),null!=e?t.get(e):null!=_?_:t.first()},n.prototype.getSelectedFavorites=function(e){var t,n,o;return n=this.getSelectedMailboxes(),t=null!=E?E.get("favorites"):void 0,o=null!=t?n.filter(function(e,n){return m.call(t,n)>=0}).toOrderedMap():n.toOrderedMap(),e&&(o=o.sort(y)),o},n.prototype.getErrors=function(){return M},n.prototype.getRawErrors=function(){return M.get("unknown")},n.prototype.getAlertErrorMessage=function(){var e;return e=M.first(),"AccountConfigError"===e.name?t("config error "+e.field):e.message||e.name||e},n.prototype.getRefreshLastError=function(){var e;return e=w,"AccountConfigError"===e.name?t("config error "+e.field):e.message||e.name||e},n.prototype.isWaiting=function(){return S},n.prototype.isChecking=function(){return k},n.prototype.isMailboxRefreshing=function(e){return v[e]>0},n.prototype.getMailboxRefresh=function(e){return v[e]>0?.9:0},n.prototype.getMailbox=function(e,t){var n;n=null;for(n in e.get("mailboxIds"))m.call(t.favorites,n)>=0&&(n=n);return null==n&&Object.keys(e.get("mailboxIds")).length>=0?Object.keys(e.get("mailboxIds"))[0]:n},n.prototype.makeEmptyAccount=function(){var e;return e={},e.label="",e.login="",e.password="",e.imapServer="",e.imapLogin="",e.smtpServer="",e.label="",e.id=null,e.smtpPort=465,e.smtpSSL=!0,e.smtpTLS=!1,e.smtpMethod="PLAIN",e.imapPort=993,e.imapSSL=!0,e.imapTLS=!1,e.accountType="IMAP",e.favoriteMailboxes=null,Immutable.Map(e)},n}(l),o.exports=new a}),require.register("stores/contact_store",function(e,t,n){var o,a,r,s={}.hasOwnProperty,i=function(e,t){function n(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=t("../libs/flux/store/store"),o=t("../constants/app_constants").ActionTypes,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n,a,r,s;return i(t,e),r="",n=Immutable.OrderedMap.empty(),s=Immutable.OrderedMap.empty(),a=function(e){var t;return s=Immutable.OrderedMap.empty(),null!=e?(Array.isArray(e)||(e=[e]),t=function(t){return e.forEach(function(e){var n,o;return n=[],e.datapoints.forEach(function(t){return"email"===t.name&&n.push(t.value),"avatar"===t.name?e.avatar=t.value:void 0}),delete e.docType,(null!=(o=e._attachments)?o.picture:void 0)&&(e.avatar="contacts/"+e.id+"/picture.jpg"),n.forEach(function(n){var o;return e.address=n,o=Immutable.Map(e),t.set(n,o)})})},s=s.withMutations(t),n=n.withMutations(t)):void 0},a(window.contacts),t.prototype.__bindHandlers=function(e){return e(o.RECEIVE_RAW_CONTACT_RESULTS,function(e){return function(t){return a(t),e.emit("change")}}(this)),e(o.CONTACT_LOCAL_SEARCH,function(e){return function(t){var o;return t=t.toLowerCase(),o=new RegExp(t,"i"),s=n.filter(function(e){var t,n;return n=e.toObject(),t="",["address","fn"].forEach(function(e){return"string"==typeof n[e]?t+=n[e]:void 0}),o.test(t)}).toOrderedMap(),e.emit("change")}}(this))},t.prototype.getResults=function(){return s},t.prototype.getQuery=function(){return r},t.prototype.getByAddress=function(e){return n.get(e)},t.prototype.getAvatar=function(e){var t;return null!=(t=n.get(e))?t.get("avatar"):void 0},t.prototype.isExist=function(e){return null!=this.getByAddress(e)},t}(r),n.exports=new a}),require.register("stores/layout_store",function(e,n,o){var a,r,s,i,c,l,u,p,d,m,f={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var o in t)f.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};p=n("../libs/flux/store/store"),m=n("../constants/app_constants"),r=m.ActionTypes,i=m.Dispositions,s=n("../app_dispatcher"),a=n("./account_store"),u=null,d=function(){return null==u&&(u=n("../actions/message_action_creator")),u},c=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}var o,c,l,u,p,m,f,g,v;return h(n,e),o=i.COL,f=60,m=!1,v=Immutable.OrderedMap(),g=!0,l=!1,u=!1,c=window.innerWidth>1280,p=null,n.prototype.__bindHandlers=function(e){var n,i;return e(r.SET_DISPOSITION,function(e){return o=e,this.emit("change")}),e(r.TOGGLE_LIST_MODE,function(){return u=!u,this.emit("change")}),e(r.RESIZE_PREVIEW_PANE,function(e){return e?(f+=e,20>f&&(f=20),f>80&&(f=80)):f=50,this.emit("change")}),e(r.MINIMIZE_PREVIEW_PANE,function(){return m=!1,this.emit("change")}),e(r.MAXIMIZE_PREVIEW_PANE,function(){return m=!0,this.emit("change")}),e(r.DISPLAY_MODAL,function(e){return p=e,this.emit("change")}),e(r.HIDE_MODAL,function(e){return p=null,this.emit("change")}),e(r.REFRESH,function(){return this.emit("change")}),e(r.CLEAR_TOASTS,function(){return v=Immutable.OrderedMap(),this.emit("change")}),e(r.RECEIVE_TASK_UPDATE,function(e){return function(t){return e._showNotification(t)}}(this)),e(r.RECEIVE_TASK_DELETE,function(e){return this._removeNotification(e)}),e(r.TOASTS_SHOW,function(){return g=!0,this.emit("change")}),e(r.TOASTS_HIDE,function(){return g=!1,this.emit("change")}),e(r.INTENT_AVAILABLE,function(e){return l=e,this.emit("change")}),e(r.DRAWER_SHOW,function(){return c!==!0?(c=!0,this.emit("change")):void 0}),e(r.DRAWER_HIDE,function(){return c!==!1?(c=!1,this.emit("change")):void 0}),e(r.DRAWER_TOGGLE,function(){return c=!c,this.emit("change")}),n=function(e,n,o,a){var r,s,i;if(s=null!=e?e.subject:void 0,e.messageID&&e.isDraft)i="draft";else if(e.messageID)i="message";else if(e.conversationID)i="conversation";else if(e.conversationIDs)i="conversations",r=e.conversationIDs.length;else{if(!e.messageIDs)throw new Error("Wrong Usage : unrecognized target");i="messages",r=e.messageIDs.length}return t(""+i+" "+o,{error:a,subject:s||"",smart_count:r})},i=function(e){return{label:t("action undo"),onClick:function(){return d().undo(e)}}},e(r.MESSAGE_TRASH_SUCCESS,function(e){var t,o,a;return o=e.target,t=e.ref,a=e.updated,this._showNotification({message:n(o,t,"delete ok"),actions:[i(t)],autoclose:!0})}),e(r.MESSAGE_TRASH_FAILURE,function(e){var t,o,a;return a=e.target,o=e.ref,t=e.error,this._showNotification({message:n(a,o,"delete ko",t),errors:[t],autoclose:!0})}),e(r.MESSAGE_MOVE_SUCCESS,function(e){var t,o,a;return o=e.target,t=e.ref,a=e.updated,o.silent?void 0:this._showNotification({message:n(o,t,"move ok"),actions:[i(t)],autoclose:!0})}),e(r.MESSAGE_MOVE_FAILURE,function(e){var t,o,a;return a=e.target,o=e.ref,t=e.error,this._showNotification({message:n(a,o,"move ko",t),errors:[t],autoclose:!0})}),e(r.MESSAGE_FLAGS_FAILURE,function(e){var t,o,a;return a=e.target,o=e.ref,t=e.error,this._showNotification({message:n(a,o,"flag ko",t),errors:[t],autoclose:!0})}),e(r.MESSAGE_RECOVER_FAILURE,function(e){var t,n,o;return o=e.target,n=e.ref,t=e.error,this._showNotification({message:"lost server connection",errors:[t],autoclose:!0})}),e(r.MESSAGE_FETCH_FAILURE,function(e){var t;return t=e.error,this._showNotification({message:"message fetch failure",errors:[t],autoclose:!0})}),e(r.ADD_ACCOUNT_FAILURE,function(e){var t;return t=e.error,s.waitFor([a.dispatchToken]),this._showNotification({message:a.getAlertErrorMessage(),errors:a.getRawErrors(),autoclose:!0})}),e(r.ADD_ACCOUNT_SUCCESS,function(){return this._showNotification({message:t("account creation ok"),autoclose:!0})}),e(r.EDIT_ACCOUNT_FAILURE,function(e){var t;return t=e.error,s.waitFor([a.dispatchToken]),this._showNotification({message:a.getAlertErrorMessage(),errors:a.getRawErrors(),autoclose:!0})}),e(r.EDIT_ACCOUNT_SUCCESS,function(){return this._showNotification({message:t("account updated"),autoclose:!0})}),e(r.CHECK_ACCOUNT_FAILURE,function(e){var t;return t=e.error,s.waitFor([a.dispatchToken]),this._showNotification({message:a.getAlertErrorMessage(),errors:a.getRawErrors(),autoclose:!0})}),e(r.CHECK_ACCOUNT_SUCCESS,function(){return this._showNotification({message:t("account checked"),autoclose:!0})}),e(r.REFRESH_FAILURE,function(e){var t;return t=e.error,s.waitFor([a.dispatchToken]),this._showNotification({message:a.getRefreshLastError(),errors:[t],autoclose:!0})})},n.prototype._removeNotification=function(e){return v=v.remove(e),this.emit("change")},n.prototype._showNotification=function(e){var t;return t=e.id||+Date.now(),null==e.finished&&(e.finished=!0),v=v.set(t,Immutable.Map(e)),e.autoclose&&setTimeout(this._removeNotification.bind(this,t),5e3),this.emit("change")},n.prototype.getDisposition=function(){return o},n.prototype.getListModeCompact=function(){return u},n.prototype.getPreviewSize=function(){return f},n.prototype.isPreviewFullscreen=function(){return m},n.prototype.getModal=function(){return p},n.prototype.getToasts=function(){return v},n.prototype.isShown=function(){return g},n.prototype.intentAvailable=function(){return l},n.prototype.isDrawerExpanded=function(){return c},n}(p),o.exports=l=new c}),require.register("stores/message_store",function(e,t,n){var o,a,r,s,i,c,l,u,p,d,m,f,h,g,v,y={}.hasOwnProperty,b=function(e,t){function n(){this.constructor=e}for(var o in t)y.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};d=t("../libs/flux/store/store"),s=t("./contact_store"),r=t("../app_dispatcher"),o=t("./account_store"),p=t("../utils/socketio_utils"),g=t("../constants/app_constants"),a=g.ActionTypes,l=g.MessageFlags,c=g.MessageFilter,i=g.FlagsConstants,v=t("../utils/misc"),f=v.reverseDateSort,m=v.getSortFunction,u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n,s,i,u,d,g,v,y,S,w,x,E,M,C,T,A,D,P,N,R,I,O,L,j,F,U,q,H,B,V,z,G,W,K;return b(t,e),F=Immutable.OrderedMap(),z="date",G=1,D="-",P="nofilter",A="-",T="-",C=0,B=0,q=null,H=!1,M=Immutable.Sequence(),S=Immutable.Map(),w=null,E=null,x=null,O={},I={},K={},y=function(e){return O[e.ref]=e,e.messages.forEach(function(t){var n,o;return n=t.get("id"),o=null!=I[n]?I[n]:I[n]=[],o.push(e)}),w=null},V=function(e){var t;return t=O[e],delete O[e],t.messages.forEach(function(e){var n,o;return n=e.get("id"),o=I[n],I[n]=_.without(o,t)}),w=null,t},W=function(e,t){var n,o,a,r,s,i,c,l,p,d;switch(t.type){case"trash":p=t.trashBoxID,u(e)?e=null:(i={},i[p]=-1,e=e.set("mailboxIDs",i));break;case"move":s=e.get("mailboxIDs"),a=t.from,l=t.to,i={};for(r in s)d=s[r],i[r]=d;delete i[a],null==i[l]&&(i[l]=-1),e=e.set("mailboxIDs",i);break;case"flag":o=e.get("flags"),n=t.flag,c=t.op,"batchAddFlag"===c&&k.call(o,n)<0?e=e.set("flags",o.concat([n])):"batchRemoveFlag"===c&&k.call(o,n)>=0&&(e=e.set("flags",_.without(o,n)))}return e},U=function(){return F.map(function(e){var t,n,o,a,r;for(t=e.get("id"),r=I[t]||[],o=0,a=r.length;a>o;o++)n=r[o],e=W(e,n);return e}).filter(function(e){return null!==e})},N=function(e){var t,n,o,a,r;return null!=e.inReplyTo?null:(a=e.messageIDs||[e.messageID],o=h.getCurrentID()||"not-null",t=e.conversationIDs||[e.conversationID],n=h.getCurrentConversationID()||"not-null",(k.call(a,o)>=0||k.call(t,n)>=0)&&(r=h.getNextOrPrevious(!0),null!=r)?setTimeout(function(){return window.cozyMails.messageSetCurrent(r)},1):void 0)},R=function(e){if(e.messageID)return[F.get(e.messageID)];if(e.messageIDs)return e.messageIDs.map(function(e){return F.get(e)});if(e.conversationID)return F.filter(function(t){return t.get("conversationID")===e.conversationID}).toArray();if(e.conversationIDs)return F.filter(function(t){var n;return n=t.get("conversationID"),k.call(e.conversationIDs,n)>=0}).toArray();throw new Error("Wrong Usage : unrecognized target AS.getMixed")},u=function(e,t){var n,o;return n=e.get("mailboxIDs"),n[t]||(o=l.DRAFT,k.call(e.get("flags"),o)>=0)},i=function(e){return function(t){return e in t.get("mailboxIDs")}},g=function(e){return function(t){return!(e in t.get("mailboxIDs"))}},d=function(e){return function(t){return e!==t.get("accountID")}},s=function(){var e,t;return e=[],t=function(t){var n;return n=t.get("conversationID"),n&&k.call(e,n)>=0?!1:(e.push(n),!0)}},n=function(e,t){var n,o,a,r,s,i,c,u,p,d,m,f,h;return e?(a=!1,f=l.SEEN,m=k.call(e.get("flags"),f)>=0,h=l.SEEN,s=k.call(t.get("flags"),h)>=0,n=t.get("accountID"),c=Object.keys(e.get("mailboxIDs")),i=Object.keys(t.get("mailboxIDs")),u={},o=_.difference(i,c),o.forEach(function(e){return a=!0,u[e]={nbTotal:1,nbUnread:s?0:1}}),p=_.difference(c,i),p.forEach(function(e){return a=!0,u[e]={nbTotal:-1,nbUnread:m?-1:0}}),d=_.intersection(c,i),r=m&&!s?1:!m&&s?-1:0,0!==r&&(a=!0),u[n]={nbUnread:r},d.forEach(function(e){return u[e]={nbTotal:0,nbUnread:r}}),a?u:!1):{}},v=function(e){var t,a,r,s;return r=F.get(e.id),s=null!=r?r.get("updated"):void 0,null!=e.updated&&null!=s&&s>e.updated||e._deleted||(null==e.attachments&&(e.attachments=[]),null==e.date&&(e.date=(new Date).toISOString()),null==e.createdAt&&(e.createdAt=e.date),null==e.flags&&(e.flags=[]),e.hasAttachments=e.attachments.length>0,e.attachments=e.attachments.map(function(e){return Immutable.Map(e)}),e.attachments=Immutable.Vector.from(e.attachments),delete e.docType,e.updated=Date.now(),a=Immutable.Map(e),a.prettyPrint=function(){return""+e.id+' "'+e.from[0].name+'" "'+e.subject+'"'},F=F.set(e.id,a),e.id===E&&(x=e.conversationID),null!=e.accountID&&(t=n(r,a),t&&o._applyMailboxDiff(e.accountID,t))),w=null},t.prototype.__bindHandlers=function(e){return e(a.RECEIVE_RAW_MESSAGE,function(e){return v(e),this.emit("change")}),e(a.RECEIVE_RAW_MESSAGE_REALTIME,function(e){return v(e),this.emit("change")}),e(a.RECEIVE_RAW_MESSAGES,function(e){var t,n,o;for(n=0,o=e.length;o>n;n++)t=e[n],null!=t&&v(t);return this.emit("change")}),e(a.REMOVE_ACCOUNT,function(e){return r.waitFor([o.dispatchToken]),F=F.filter(d(e)).toOrderedMap(),this.emit("change")}),e(a.MESSAGE_TRASH_REQUEST,function(e){var t,n,a,r,s,i,c,l,u,p,d;for(i=e.target,s=e.ref,r=R(i),i.subject=null!=(p=r[0])?p.get("subject"):void 0,i.accountID=r[0].get("accountID"),t=o.getByID(null!=(d=r[0])?d.get("accountID"):void 0),c=null!=t&&"function"==typeof t.get?t.get("trashMailbox"):void 0,y({type:"trash",trashBoxID:c,messages:r,ref:s}),N(i),l=0,u=r.length;u>l;l++)a=r[l],n=a.get("conversationID"),S=S.update(n,function(e){return e-1});return this.emit("change")}),e(a.MESSAGE_TRASH_SUCCESS,function(e){var t,n,o,a,r,s;for(o=e.target,a=e.updated,n=e.ref,K[n]=V(n),r=0,s=a.length;s>r;r++)t=a[r],t._deleted?F=F.remove(t.id):v(t);return this.emit("change")}),e(a.MESSAGE_TRASH_FAILURE,function(e){var t,n,o,a,r,s,i;for(r=e.target,a=e.ref,V(a),o=R(r),s=0,i=o.length;i>s;s++)n=o[s],t=n.get("conversationID"),S=S.update(t,function(e){return e+1});return this.emit("change")}),e(a.MESSAGE_FLAGS_REQUEST,function(e){var t,n,o,a,r,s;return r=e.target,o=e.op,t=e.flag,a=e.ref,n=R(r),r.subject=null!=(s=n[0])?s.get("subject"):void 0,r.accountID=n[0].get("accountID"),y({type:"flag",op:o,flag:t,messages:n,ref:a}),this.emit("change")}),e(a.MESSAGE_FLAGS_SUCCESS,function(e){var t,n,o,a,r,s;for(o=e.target,a=e.updated,n=e.ref,V(n),r=0,s=a.length;s>r;r++)t=a[r],v(t);return this.emit("change")}),e(a.MESSAGE_FLAGS_FAILURE,function(e){var t,n;return n=e.target,t=e.ref,V(t),this.emit("change")}),e(a.MESSAGE_MOVE_REQUEST,function(e){var t,n,o,a,r,s;return a=e.target,t=e.from,r=e.to,o=e.ref,n=R(a),a.subject=null!=(s=n[0])?s.get("subject"):void 0,a.accountID=n[0].get("accountID"),y({type:"move",from:t,to:r,messages:n,ref:o}),N(a),this.emit("change")}),e(a.MESSAGE_MOVE_SUCCESS,function(e){var t,n,o,a,r,s;for(o=e.target,a=e.updated,n=e.ref,K[n]=V(n),r=0,s=a.length;s>r;r++)t=a[r],v(t);return this.emit("change")}),e(a.MESSAGE_MOVE_FAILURE,function(e){var t,n;return n=e.target,t=e.ref,V(t),this.emit("change")}),e(a.MESSAGE_UNDO_TIMEOUT,function(e){var t;return t=e.ref,delete K[t]}),e(a.MESSAGE_FETCH_REQUEST,function(e){var t;return t=e.mailboxID,C++,this.emit("change")}),e(a.MESSAGE_FETCH_FAILURE,function(){return C--,this.emit("change")}),e(a.MESSAGE_FETCH_SUCCESS,function(e){var t,n,o,a,r,s,i,c,l,u,d,m,f;if(t=e.fetchResult,C--,null!=(null!=(u=t.links)?u.next:void 0)?q=decodeURIComponent(t.links.next):null!=t.links&&(H=!0),o=t.conversationLengths){for(d=t.messages,r=0,i=d.length;i>r;r++)a=d[r],null==o[l=a.conversationID]&&(o[l]=0);S=S.merge(o)}for(m=t.messages,s=0,c=m.length;c>s;s++)a=m[s],null!=a&&v(a);return n=null!=(f=F.last())?f.get("date"):void 0,n&&p.changeRealtimeScope(t.mailboxID,n),this.emit("change")}),e(a.CONVERSATION_FETCH_SUCCESS,function(e){var t,n,o,a;for(n=e.updated,o=0,a=n.length;a>o;o++)t=n[o],v(t);return this.emit("change")}),e(a.MESSAGE_SEND,function(e){return v(e),this.emit("change")}),e(a.QUERY_PARAMETER_CHANGED,function(e){var t,n,o,a,r;return r=e.type,o=e.flag,a=e.sort,n=e.before,t=e.after,(r!==D||P!==o||A!==n||T!==t||G+z!==a)&&(B++,G=a.substr(0,1),z=a.substr(1),D=r,P=o,A=n,T=t,H=!1,q=null,("from"===D||"dest"===D||"from"===r||"dest"===r)&&(F=F.clear(),w=null)),this.emit("change")}),e(a.MESSAGE_CURRENT,function(e){return this.setCurrentID(e.messageID,e.conv),this.emit("change")}),e(a.SELECT_ACCOUNT,function(e){return this.setCurrentID(null),G="+",z="date",D="nofilter",P="-",A="-",T="-",H=!1,q=null}),e(a.RECEIVE_MESSAGE_DELETE,function(e){return F=F.remove(e),w=null,this.emit("change")}),e(a.MAILBOX_EXPUNGE,function(e){return F=F.filter(g(e)),w=null,this.emit("change")}),e(a.SEARCH_SUCCESS,function(e){var t,n,o,a,r;for(n=e.searchResults,r=n.rows,o=0,a=r.length;a>o;o++)t=r[o],null!=t&&v(t);return this.emit("change")})},t.prototype.getByID=function(e){return F.get(e)||null},t.prototype.getMessageHash=function(e){var t,n,a,r,s,i;return i=e.get("id"),n=e.get("accountID"),s=o.getSelectedMailbox().get("id"),null==s&&(s=o.getMailbox(e,t)),t=o.getSelected().get("id"),a=e.get("conversationID"),r="#account/"+n+"/",r+="mailbox/"+s+"/",r+="conversation/"+a+"/"+i+"/"},s=function(){var e,t;return e=[],t=function(t){var n;return n=t.get("conversationID"),n&&k.call(e,n)>=0?!1:(e.push(n),!0)}},L=function(e){var t,n;switch(P){case c.FLAGGED:return t=l.FLAGGED,k.call(e.get("flags"),t)>=0;case c.ATTACH:return e.get("attachments").length>0;case c.UNSEEN:return n=l.SEEN,k.call(e.get("flags"),n)<0;default:return!0}},j=function(e){var t;return A<(t=e.get(D))&&T>t},t.prototype.getMessagesToDisplay=function(e,t){var n,o;return n=[],o=U(),o=o.filter(i(e)),"flag"===D&&(o=o.filter(L)),"date"===D&&(o=o.filter(j)),t&&(o=o.filter(s())),o=o.sort(m(z,G)),M=o.toOrderedMap()},t.prototype.getCurrentID=function(){return E},t.prototype.setCurrentID=function(e,t){var n,o;return null!=t&&(n=null!=(o=this.getByID(e))?o.get("conversationID"):void 0),E=e,x=n,w=null},t.prototype.getCurrentConversationID=function(){return x},t.prototype.getPreviousMessage=function(e){var t,n,o,a,r;return null!=e&&e?null==w?null:(o=w.findIndex(function(e){return E===e.get("id")}),0>o?null:o===w.length-1?(a=Object.keys(M.toJS()),
o=a.indexOf(w.last().get("id")),1>o?null:(n=M.get(a[o-1]),t=null!=n?n.get("conversationID"):void 0,null==t?null:r=F.filter(function(e){return e.get("conversationID")===t}).sort(f).first())):w.get(o+1)):(a=Object.keys(M.toJS()),o=a.indexOf(E),-1===o?null:M.get(a[o-1]))},t.prototype.getNextMessage=function(e){var t,n;return null!=e&&e?null==w?null:(t=w.findIndex(function(e){return E===e.get("id")}),0>t?null:0===t?(n=Object.keys(M.toJS()),t=n.indexOf(w.last().get("id")),-1===t||t===n.length-1?null:M.get(n[t+1])):w.get(t-1)):E?(n=Object.keys(M.toJS()),t=n.indexOf(E),-1===t||t===n.length-1?null:M.get(n[t+1])):null!=M?M.first():void 0},t.prototype.getNextOrPrevious=function(e){return this.getNextMessage(e)||this.getPreviousMessage(e)},t.prototype.getCurrentConversation=function(){var e;return e=this.getCurrentConversationID(),e?this.getConversation(e):null},t.prototype.getConversation=function(e){return w?w:w=U().filter(function(t){return t.get("conversationID")===e}).sort(f).toVector()},t.prototype.getMixed=function(e){return R(e)},t.prototype.getConversationsLength=function(){return S},t.prototype.isFetching=function(){return C>0},t.prototype.isUndoable=function(e){return null!=K[e]},t.prototype.getUndoableRequest=function(e){return K[e]},t.prototype.getQueryParams=function(){return{sort:""+G+z,type:D,filter:P,before:A,after:T,hasNextPage:!H}},t.prototype.getNextUrl=function(){var e,t,n;return H?null:q?q:(e=o.getSelectedMailbox().get("id"),t="from"===D||"dest"===D?encodeURIComponent("+"+D):encodeURIComponent(""+G+z),n="mailbox/"+e+"/?sort="+t,"flag"===D&&"-"!==P&&(n+="&flag="+P),"-"!==A&&(n+="&before="+encodeURIComponent(A)),"-"!==T&&(n+="&after="+encodeURIComponent(T)),n)},t}(d),n.exports=h=new u}),require.register("stores/refreshes_store",function(e,n,o){var a,r,s,i,c={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};s=n("../libs/flux/store/store"),a=n("../constants/app_constants").ActionTypes,i=function(e){return Immutable.Sequence(e).mapKeys(function(e,t){return t.objectID}).map(function(e){return Immutable.fromJS(e)}).toOrderedMap()},r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}var o;return l(n,e),o=i(window.refreshes||[]),n.prototype.__bindHandlers=function(e){return e(a.RECEIVE_REFRESH_STATUS,function(e){return o=i(e)}),e(a.RECEIVE_REFRESH_UPDATE,function(e){var t;return e=Immutable.Map(e),t=e.get("objectID"),o=o.set(t,e).toOrderedMap(),this.emit("change")}),e(a.RECEIVE_REFRESH_DELETE,function(e){return o=o.filter(function(t){return t.get("id")!==e}).toOrderedMap(),this.emit("change")}),e(a.RECEIVE_REFRESH_NOTIF,function(e){return window.cozyMails.notify(t("notif new title"),{body:e.message})})},n.prototype.getRefreshing=function(){return o},n}(s),o.exports=new r}),require.register("stores/search_store",function(e,t,n){var o,a,r,s,i,c,l={}.hasOwnProperty,u=function(e,t){function n(){this.constructor=e}for(var o in t)l.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=t("../libs/flux/store/store"),a=t("./message_store"),o=t("../constants/app_constants").ActionTypes,r=10,s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n,s,i,c,l,p,d,m;return u(t,e),m=0,s="",p=0,l=!1,i="all",d=Immutable.Set().clear(),c=Immutable.Map(),n=function(){return s="",d=d.clear(),c=Immutable.Map(),p=0,l=!1},n(),t.prototype.__bindHandlers=function(e){return e(o.QUERY_PARAMETER_CHANGED,function(){return n(),this.emit("change")}),e(o.SEARCH_PARAMETER_CHANGED,function(e){var t,o;return o=e.search,t=e.accountID,(o!==s||t!==i)&&n(),s=o,i=t,this.emit("change")}),e(o.SEARCH_REQUEST,function(e){return m++,p++,this.emit("change")}),e(o.SEARCH_FAILURE,function(e){var t;return t=e.error,m--,p--,d=d.clear(),this.emit("change")}),e(o.SEARCH_SUCCESS,function(e){var t,n,o;return o=e.searchResults,m--,t=o.accounts,n=o.rows.map(function(e){return e._id}),l=n.length===r,d=d.union(n),c=c.merge(t),this.emit("change")})},t.prototype.getCurrentSearch=function(){return s},t.prototype.getCurrentSearchKey=function(){return encodeURIComponent(s)},t.prototype.getCurrentSearchAccountID=function(){return i},t.prototype.getCurrentSearchResults=function(){return d.mapEntries(function(e){var t;return t=e[0],[t,a.getByID(t)]}).filter(function(e){return null!==e}).toOrderedMap()},t.prototype.hasMoreSearch=function(){return l},t.prototype.getNextSearchUrl=function(){var e;return e="search?search="+this.getCurrentSearchKey(),e+="&pageSize="+r,p&&(e+="&page="+p),"all"!==i&&(e+="&accountID="+i),e},t}(i),n.exports=c=new s}),require.register("stores/settings_store",function(e,t,n){var o,a,r,s={}.hasOwnProperty,i=function(e,t){function n(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=t("../libs/flux/store/store"),o=t("../constants/app_constants").ActionTypes,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return i(t,e),n=Immutable.Map(window.settings),t.prototype.__bindHandlers=function(e){return e(o.SETTINGS_UPDATED,function(e){return n=Immutable.Map(e),this.emit("change")})},t.prototype.get=function(e){return null==e&&(e=null),null!=e?n.get(e):n},t}(r),n.exports=new a}),require.register("utils/activity_utils",function(e,t,n){var o,a;a=t("../utils/xhr_utils"),o=function(e){var t;return t={},a.activityCreate(e,function(e,n){return e?t.onerror.call(e):t.onsuccess.call(n)}),t},n.exports=o}),require.register("utils/api_utils",function(e,n,o){var a,r,s,i,c,l,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},p={}.hasOwnProperty;a=n("../stores/account_store"),i=n("../stores/message_store"),c=n("../stores/settings_store"),r=n("../actions/layout_action_creator"),s=n("../actions/message_action_creator"),l=function(){var e,t,n;return e=["account.mailbox.messages","account.mailbox.messages.filter","account.mailbox.messages.date"],t=null!=(n=router.current.firstPanel)?n.action:void 0,u.call(e,t)>=0},o.exports={debugLogs:[],getCurrentAccount:function(){var e;return null!=(e=a.getSelected())?e.toJS():void 0},getCurrentMailbox:function(){var e;return null!=(e=a.getSelectedMailbox())?e.toJS():void 0},getCurrentMessage:function(){var e,t;return t=i.getCurrentID(),e=i.getByID(t),null!=e?e.toJS():void 0},getMessage:function(e){var t;return t=i.getByID(e),null!=t?t.toJS():void 0},getCurrentConversation:function(){var e,t;return e=i.getCurrentConversationID(),null!=e&&null!=(t=i.getConversation(e))?t.toJS():void 0},getCurrentActions:function(){var e;return e=[],Object.keys(router.current).forEach(function(t){return null!=router.current[t]?e.push(router.current[t].action):void 0}),e},messageNew:function(){return router.navigate("compose/",{trigger:!0})},setLocale:function(e){var t,o,a;window.moment.locale(e),o={};try{o=n("../locales/"+e)}catch(r){t=r,console.log(t),o=n("../locales/en")}return a=new Polyglot,a.extend(o),window.t=a.t.bind(a)},getAccountByLabel:function(e){return a.getByLabel(e)},getSetting:function(e){return c.get().toJS()[e]},setSetting:function(e,t){var o,a,r,s,i;if(a=n("../app_dispatcher"),o=n("../constants/app_constants").ActionTypes,s=c.get().toJS(),"object"==typeof e)for(r in e)p.call(e,r)&&(i=e[r],s[r]=i);else s[e]=t;return a.handleViewAction({type:o.SETTINGS_UPDATED,value:s})},messageNavigate:function(e,t){var n,o;if(l()&&(n=t&&c.get("displayConversation")&&c.get("displayPreview"),o="prev"===e?i.getPreviousMessage(n):i.getNextMessage(n),null!=o))return this.messageSetCurrent(o)},messageSetCurrent:function(e){return s.setCurrent(e.get("id"),!0),c.get("displayPreview")?this.messageDisplay(e):void 0},messageDisplay:function(e,t){var n,o,a,r,s;return null==e&&(e=i.getByID(i.getCurrentID())),null==e||t===!1&&null==window.router.current.secondPanel?void 0:(o=e.get("conversationID"),c.get("displayConversation")&&null!=o?(n="conversation",a={messageID:e.get("id"),conversationID:o}):(n="message",a={messageID:e.get("id")}),s={direction:"second",action:n,parameters:a},r=window.router.buildUrl(s),window.router.navigate(r,{trigger:!0}))},messageClose:function(){var e,t;return t=window.location.href,e=t.replace(/\/message\/[^\/]*\//gi,""),e=e.replace(/\/conversation\/[^\/]*\/[^\/]*\//gi,""),window.location.href=e},messageDeleteCurrent:function(){var e,n,o,a,u,p;if(l()&&(a=i.getCurrentID(),null!=a))return p=c.get(),o=p.get("displayConversation"),e=p.get("messageConfirmDelete"),e&&(n=o?t("list delete conv confirm",{smart_count:1}):t("list delete confirm",{smart_count:1})),e?(u={title:t("app confirm delete"),subtitle:n,closeLabel:t("app cancel"),actionLabel:t("app confirm"),action:function(){return s["delete"]({messageID:a}),r.hideModal()}},r.displayModal(u)):s["delete"]({messageID:a})},messageUndo:function(){return s.undo()},customEvent:function(e,t){var n;return n=new CustomEvent(e,{detail:t}),window.dispatchEvent(n)},simulateUpdate:function(){var e;return e=n("../app_dispatcher"),window.setInterval(function(){var t,n,o;return t={accountID:null!=(n=a.getDefault())?n.get("id"):void 0,id:null!=(o=a.getDefaultMailbox())?o.get("id"):void 0,label:"INBOX",path:"INBOX",tree:["INBOX"],delimiter:".",uidvalidity:Date.now(),attribs:[],docType:"Mailbox",lastSync:(new Date).toISOString(),nbTotal:467,nbUnread:0,nbRecent:5,weight:1e3,depth:0},e.handleServerAction({type:"RECEIVE_MAILBOX_UPDATE",value:t})},5e3)},notify:function(e,t){return null!=window.Notification&&c.get("desktopNotifications")?new Notification(e,t):(null==t&&(t={body:e}),window.setTimeout(function(){return r.notify(""+e+" - "+t.body)},0))},log:function(e){var t;return t=e.stack.split("\n")[0].split("@")[1].split(/:\d/)[0].split("/").slice(0,-2).join("/"),window.onerror(e.name,t,e.lineNumber,e.colNumber,e)},dump:function(){var e;return(e=function(t){var n,o,a,r,s,i;o={children:{},state:{},props:{}},r=t.state;for(n in r)a=r[n],"object"==typeof a?o.state[n]=_.clone(a):o.state[n]=a;s=t.props;for(n in s)a=s[n],"object"==typeof a?o.props[n]=_.clone(a):o.props[n]=a;i=t.refs;for(n in i)a=i[n],o.children[n]=e(t.refs[n]);return o})(window.rootComponent)},logInfo:function(e){var t,n;return t={data:{type:"debug",message:e}},n=new XMLHttpRequest,n.open("POST","activity",!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify(t)),console.log(e)},logAction:function(e,t){var n,o,a;return"development"===window.app_env?(n=function(e){var t,n,o;return t=_.clone(e),n=function(e){var t;return null!=e?(t=_.clone(e),delete t.headers,delete t.html,delete t.text,delete t.attachments,t):void 0},Array.isArray(t.value)?t.value=t.value.map(n):(t.value=n(t.value),Array.isArray(null!=(o=t.value)?o.messages:void 0)&&(t.value.messages=t.value.messages.map(n))),t},o=(new Error).stack||"",o=o.split("\n").filter(function(e){return/app.js/.test(e.split("@"))}).map(function(e){return e.split("@")[0]}),a={date:(new Date).toISOString(),stack:o.splice(2)},null!=e&&(a.action=n(e)),null!=t&&(a.message=t),window.cozyMails.debugLogs.unshift(a),window.cozyMails.debugLogs=window.cozyMails.debugLogs.slice(0,100)):void 0},displayLogs:function(){var e;return e={title:t("modal please contribute"),subtitle:t("modal please report"),allowCopy:!0,closeLabel:t("app alert close"),content:React.DOM.pre({style:{"max-height":"300px","word-wrap":"normal"}},JSON.stringify(window.cozyMails.debugLogs,null,4))},r.displayModal(e)},clearLogs:function(){return window.cozyMails.debugLogs=[]}}}),require.register("utils/colorhash",function(e,t,n){var o,a;a=function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e},o=function(e,t,n){var o,r,s,i,c,l;return 0===t?l=s=o=n:(c=.5>n?n*(1+t):n+t-n*t,i=2*n-c,l=a(i,c,e+1/3),s=a(i,c,e),o=a(i,c,e-1/3)),r=(1<<24)+(255*l<<16)+(255*s<<8)+parseInt(255*o),"#"+r.toString(16).slice(1)},n.exports=function(e){var t,n,a,r,s,i,c,l;for(a=0,r=c=0,l=e.length-1;l>=0?l>=c:c>=l;r=l>=0?++c:--c)a=e.charCodeAt(r)+(a<<5)-a;return n=a%100/100,i=a%1e3/1e3,s=.5+.2*(a%2)/2,t=o(n,i,s)}}),require.register("utils/discovery_to_fields",function(e,t,n){var o;n.exports=o=function(e){var t,n,o,a;for(t={},o=0,a=e.length;a>o;o++)n=e[o],"imap"===n.type&&null==t.imapServer&&(t.imapServer=n.hostname,t.imapPort=n.port,"SSL"===n.socketType?(t.imapSSL=!0,t.imapTLS=!1):"STARTTLS"===n.socketType?(t.imapSSL=!1,t.imapTLS=!0):"plain"===n.socketType&&(t.imapSSL=!1,t.imapTLS=!1)),"smtp"===n.type&&null==t.smtpServer&&(t.smtpServer=n.hostname,t.smtpPort=n.port,"SSL"===n.socketType?(t.smtpSSL=!0,t.smtpTLS=!1):"STARTTLS"===n.socketType?(t.smtpSSL=!1,t.smtpTLS=!0):"plain"===n.socketType&&(t.smtpSSL=!1,t.smtpTLS=!1));if(null==t.imapServer&&(t.imapServer="",t.imapPort="993"),null==t.smtpServer&&(t.smtpServer="",t.smtpPort="465"),!t.imapSSL)switch(t.imapPort){case"993":t.imapSSL=!0,t.imapTLS=!1;break;default:t.imapSSL=!1,t.imapTLS=!1}if(!t.smtpSSL)switch(t.smtpPort){case"465":t.smtpSSL=!0,t.smtpTLS=!1;break;case"587":t.smtpSSL=!1,t.smtpTLS=!0;break;default:t.smtpSSL=!1,t.smtpTLS=!1}return t.isGmail="imap.googlemail.com"===t.imapServer,t}}),require.register("utils/dom_utils",function(e,t,n){var o;n.exports=o={isVisible:function(e){var t,n,o;return n=e.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,0===t||0===o?!1:n.bottom<=t+0&&n.top>=0}}}),require.register("utils/file_utils",function(e,t,n){var o;n.exports=o={dataURItoBlob:function(e){var t,n,o,a,r;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):window.unescape(e.split(",")[1]),o={mime:e.split(",")[0].split(":")[1].split(";")[0],blob:new Uint8Array(t.length)},n=a=0,r=t.length;r>=0?r>=a:a>=r;n=r>=0?++a:--a)o.blob[n]=t.charCodeAt(n);return o},fileToDataURI:function(e,t){var n;return n=new FileReader,n.readAsDataURL(e),n.onload=function(){return t(n.result)}}}}),require.register("utils/intent_manager",function(e,t,n){var o,a;a=3e3,n.exports=o=function(){function e(){this.talker=new Talker(window.parent,"*")}return e.prototype.send=function(e,t,n){return this.talker.timeout=n?n:a,this.talker.send("nameSpace",t)},e}()}),require.register("utils/message_utils",function(e,n,o){var a,r,s,i,c,l,u;u=React.DOM.span,r=n("../constants/app_constants").ComposeActions,s=n("../stores/contact_store"),l=n("../stores/search_store"),c="margin-left: 0.8ex; padding-left: 1ex; border-left: 3px solid #34A6FF;",a="<style>\npre {background: transparent; border: 0}\n</style>",o.exports=i={displayAddress:function(e,t){return null==t&&(t=!1),t?null!=e.name&&""!==e.name?'"'+e.name+'" <'+e.address+">":""+e.address:null!=e.name&&""!==e.name?e.name:e.address.split("@")[0]},displayAddresses:function(e,t){var n,o,a,r;if(null==t&&(t=!1),null==e)return"";for(o=[],a=0,r=e.length;r>a&&(n=e[a],null!=n);a++)o.push(i.displayAddress(n,t));return o.join(", ")},highlightSearch:function(e){var t,n;return t=new RegExp(l.getCurrentSearch(),"gi"),n=e.match(t),n?e.split(t).reduce(function(e,t,o){return t.length&&e.push(t),n[o]&&e.push(u({className:"hlt-search"},n[o])),e},[]):[e]},parseAddress:function(e){var t,n,o;return e=e.trim(),t=(o=e.match(/"{0,1}(.*)"{0,1} <(.*)>/))?{name:o[1],address:o[2]}:{address:e.replace(/^\s*/,"")},n=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,t.isValid=t.address.match(n),t},getReplyToAddress:function(e){var t,n;return n=e.get("replyTo"),t=e.get("from"),null!=n&&0!==n.length?n:t},addSignature:function(e,t){var n;return e.text+="\n\n-- \n"+t,n=t.replace(/\n/g,"<br>"),e.html+='<p><br></p><p id="signature">-- \n<br>'+n+"</p>\n<p><br></p>"},makeReplyMessage:function(e,t,n,o,a){var s,i,c,l,u,p,d,m,f;if(u={composeInHTML:o,attachments:Immutable.Vector.empty()},t){if(u.accountID=t.get("accountID"),u.conversationID=t.get("conversationID"),s=this.formatReplyDate(t.get("createdAt")),m=this.displayAddresses(t.get("from")),f=t.get("text"),c=t.get("html"),null==f&&(f=""),null!=f&&null==c&&o)try{c=markdown.toHTML(f)}catch(h){i=h,console.error("Error converting message to Markdown: "+i),c="<div class='text'>"+f+"</div>"}null==c||null!=f||o||(f=toMarkdown(c)),u.inReplyTo=[t.get("id")],u.references=t.get("references")||[],u.references=u.references.concat(u.inReplyTo)}switch(l=null!=a&&a.length>0?!0:!1,d={message:u,inReplyTo:t,dateHuman:s,sender:m,text:f,html:c,signature:a,isSignature:l},n){case r.REPLY:this.setMessageAsReply(d);break;case r.REPLY_ALL:this.setMessageAsReplyAll(d);break;case r.FORWARD:this.setMessageAsForward(d);break;case null:this.setMessageAsDefault(d)}return p=function(t){return t.address!==e},u.to=u.to.filter(p),u.cc=u.cc.filter(p),u},setMessageAsReply:function(e){var n,o,r,s,i,l,u,p,d,m;return i=e.message,r=e.inReplyTo,n=e.dateHuman,u=e.sender,m=e.text,o=e.html,d=e.signature,s=e.isSignature,l={date:n,sender:u},p=t("compose reply separator",l),i.to=this.getReplyToAddress(r),i.cc=[],i.bcc=[],i.subject=this.getReplySubject(r),i.text=p+this.generateReplyText(m)+"\n",i.html=""+a+"\n<p><br></p>",s&&this.addSignature(i,d),i.html+="<p>"+p+'<span class="originalToggle"> … </span></p>\n<blockquote style="'+c+'">'+o+"</blockquote>"},setMessageAsReplyAll:function(e){var n,o,r,s,i,l,u,p,d,m,f;return i=e.message,r=e.inReplyTo,n=e.dateHuman,u=e.sender,m=e.text,o=e.html,d=e.signature,s=e.isSignature,l={date:n,sender:u},p=t("compose reply separator",l),i.to=this.getReplyToAddress(r),f=i.to.map(function(e){return e.address}),i.cc=[].concat(r.get("from"),r.get("to"),r.get("cc")).filter(function(e){return null!=e&&-1===f.indexOf(e.address)}),i.bcc=[],i.subject=this.getReplySubject(r),i.text=p+this.generateReplyText(m)+"\n",i.html=""+a+"\n<p><br></p>",s&&this.addSignature(i,d),i.html+="<p>"+p+'<span class="originalToggle"> … </span></p>\n<blockquote style="'+c+'">'+o+"</blockquote>\n<p><br></p>"},setMessageAsForward:function(e){var n,o,r,s,i,c,l,u,p,d,m,f,h,g,v,y;return u=e.message,c=e.inReplyTo,o=e.dateHuman,p=e.sender,v=e.text,s=e.html,g=e.signature,l=e.isSignature,n=c.get("to").map(function(e){return e.address}).join(", "),m=this.getReplyToAddress(c),f="",d=m.length>0?(f=m[0].name,d=m[0].address):void 0,r=f.length>0?""+f+" &lt;"+d+"&gt;":d,h="\n----- "+t("compose forward header")+" ------\n"+t("compose forward subject")+" "+c.get("subject")+"\n"+t("compose forward date")+" "+o+"\n"+t("compose forward from")+" "+r+"\n"+t("compose forward to")+" "+n+"\n",y=h.replace("&lt;","<").replace("&gt;",">"),y=y.replace("<pre>","").replace("</pre>",""),i=h.replace(/(\n)+/g,"<br>"),this.setMessageAsDefault(e),u.subject=""+t("compose forward prefix")+c.get("subject"),u.text=y+v,u.html=""+a,l&&this.addSignature(u,g),u.html+="\n<p>"+i+"</p><p><br></p>"+s,u.attachments=c.get("attachments"),u},setMessageAsDefault:function(e){var t,n,o,r,s,i,c,l;return s=e.message,o=e.inReplyTo,t=e.dateHuman,i=e.sender,l=e.text,n=e.html,c=e.signature,r=e.isSignature,s.to=[],s.cc=[],s.bcc=[],s.subject="",s.text="",s.html=""+a+"\n<p><br></p>",r&&this.addSignature(s,c),s},generateReplyText:function(e){var t;return e=e.split("\n"),t=[],e.forEach(function(e){return t.push("> "+e)}),t.join("\n")},getAttachmentType:function(e){var t;if(!e)return null;switch(t=e.split("/"),t[0]){case"audio":case"image":case"text":case"video":return t[0];case"application":switch(t[1]){case"vnd.ms-excel":case"vnd.oasis.opendocument.spreadsheet":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"spreadsheet";case"msword":case"vnd.ms-word":case"vnd.oasis.opendocument.text":case"vnd.openxmlformats-officedocument.wordprocessingml.document":return"word";case"vns.ms-powerpoint":case"vnd.oasis.opendocument.presentation":case"vnd.openxmlformats-officedocument.presentationml.presentation":return"presentation";case"pdf":return t[1];case"gzip":case"zip":return"archive"}}},formatReplyDate:function(e){return null==e&&(e=moment()),e=moment(e),e.format("lll")},formatDate:function(e,t){var n,o;return null==e?null:(o=moment(),e=moment(e),n=e.isBefore(o,"year")?"DD/MM/YYYY":e.isBefore(o,"day")?null!=t&&t?"L":"MMM DD":"HH:mm",e.format(n))},getAvatar:function(e){return null!=e.get("from")[0]?s.getAvatar(e.get("from")[0].address):null},getPreview:function(e){var t,n;return n=e.get("text"),null==n&&(t=e.get("html"),n=null!=t?toMarkdown(t)(pr("")):""),n.substr(0,1024)},cleanReplyText:function(e){var t,n;try{t=e.replace(/<(style>)[^\1]*\1/gim,""),t=toMarkdown(t)}catch(o){null!=e&&(t=e.replace(/<(style>)[^\1]*\1/gim,""),t=e.replace(/<[^>]*>/gi,""))}return n=document.createElement("div"),n.innerHTML=t,t=n.textContent,t=t.replace(/>[ \t]+/gi,"> "),t=t.replace(/(> \n)+/g,"> \n")},wrapReplyHtml:function(e){return e=e.replace(/<p>/g,'<p style="margin: 0">'),'<style type="text/css">\nblockquote {\n    margin: 0.8ex;\n    padding-left: 1ex;\n    border-left: 3px solid #34A6FF;\n}\np {margin: 0;}\npre {background: transparent; border: 0}\n</style>\n'+e},getReplySubject:function(e){var n,o;return o=e.get("subject")||"",n=t("compose reply prefix"),0!==o.indexOf(n)&&(o=""+n+o),o},tooltip:function(e,n,o,a){var r,i,c,l;return null==a&&(a={}),l=null,i=function(e){return e.preventDefault(),e.stopPropagation(),o(n)},r=function(r){var l,u,p,d,m,f,h,g,v;if(!e.dataset.tooltip)return e.dataset.tooltip=!0,d=s.getByAddress(n.address),p=null!=d?d.get("avatar"):void 0,l="",m="",null!=d?(m=null!=p?"<img class='avatar' src="+p+">":"<div class='no-avatar'>?</div>",m='<div class="tooltip-avatar">\n  <a href="/#apps/contacts/contact/'+d.get("id")+'" target="blank">\n    '+m+"\n  </a>\n</div>"):null!=o&&(l='<p class="tooltip-toolbar">\n  <button class="btn btn-cozy btn-add" type="button">\n  '+t("contact button label")+"\n  </button>\n</p>"),g='<div class="tooltip" role="tooltip">\n    <div class="tooltip-arrow"></div>\n    <div class="tooltip-content">\n        '+m+"\n        <div>\n        "+n.name+"\n        "+(n.name?"<br>":"")+"\n        &lt;"+n.address+"&gt;\n        </div>\n        "+l+"\n    </div>\n</div>'",a={title:n.address,template:g,trigger:"manual",placement:"auto top",container:a.container||e.parentNode},jQuery(e).tooltip(a).tooltip("show"),v=jQuery(e).data("bs.tooltip").tip()[0],parseInt(v.style.left,10)<0&&(v.style.left=0),h=v.getBoundingClientRect(),f=document.createElement("div"),f.classList.add("tooltip-mask"),f.style.top=h.top-8+"px",f.style.left=h.left-8+"px",f.style.height=h.height+32+"px",f.style.width=h.width+16+"px",document.body.appendChild(f),f.addEventListener("mouseout",function(e){var t,n;return h.left<(t=e.pageX)&&t<h.right&&h.top<(n=e.pageY)&&n<h.bottom?void 0:(f.parentNode.removeChild(f),c())}),null!=o&&(u=v.querySelector(".btn-add"),null!=u)?u.addEventListener("click",i):void 0},c=function(){var t;return t=e.querySelector(".btn-add"),null!=t&&t.removeEventListener("click",i),delete e.dataset.tooltip,jQuery(e).tooltip("destroy")},e.addEventListener("mouseover",function(){return l=setTimeout(function(){return r()},a.delay||1e3)}),e.addEventListener("mouseout",function(){return clearTimeout(l)}),a.showOnClick?e.addEventListener("click",function(e){return e.stopPropagation(),r()}):void 0}}}),require.register("utils/misc",function(e,t,n){e.getSortFunction=function(e,t){var n;return n=function(n,o){var a,r;return a=n.get(e),r=o.get(e),a>r?-1*t:r>a?1*t:0}},e.reverseDateSort=e.getSortFunction("date",-1)}),require.register("utils/plugin_utils",function(e,n,o){var a,r={}.hasOwnProperty;a={modal:function(e){var n;return n=document.createElement("div"),n.classList.add("modal"),n.classList.add("fade"),n.innerHTML='<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal"\n                    aria-label="Close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n            <h4 class="modal-title"></h4>\n        </div>\n        <div class="modal-body"> </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-default"\n                    data-dismiss="modal">'+t("plugin modal close")+"\n            </button>\n        </div>\n    </div>\n</div>",null!=e.title&&(n.querySelector(".modal-title").innerHTML=e.title),null!=e.body&&("string"==typeof e.body?n.querySelector(".modal-body").innerHTML=e.body:n.querySelector(".modal-body").appendChild(e.body)),"small"===e.size&&n.querySelector(".modal-dialog").classList.add("modal-sm"),"large"===e.size&&n.querySelector(".modal-dialog").classList.add("modal-lg"),e.show!==!1&&(document.body.appendChild(n),window.jQuery(n).modal("show")),n}},o.exports={init:function(){var e,t,n;return null==window.plugins&&(window.plugins={}),window.plugins.helpers=a,Object.keys(window.plugins).forEach(function(e){return function(t){var n,o;return o=window.plugins[t],null!=o.url?(n=function(){return e.activate(t)},e.loadJS(o.url,n)):o.active?e.activate(t):void 0}}(this)),"undefined"!=typeof MutationObserver&&null!==MutationObserver?(e={attributes:!1,childList:!0,characterData:!1,subtree:!0},n=function(e){var t,n,o,a,s,i;for(n=function(e,t){var n,o,a,s,i;if(e.nodeType===Node.ELEMENT_NODE){s=window.plugins,i=[];for(a in s)r.call(s,a)&&(o=s[a],o.active?("add"===t&&(n=o.onAdd),"delete"===t&&(n=o.onDelete),null!=n&&n.condition.bind(o)(e)?i.push(n.action.bind(o)(e)):i.push(void 0)):i.push(void 0));return i}},t=function(e){var t,o,a,r,s,i,c;for(o=Array.prototype.slice.call(e.addedNodes),a=0,s=o.length;s>a;a++)t=o[a],n(t,"add");for(o=Array.prototype.slice.call(e.removedNodes),c=[],r=0,i=o.length;i>r;r++)t=o[r],c.push(n(t,"del"));return c},i=[],a=0,s=e.length;s>a;a++)o=e[a],i.push(t(o));return i},t=new MutationObserver(n),t.observe(document,e)):setInterval(function(){var e,t,n,o;n=window.plugins,o=[];for(t in n)r.call(n,t)&&(e=n[t],e.active?(null!=e.onAdd&&e.onAdd.condition.bind(e)(document.body)&&e.onAdd.action.bind(e)(document.body),null!=e.onDelete&&e.onDelete.condition.bind(e)(document.body)?o.push(e.onDelete.action.bind(e)(document.body)):o.push(void 0)):o.push(void 0));return o},200)},activate:function(e){var t,n,o,a,s,i,c,l,u;try{if(a=window.plugins[e],c=a.type,a.active=!0,null!=a.listeners){l=a.listeners;for(n in l)r.call(l,n)&&(o=l[n],window.addEventListener(n,o.bind(a)))}if(a.onActivate&&a.onActivate(),null!=c){u=window.plugins;for(i in u)r.call(u,i)&&(s=u[i],i!==e&&s.type===c&&s.active&&this.deactivate(i))}return n=new CustomEvent("plugin",{detail:{action:"activate",name:e}}),window.dispatchEvent(n)}catch(p){return t=p,console.log("Unable to activate plugin "+e+": "+t)}},deactivate:function(e){var t,n,o,a,s;try{if(a=window.plugins[e],a.active=!1,null!=a.listeners){s=a.listeners;for(n in s)r.call(s,n)&&(o=s[n],window.removeEventListener(n,o))}return a.onDeactivate&&a.onDeactivate(),n=new CustomEvent("plugin",{detail:{action:"deactivate",name:e}}),window.dispatchEvent(n)}catch(i){return t=i,console.log("Unable to deactivate plugin "+e+": "+t)}},merge:function(e){var t,n,o,a,s;for(o in e)r.call(e,o)&&(n=e[o],t=window.plugins[o],null!=t?t.active=n.active:null!=n.url?window.plugins[o]=n:delete e[o]);a=window.plugins,s=[];for(o in a)r.call(a,o)&&(n=a[o],null==e[o]?s.push(e[o]={name:n.name,active:n.active}):s.push(void 0));return s},loadJS:function(e,t){var n;return n=document.createElement("script"),n.type="text/javascript",n.async=!0,n.src=e,null!=t&&n.addEventListener("load",t),document.body.appendChild(n)},load:function(e){var t,n,o;if(!/:\/\//.test(e))try{throw new Error}catch(a){n=a,t=n.stack.split("\n")[0].split("@")[1].split(/:\d/)[0].split("/").slice(0,-2).join("/"),e=t+"/"+e+"/"}return o=new XMLHttpRequest,o.open("GET",e,!0),o.onload=function(){var e,t;return t=new DOMParser,e=t.parseFromString(o.response,"text/html"),e&&(Array.prototype.forEach.call(e.querySelectorAll("style"),function(e){var t;return t=document.createElement("style"),document.body.appendChild(t),Array.prototype.forEach.call(e.sheet.cssRules,function(e,n){return t.sheet.insertRule(e.cssText,n)})}),Array.prototype.forEach.call(e.querySelectorAll("script"),function(e){var t;return t=document.createElement("script"),t.textContent=e.textContent,document.body.appendChild(t)})),o.send()}}}}),require.register("utils/socketio_utils",function(e,t,n){var o,a,r,s,i,c,l,u;a=t("../app_dispatcher"),o=t("../constants/app_constants").ActionTypes,u=window.location.origin,s=""+window.location.pathname+"socket.io",l=io.connect(u,{path:s,reconnectionDelayMax:6e4,reconectionDelay:2e3,reconnectionAttempts:3}),r=function(e){return function(t){return a.handleServerAction({type:e,value:t})}},i={},c=function(){return l.emit("change_scope",i)},l.on("message.create",r(o.RECEIVE_RAW_MESSAGE_REALTIME)),l.on("message.update",r(o.RECEIVE_RAW_MESSAGE)),l.on("message.delete",r(o.RECEIVE_MESSAGE_DELETE)),l.on("mailbox.update",r(o.RECEIVE_MAILBOX_UPDATE)),l.on("connect",function(){return c()}),l.on("reconnect",function(){return c()}),l.on("refresh.notify",r(o.RECEIVE_REFRESH_NOTIF)),e.changeRealtimeScope=function(e,t){return i={mailboxID:e,before:t},c()}}),require.register("utils/translators/account_translator",function(e,t,n){var o,a,r=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};a=t("../../constants/app_constants").MailboxFlags,n.exports=o={toImmutable:function(e){var t,n,o,s;return t={},o=900,s=400,null==e.mailboxes&&(e.mailboxes=[]),(null==e.draftMailbox||null==e.sentMailbox||null==e.trashMailbox)&&e.mailboxes.forEach(function(t){var n,o,s;return null==e.draftMailbox&&(n=a.DRAFT,r.call(t.attribs,n)>=0)&&(e.draftMailbox=t.id),null==e.sentMailbox&&(o=a.SENT,r.call(t.attribs,o)>=0)&&(e.sentMailbox=t.id),null==e.trashMailbox&&(s=a.TRASH,r.call(t.attribs,s)>=0)?e.trashMailbox=t.id:void 0}),(null==e.draftMailbox||null==e.sentMailbox||null==e.trashMailbox)&&e.mailboxes.forEach(function(t){return null==e.draftMailbox&&/draft/i.test(t.label)&&(e.draftMailbox=t.id),null==e.sentMailbox&&/sent/i.test(t.label)&&(e.sentMailbox=t.id),null==e.trashMailbox&&/trash/i.test(t.label)?e.trashMailbox=t.id:void 0}),n=Immutable.Sequence(e.mailboxes).mapKeys(function(e,t){return t.id}).map(function(e){var n;return e.depth=e.tree.length-1,0===e.depth?(n=e.label.toLowerCase(),"inbox"===n?e.weight=1e3:e.attribs.length>0||/draft/.test(n)||/sent/.test(n)||/trash/.test(n)?(e.weight=o,o-=5):(e.weight=s,s-=5),t[e.depth]=e.weight):(e.weight=t[e.depth-1]-.1,t[e.depth]=e.weight),Immutable.Map(e)}).toOrderedMap(),delete e.totalUnread,e.mailboxes=n,Immutable.Map(e)}}}),require.register("utils/xhr_utils",function(e,t,n){var o,a,r,s,i=[].slice;s=superagent,o=t("./translators/account_translator"),a=t("../stores/settings_store"),r=function(){var e,t,n,o,a,r;return o=arguments[0],e=arguments[1],t=3<=arguments.length?i.call(arguments,2):[],o.ok?e(null,o.body):(n=(null!=(a=o.body)?a.error:void 0)===!0?o.body:(null!=(r=o.body)?r.error:void 0)?o.body.error:o.body?o.body:new Error("error in "+t[0]),console.log.apply(console,["Error in"].concat(i.call(t),[n])),e(n))},n.exports={changeSettings:function(e,t){return s.put("settings").set("Accept","application/json").send(e).end(function(n){return r(n,t,"changeSettings",e)})},fetchMessage:function(e,t){return s.get("message/"+e).set("Accept","application/json").end(function(n){return r(n,t,"fetchMessage",e)})},fetchConversation:function(e,t){return s.get("messages/batchFetch?conversationID="+e).set("Accept","application/json").end(function(n){return n.ok&&(n.body.conversationLengths={},n.body.conversationLengths[e]=n.body.length),r(n,t,"fetchConversation",e)})},fetchMessagesByFolder:function(e,t){return s.get(e).set("Accept","application/json").end(function(n){return r(n,t,"fetchMessagesByFolder",e)})},mailboxCreate:function(e,t){return s.post("mailbox").send(e).set("Accept","application/json").end(function(n){return r(n,t,"mailboxCreate",e)})},mailboxUpdate:function(e,t){return s.put("mailbox/"+e.mailboxID).send(e).set("Accept","application/json").end(function(n){return r(n,t,"mailboxUpdate",e)})},mailboxDelete:function(e,t){return s.del("mailbox/"+e.mailboxID).set("Accept","application/json").end(function(n){
return r(n,t,"mailboxDelete",e)})},mailboxExpunge:function(e,t){return s.del("mailbox/"+e.mailboxID+"/expunge").set("Accept","application/json").end(function(n){return r(n,t,"mailboxExpunge",e)})},messageSend:function(e,t){var n,o,a,i;i=s.post("message").set("Accept","application/json"),o={},e.attachments=e.attachments.map(function(e){return o[e.get("generatedFileName")]=e.get("rawFileObject"),e.remove("rawFileObject")}).toJS(),i.field("body",JSON.stringify(e));for(a in o)n=o[a],null!=n&&i.attach(a,n);return i.end(function(n){return r(n,t,"messageSend",e)})},batchFetch:function(e,t){var n;return n=_.extend({},e),s.put("messages/batchFetch").send(e).end(function(e){return r(e,t,"batchFetch")})},batchAddFlag:function(e,t,n){var o;return o=_.extend({flag:t},e),s.put("messages/batchAddFlag").send(o).end(function(e){return r(e,n,"batchAddFlag")})},batchRemoveFlag:function(e,t,n){var o;return o=_.extend({flag:t},e),s.put("messages/batchRemoveFlag").send(o).end(function(e){return r(e,n,"batchRemoveFlag")})},batchDelete:function(e,t){var n;return n=_.extend({},e),s.put("messages/batchTrash").send(e).end(function(e){return r(e,t,"batchDelete")})},batchMove:function(e,t,n,o){var a;return a=_.extend({from:t,to:n},e),s.put("messages/batchMove").send(a).end(function(e){return r(e,o,"batchMove")})},createAccount:function(e,t){return s.post("account").send(e).set("Accept","application/json").end(function(n){return r(n,t,"createAccount",e)})},editAccount:function(e,t){var n;return n=e.toJS(),s.put("account/"+n.id).send(n).set("Accept","application/json").end(function(n){return r(n,t,"editAccount",e)})},checkAccount:function(e,t){return s.put("accountUtil/check").send(e).set("Accept","application/json").end(function(e){return r(e,t,"checkAccount")})},removeAccount:function(e,t){return s.del("account/"+e).set("Accept","application/json").end(function(e){return r(e,t,"removeAccount")})},accountDiscover:function(e,t){return s.get("provider/"+e).set("Accept","application/json").end(function(e){return r(e,t,"accountDiscover")})},search:function(e,t){return s.get(e).set("Accept","application/json").end(function(e){return r(e,t,"search")})},refresh:function(e,t){var n;return n=e?"refresh?all=true":"refresh",s.get(n).end(function(e){return r(e,t,"refresh")})},refreshMailbox:function(e,t){return s.get("refresh/"+e).end(function(e){return r(e,t,"refreshMailbox")})},activityCreate:function(e,t){return s.post("activity").send(e).set("Accept","application/json").end(function(n){return r(n,t,"activityCreate",e)})}}});